import{_ as G,r,Q as J,R as M,a as n,H as q,o as s,l as O,d as o,w as t,I as g,f as i,h as W,j as S,U as N,c as u,i as p,x as I,e as b,z as X,A as Y,n as Z}from"./index.2b31a27b.js";import{g as ee}from"./roleKnowledge.bc6cf1cc.js";const te=f=>(X("data-v-bf46b926"),f=f(),Y(),f),ae={style:{"padding-bottom":"30px"}},le=te(()=>b("div",{class:"role-icon",style:{"font-size":"20px"}},[b("i",{class:"fa-solid fa-file-pdf"})],-1)),oe={style:{"font-size":"13px",color:"rgb(59, 89, 152)"}},ne={style:{"font-size":"15px","font-weight":"500",color:"#3b5998"}},se={__name:"datasetSearch",setup(f,{expose:z}){const{proxy:v}=Z(),y=r(""),C=r([]),_=r(!1),T=r(!0),h=r(0),D=r([]),m=r([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u6570\u636E\u96C6\u540D\u79F0",visible:!0},{key:2,label:"\u6240\u6709\u8005",visible:!0},{key:3,label:"\u63CF\u8FF0\u4FE1\u606F",visible:!0},{key:4,label:"\u72B6\u6001",visible:!0},{key:5,label:"\u8BBF\u95EE\u6743\u9650",visible:!0},{key:6,label:"\u6570\u636E\u603B\u91CF",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),V=J({form:{},queryParams:{pageNum:1,pageSize:10,DatasetName:void 0,searchText:void 0,topK:10,status:void 0,deptId:void 0},rules:{applicationId:[{required:!0,message:"\u5E94\u7528\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u5E94\u7528\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],searchText:[{required:!0,message:"\u663E\u793A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:a,form:ie,rules:K}=M(V);function w(){_.value=!0,console.log("currentDatasetId = "+y.value),a.value.datesetId=y.value,ee(v.addDateRange(a.value,D.value)).then(l=>{_.value=!1,C.value=l.data,h.value=l.total}).catch(()=>{_.value=!1})}function k(){console.log(a),v.$refs.queryRef.validate(l=>{console.log("---> "+l),l&&w()})}function P(){D.value=[],v.resetForm("queryRef"),_.value=!1,a.value.name=void 0,a.value.ownerId=void 0,v.$refs.deptTreeRef.setCurrentKey(null),k()}function U(l){y.value=l.knowledgeId,w()}return z({initRoleData:U}),(l,d)=>{const B=n("el-input"),R=n("el-form-item"),x=n("el-button"),Q=n("el-form"),c=n("el-table-column"),$=n("el-tooltip"),E=n("el-table"),L=n("pagination"),j=n("el-col"),A=n("el-row"),F=q("hasPermi"),H=q("loading");return s(),O("div",ae,[o(A,{gutter:20},{default:t(()=>[o(j,{span:24},{default:t(()=>[g(o(Q,{model:i(a),ref:"queryRef",rule:i(K),inline:!0,"label-width":"100px"},{default:t(()=>[o(R,{label:"\u641C\u7D22\u6761\u4EF6",prop:"searchText"},{default:t(()=>[o(B,{modelValue:i(a).searchText,"onUpdate:modelValue":d[0]||(d[0]=e=>i(a).searchText=e),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u6761\u4EF6",clearable:"",style:{width:"540px"},onKeyup:W(k,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(R,null,{default:t(()=>[o(x,{type:"primary",icon:"Search",onClick:k},{default:t(()=>[S("\u641C\u7D22")]),_:1}),o(x,{icon:"Refresh",onClick:P},{default:t(()=>[S("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model","rule"]),[[N,T.value]]),g((s(),u(E,{data:C.value,onSelectionChange:l.handleSelectionChange},{default:t(()=>[o(c,{type:"index",width:"50",align:"center"}),m.value[0].visible?(s(),u(c,{key:0,label:"\u7C7B\u578B",align:"center",width:"50px",prop:"icon"},{default:t(e=>[le]),_:1})):p("",!0),m.value[0].visible?(s(),u(c,{key:1,label:"\u6587\u6863\u540D\u79F0",align:"left",width:"250px",prop:"icon"},{default:t(e=>[S(I(e.row.document_title),1)]),_:1})):p("",!0),m.value[1].visible?(s(),u(c,{label:"\u67E5\u8BE2\u7ED3\u679C",align:"left",key:"name",prop:"name"},{default:t(e=>[b("div",oe,I(l.truncateString(e.row.document_content,300)),1)]),_:1})):p("",!0),m.value[1].visible?(s(),u(c,{label:"\u8BC4\u5206",width:"100px",align:"center",key:"name",prop:"name","show-overflow-tooltip":!0},{default:t(e=>[b("div",ne,I(e.row.score),1)]),_:1})):p("",!0),m.value[8].visible?(s(),u(c,{key:4,label:"\u64CD\u4F5C",align:"center",width:"100","class-name":"small-padding fixed-width"},{default:t(e=>[e.row.applicationId!==1?(s(),u($,{key:0,content:"\u67E5\u770B",placement:"top"},{default:t(()=>[g(o(x,{link:"",type:"primary",icon:"Edit",onClick:re=>l.handleUpdate(e.row)},null,8,["onClick"]),[[F,["system:Dataset:edit"]]])]),_:2},1024)):p("",!0)]),_:1})):p("",!0)]),_:1},8,["data","onSelectionChange"])),[[H,_.value]]),g(o(L,{total:h.value,page:i(a).pageNum,"onUpdate:page":d[1]||(d[1]=e=>i(a).pageNum=e),limit:i(a).pageSize,"onUpdate:limit":d[2]||(d[2]=e=>i(a).pageSize=e),onPagination:w},null,8,["total","page","limit"]),[[N,h.value>0]])]),_:1})]),_:1})])}}},ce=G(se,[["__scopeId","data-v-bf46b926"]]);export{ce as default};
