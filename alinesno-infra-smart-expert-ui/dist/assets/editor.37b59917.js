import{c as A}from"./role.f35abc69.js";import{_ as F,r as h,N as J,a as n,o as p,l as S,d as e,w as t,F as q,C as E,c as g,j as C,z as L,A as M,e as P,n as D}from"./index.2b31a27b.js";const k=c=>(L("data-v-e8a4aec0"),c=c(),M(),c),G=k(()=>P("i",{class:"fa-solid fa-user-pen"},null,-1)),H=k(()=>P("i",{class:"fa-solid fa-file-pen"},null,-1)),K=k(()=>P("i",{class:"fa-solid fa-trash-can"},null,-1)),Q={__name:"editor",props:{currentPrompt:{type:Object,require:!0}},setup(c){const _=c,{proxy:I}=D(),l=h([{role:"system",content:""}]),a=h(0),d=h(l.value[0].content);function N(){const o={role:"system",content:""};l.value.push(o),s(l.value.length-1)}function B(o){l.value.splice(o,1),a.value>=l.value.length&&(a.value=Math.max(0,l.value.length-1)),s(a.value)}function s(o){a.value=o,d.value=l.value[o].content}function b(){l.value[a.value].content=d.value}function U(){b(),l.value=l.value.filter(o=>o.content!==""),console.log(JSON.stringify(l.value,null,2)),A(l.value,_.currentPrompt.id).then(o=>{I.$modal.msgSuccess("\u4FDD\u5B58\u6210\u529F")})}J(a,o=>{s(o)});function $(){_.currentPrompt&&_.currentPrompt.promptContent&&(l.value=JSON.parse(_.currentPrompt.promptContent),s(0))}return $(),(o,x)=>{const f=n("el-option"),z=n("el-select"),i=n("el-col"),r=n("el-button"),w=n("el-row"),O=n("el-list-item"),T=n("el-list"),V=n("el-scrollbar"),y=n("el-card"),j=n("el-input");return p(),S("div",null,[e(w,null,{default:t(()=>[e(i,{span:8},{default:t(()=>[e(y,{shadow:"never"},{default:t(()=>[e(V,{style:{height:"calc(100vh - 450px)"}},{default:t(()=>[(p(!0),S(q,null,E(l.value,(m,u)=>(p(),g(T,{key:u,size:"large"},{default:t(()=>[e(O,null,{default:t(()=>[e(w,{style:{"margin-bottom":"10px"}},{default:t(()=>[e(i,{span:14},{default:t(()=>[e(z,{modelValue:m.role,"onUpdate:modelValue":v=>m.role=v,placeholder:"Type",class:"ml-2"},{default:t(()=>[e(f,{label:"System",value:"system"}),e(f,{label:"User",value:"user"}),e(f,{label:"Assistant",value:"assistant"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{span:10,style:{"text-align":"right"}},{default:t(()=>[u==a.value?(p(),g(r,{key:0,type:"danger",text:"",bg:"",onClick:v=>s(u)},{default:t(()=>[G]),_:2},1032,["onClick"])):(p(),g(r,{key:1,type:"primary",text:"",bg:"",onClick:v=>s(u)},{default:t(()=>[H]),_:2},1032,["onClick"])),e(r,{type:"danger",text:"",bg:"",onClick:v=>B(u)},{default:t(()=>[K]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(i,{span:16},{default:t(()=>[e(y,{shadow:"never"},{default:t(()=>[e(V,null,{default:t(()=>[e(j,{type:"textarea",rows:23,placeholder:"\u5728\u8FD9\u91CC\u8F93\u5165\u4F60\u7684Prompt ...",resize:"none",modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=m=>d.value=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{shadow:"never",style:{"text-align":"right"}},{default:t(()=>[e(r,{onClick:N,icon:"Plus"},{default:t(()=>[C("\u6DFB\u52A0Prompt")]),_:1}),e(r,{type:"success",onClick:b},{default:t(()=>[C("\u4E34\u65F6\u4FDD\u5B58")]),_:1}),e(r,{type:"primary",onClick:U},{default:t(()=>[C("\u66F4\u65B0")]),_:1})]),_:1})])}}},X=F(Q,[["__scopeId","data-v-e8a4aec0"]]);export{X as default};
