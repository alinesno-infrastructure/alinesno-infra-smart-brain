import{_ as K,r as n,G as Q,a as s,H as W,o as g,l as X,d as t,f as r,e as c,w as a,I as Y,c as R,J as B,j as N,m as Z,z as ee,A as te,n as le}from"./index.2b31a27b.js";import{v as ae,u as oe,g as ne}from"./role.f35abc69.js";import w from"./ScriptEditor.b57c8723.js";import{M as se}from"./index.a61017be.js";import"./index.aea152d8.js";const S=v=>(ee("data-v-9ee94fde"),v=v(),te(),v),ce={class:"app-container"},re={class:"form-container"},ie={style:{"margin-top":"20px","margin-bottom":"20px",display:"flex",width:"100%",gap:"10px"}},ue={class:"flow-setting-footer",style:{margin:"0px",display:"flex"}},de=S(()=>c("i",{class:"fa-solid fa-truck-fast"},null,-1)),pe=S(()=>c("i",{class:"fa-solid fa-paper-plane"},null,-1)),_e={class:"output-result-box"},fe=S(()=>c("div",{class:"card-header"},[c("span",null,"\u6267\u884C\u7ED3\u679C")],-1)),ve=["innerHTML"],me={__name:"executeScriptPanel",setup(v,{expose:M}){const $=new se,C=Z(),{proxy:I}=le(),j=n("right"),i=n(!1),h=n(null),x=n(null),y=n(null),u=n("execute"),b=n(null),d=n({roleName:""}),p=n(null),m=n(""),V=()=>({execute:h.value.getRawScript(),audit:x.value.getRawScript(),functionCall:y.value.getRawScript()});function z(e){p.value=e}const P=()=>{let e=u.value;const l=V()[e],_=p.value;i.value=!0,ae({script:l,roleId:_,type:e,message:m.value}).then(o=>{console.log("res = "+o),i.value=!1,b.value=o.data.genContent,I.$modal.msgSuccess("\u9A8C\u8BC1\u6210\u529F")}).catch(o=>{console.log("err = "+o),i.value=!1})},H=()=>{let e=u.value;const l=V()[e],_=p.value;i.value=!0,oe({script:l,roleId:_,type:e,message:"save"}).then(o=>{console.log("res = "+o),i.value=!1,I.$modal.msgSuccess("\u66F4\u65B0\u6210\u529F")}).catch(o=>{console.log("err = "+o),i.value=!1})};function D(){C.push({path:"/expert/smart/assistant/role/index"})}function J(){p.value=C.currentRoute.value.query.roleId,ne(p.value).then(e=>{d.value=e.data,h.value.setRawScript(d.value.executeScript),x.value.setRawScript(d.value.auditScript),y.value.setRawScript(d.value.functionCallbackScript)})}function L(e,l){console.log("tab = "+JSON.stringify(e)),u.value=e.props.name,console.log("type = "+u.value)}return Q(()=>{J()}),M({setCurrentRoleId:z}),(e,l)=>{const _=s("el-page-header"),o=s("el-input"),T=s("el-button"),k=s("el-tab-pane"),U=s("el-tabs"),E=s("el-col"),q=s("el-skeleton"),A=s("el-scrollbar"),F=s("el-card"),G=s("el-row"),O=W("loading");return g(),X("div",ce,[t(_,{onBack:D,content:"["+r(d).roleName+"]\u89D2\u8272\u811A\u672C\u914D\u7F6E"},null,8,["content"]),c("div",re,[t(G,null,{default:a(()=>[Y((g(),R(E,{span:12,"element-loading-text":"\u4EFB\u52A1\u6B63\u5728\u751F\u6210\u4E2D\uFF0C\u8BF7\u52FF\u5237\u65B0 ...","element-loading-spinner":e.svg},{default:a(()=>[c("div",ie,[t(o,{modelValue:r(m),"onUpdate:modelValue":l[0]||(l[0]=f=>B(m)?m.value=f:null),size:"large",style:{height:"40px",width:"100%"},placeholder:"\u8F93\u5165\u9700\u6C42\u63CF\u8FF0\u4FE1\u606F."},null,8,["modelValue"]),c("div",ue,[t(T,{type:"primary",text:"",bg:"",onClick:l[1]||(l[1]=f=>P()),size:"large"},{default:a(()=>[de,N("\xA0\u9A8C\u8BC1\u4EFB\u52A1 ")]),_:1}),t(T,{type:"danger",bg:"",text:"",onClick:l[2]||(l[2]=f=>H()),size:"large"},{default:a(()=>[pe,N("\xA0\u63D0\u4EA4\u4FDD\u5B58 ")]),_:1})])]),t(U,{"tab-position":r(j),modelValue:r(u),"onUpdate:modelValue":l[3]||(l[3]=f=>B(u)?u.value=f:null),onTabClick:L,class:"demo-tabs"},{default:a(()=>[t(k,{name:"execute",label:"\u6267\u884C\u811A\u672C"},{default:a(()=>[t(w,{ref_key:"executeEditorRef",ref:h,lang:"java"},null,512)]),_:1}),t(k,{name:"audit",label:"\u610F\u89C1\u5BA1\u6838"},{default:a(()=>[t(w,{ref_key:"auditEditorRef",ref:x,lang:"java"},null,512)]),_:1}),t(k,{name:"functionCall",label:"\u65B9\u6CD5\u56DE\u8C03"},{default:a(()=>[t(w,{ref_key:"functionCallEditorRef",ref:y,lang:"java"},null,512)]),_:1})]),_:1},8,["tab-position","modelValue"])]),_:1},8,["element-loading-spinner"])),[[O,r(i)]]),t(E,{span:12},{default:a(()=>[c("div",_e,[t(F,{shadow:"never",style:{height:"calc(100vh - 220px)",padding:"0px !important"}},{header:a(()=>[fe]),default:a(()=>[r(b)?(g(),R(A,{key:1,style:{height:"calc(-320px + 100vh)",padding:"20px"}},{default:a(()=>[c("div",{innerHTML:r($).render(r(b))},null,8,ve)]),_:1})):(g(),R(q,{key:0,rows:10}))]),_:1})])]),_:1})]),_:1})])])}}},ke=K(me,[["__scopeId","data-v-9ee94fde"]]);export{ke as default};
