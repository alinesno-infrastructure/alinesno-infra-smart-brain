import{B as ue,m as re,r as i,Q as pe,R as ce,a as s,H as L,o as r,l as A,d as e,w as l,I as x,f as a,h as H,j as w,U as J,J as O,c as m,e as b,i as g,x as I,F as me,C as fe,n as _e}from"./index.2b31a27b.js";import{l as ge,d as be,g as ve,u as he,b as ye}from"./catalog.898c48c0.js";const we={class:"app-container"},Ce={class:"role-icon"},ke=["src"],Ve={style:{"font-size":"15px","font-weight":"500",color:"#3b5998"}},xe={style:{"font-size":"13px",color:"#a5a5a5"}},Se=b("div",{style:{"font-size":"13px",color:"#a5a5a5"}}," \u4F1A\u8BDD\u6B21\u6570: 12734 \u6709\u6548\u6C9F\u901A:198312 ",-1),Re={class:"dialog-footer"},Ie=ue({name:"Catalog"}),qe=Object.assign(Ie,{setup(Ue){re();const{proxy:p}=_e();i([]);const z=i([]),f=i(!1),U=i(!0),S=i(!0),N=i([]),K=i(!0),P=i(!0),$=i(0),q=i(""),T=i([]);i([]),i([]);const v=i([{key:0,label:"\u7C7B\u578B\u540D\u79F0",visible:!0},{key:1,label:"\u7C7B\u578B\u63CF\u8FF0",visible:!0},{key:2,label:"\u8868\u6570\u636E\u91CF",visible:!0},{key:3,label:"\u7C7B\u578B",visible:!0},{key:4,label:"\u7C7B\u578B\u5730\u5740",visible:!0},{key:5,label:"\u72B6\u6001",visible:!0},{key:6,label:"\u66F4\u65B0\u65F6\u95F4",visible:!0}]),G=pe({form:{},queryParams:{pageNum:1,pageSize:10,name:void 0,description:void 0},rules:{name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u8FDE\u63A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],promptCount:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:d,form:u,rules:M}=ce(G);function h(){U.value=!0,ge(p.addDateRange(d.value,T.value)).then(o=>{U.value=!1,z.value=o.rows,$.value=o.total})}function R(){d.value.pageNum=1,h()}function W(){T.value=[],p.resetForm("queryRef"),d.value.deptId=void 0,p.$refs.deptTreeRef.setCurrentKey(null),R()}function B(o){const n=o.id||N.value;p.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u7C7B\u578B\u7F16\u53F7\u4E3A"'+n+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return be(n)}).then(()=>{h(),p.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function X(o){N.value=o.map(n=>n.id),K.value=o.length!=1,P.value=!o.length}function D(){u.value={id:void 0,deptId:void 0,CatalogName:void 0,promptCount:void 0,password:void 0,phonenumber:void 0,status:"0",remark:void 0},p.resetForm("databaseRef")}function Y(){f.value=!1,D()}function Z(){D(),f.value=!0,q.value="\u6DFB\u52A0\u7C7B\u578B"}function F(o){D();const n=o.id||N.value;ve(n).then(C=>{u.value=C.data,f.value=!0,q.value="\u4FEE\u6539\u7C7B\u578B"})}function ee(){p.$refs.databaseRef.validate(o=>{o&&(u.value.CatalogId!=null?he(u.value).then(n=>{p.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),f.value=!1,h()}):ye(u.value).then(n=>{p.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),f.value=!1,h()}))})}return h(),(o,n)=>{const C=s("el-input"),k=s("el-form-item"),c=s("el-button"),Q=s("el-form"),y=s("el-col"),le=s("right-toolbar"),V=s("el-row"),_=s("el-table-column"),j=s("el-tooltip"),te=s("el-table"),ae=s("pagination"),ne=s("el-option"),oe=s("el-select"),ie=s("el-dialog"),E=L("hasPermi"),se=L("loading");return r(),A("div",we,[e(V,{gutter:20},{default:l(()=>[e(y,{span:24,xs:24},{default:l(()=>[x(e(Q,{model:a(d),ref:"queryRef",inline:!0,"label-width":"100px"},{default:l(()=>[e(k,{label:"\u7C7B\u578B\u540D\u79F0",prop:"name"},{default:l(()=>[e(C,{modelValue:a(d).name,"onUpdate:modelValue":n[0]||(n[0]=t=>a(d).name=t),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:H(R,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,{label:"\u7C7B\u578B\u540D\u79F0",prop:"name"},{default:l(()=>[e(C,{modelValue:a(d)["condition[name|like]"],"onUpdate:modelValue":n[1]||(n[1]=t=>a(d)["condition[name|like]"]=t),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:H(R,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,null,{default:l(()=>[e(c,{type:"primary",icon:"Search",onClick:R},{default:l(()=>[w("\u641C\u7D22")]),_:1}),e(c,{icon:"Refresh",onClick:W},{default:l(()=>[w("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[J,a(S)]]),e(V,{gutter:10,class:"mb8"},{default:l(()=>[e(y,{span:1.5},{default:l(()=>[e(c,{type:"primary",plain:"",icon:"Plus",onClick:Z},{default:l(()=>[w("\u65B0\u589E")]),_:1})]),_:1},8,["span"]),e(y,{span:1.5},{default:l(()=>[e(c,{type:"success",plain:"",icon:"Edit",disabled:a(K),onClick:F},{default:l(()=>[w("\u4FEE\u6539")]),_:1},8,["disabled"])]),_:1},8,["span"]),e(y,{span:1.5},{default:l(()=>[e(c,{type:"danger",plain:"",icon:"Delete",disabled:a(P),onClick:B},{default:l(()=>[w("\u5220\u9664")]),_:1},8,["disabled"])]),_:1},8,["span"]),e(le,{showSearch:a(S),"onUpdate:showSearch":n[2]||(n[2]=t=>O(S)?S.value=t:null),onQueryTable:h,columns:a(v)},null,8,["showSearch","columns"])]),_:1}),x((r(),m(te,{data:a(z),onSelectionChange:X},{default:l(()=>[e(_,{type:"selection",width:"50",align:"center"}),a(v)[0].visible?(r(),m(_,{key:0,label:"\u56FE\u6807",align:"center",width:"80px",prop:"icon"},{default:l(t=>[b("div",Ce,[b("img",{src:"http://data.linesno.com/icons/dataset/dataset_"+(t.$index+8)+".png",style:{width:"45px",height:"45px","border-radius":"50%"}},null,8,ke)])]),_:1})):g("",!0),a(v)[0].visible?(r(),m(_,{label:"\u7C7B\u578B\u540D\u79F0",align:"left",width:"200",key:"name",prop:"name"},{default:l(t=>[b("div",Ve,I(t.row.name),1),b("div",xe,I(t.row.name),1)]),_:1})):g("",!0),a(v)[1].visible?(r(),m(_,{label:"\u7C7B\u578B\u63CF\u8FF0",align:"left",key:"description",prop:"description","show-overflow-tooltip":!0},{default:l(t=>[b("div",null,I(t.row.description),1),Se]),_:1})):g("",!0),a(v)[2].visible?(r(),m(_,{label:"\u751F\u6210\u5F0F\u6570\u91CF",align:"center",width:"150",key:"promptCount",prop:"promptCount","show-overflow-tooltip":!0})):g("",!0),a(v)[5].visible?(r(),m(_,{label:"\u72B6\u6001",align:"center",width:"100",key:"hasStatus"})):g("",!0),a(v)[6].visible?(r(),m(_,{key:5,label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:l(t=>[b("span",null,I(o.parseTime(t.row.addTime)),1)]),_:1})):g("",!0),e(_,{label:"\u64CD\u4F5C",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:l(t=>[t.row.CatalogId!==1?(r(),m(j,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:l(()=>[x(e(c,{link:"",type:"primary",icon:"Edit",onClick:de=>F(t.row)},null,8,["onClick"]),[[E,["system:Catalog:edit"]]])]),_:2},1024)):g("",!0),t.row.CatalogId!==1?(r(),m(j,{key:1,content:"\u5220\u9664",placement:"top"},{default:l(()=>[x(e(c,{link:"",type:"primary",icon:"Delete",onClick:de=>B(t.row)},null,8,["onClick"]),[[E,["system:Catalog:remove"]]])]),_:2},1024)):g("",!0)]),_:1})]),_:1},8,["data"])),[[se,a(U)]]),x(e(ae,{total:a($),page:a(d).pageNum,"onUpdate:page":n[3]||(n[3]=t=>a(d).pageNum=t),limit:a(d).pageSize,"onUpdate:limit":n[4]||(n[4]=t=>a(d).pageSize=t),onPagination:h},null,8,["total","page","limit"]),[[J,a($)>0]])]),_:1})]),_:1}),e(ie,{title:a(q),modelValue:a(f),"onUpdate:modelValue":n[8]||(n[8]=t=>O(f)?f.value=t:null),width:"700px","append-to-body":""},{footer:l(()=>[b("div",Re,[e(c,{type:"primary",onClick:ee},{default:l(()=>[w("\u786E \u5B9A")]),_:1}),e(c,{onClick:Y},{default:l(()=>[w("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(Q,{model:a(u),rules:a(M),ref:"databaseRef","label-width":"100px"},{default:l(()=>[e(V,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(k,{label:"\u7236\u7C7B",prop:"name"},{default:l(()=>[e(oe,{clearable:"",modelValue:a(u).parentId,"onUpdate:modelValue":n[5]||(n[5]=t=>a(u).parentId=t),style:{width:"100%"},placeholder:"\u53EF\u591A\u9009","multiple-limit":10},{default:l(()=>[(r(),A(me,null,fe(10,t=>e(ne,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(k,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(C,{modelValue:a(u).name,"onUpdate:modelValue":n[6]||(n[6]=t=>a(u).name=t),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(k,{label:"\u63CF\u8FF0",prop:"description"},{default:l(()=>[e(C,{modelValue:a(u).description,"onUpdate:modelValue":n[7]||(n[7]=t=>a(u).description=t),placeholder:"\u8BF7\u8F93\u5165jdbcUrl\u8FDE\u63A5\u5730\u5740",maxlength:"128"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{qe as default};
