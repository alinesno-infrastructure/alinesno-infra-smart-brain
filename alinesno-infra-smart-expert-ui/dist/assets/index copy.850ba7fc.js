import{l as k}from"./lodash.d9cddd10.js";import{_ as L,r as S,a as f,o as d,l as h,e as o,D as M,x as N,F as V,C,j as O,i as P,c as $,w as a,d as l,G as A,z as R,A as z}from"./index.2b31a27b.js";const x=m=>(R("data-v-06b4c6ad"),m=m(),z(),m),T={class:"workflow-node-container"},G={class:"node-title"},H={class:"node-icon"},q={class:"node-name"},J={class:"node-settings"},K={class:"settings-title"},Q=["onClick"],W=x(()=>o("i",{class:"fa-solid fa-trash"},null,-1)),X=[W],Y=["onClick"],Z=x(()=>o("i",{class:"fa-solid fa-file-pdf"},null,-1)),ee=[Z],oe={class:"condition-node-add"},te=x(()=>o("div",{class:"settings-title"},"ELSE",-1)),ne=[te],le={class:"condition-branch-add"},se=x(()=>o("div",{class:"node-output"},[o("div",{class:"output-title"},"\u8F93\u51FA\u53C2\u6570"),o("div",{class:"output-content"}," \u5206\u652F\u540D\u79F0 {branch_name} ")],-1)),ie={__name:"index copy",props:{properties:{type:Object,default:()=>({})},isSelected:{type:Boolean,default:!1},nodeModel:{type:Object}},setup(m){const n=m,E=[{value:"Option1",label:"Option1"},{value:"Option2",label:"Option2"},{value:"Option3",label:"Option3"},{value:"Option4",label:"Option4"},{value:"Option5",label:"Option5"}],p=S([{conditions:[{variable:"",condition:"",value:""}]}]);n.properties.branch_condition_list||(n.properties.branch_condition_list=[{id:"condition_0",height:100}]);const g=S([]),U=e=>{p.value[e].conditions.push({variable:"",condition:"",value:""})};function F(){if(!n.nodeModel){console.error("Node model is not available.");return}p.value.push({conditions:[{variable:"",condition:"",value:""}]}),A(()=>{const e=k.exports.cloneDeep(n.nodeModel.properties.branch_condition_list),_=g.value[g.value.length-1],s=_?_.offsetHeight:120,v={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(e.length-1),height:s,id:"12312312"+e.length,condition:"and"};e.splice(e.length-1,0,v);try{j(e,!0,n.nodeModel),k.exports.set(n.nodeModel.properties,"branch_condition_list",e)}catch(c){console.error("Error in addBranch:",c)}})}function j(e,_,s){const v=k.exports.cloneDeep(s.properties.branch_condition_list?s.properties.branch_condition_list:[]),c=e.map((i,y)=>{const b=v.find(B=>B.id===i.id);if(b)return{index:y,height:b.height,id:i.id};if(_)return{index:y,height:12,id:i.id}}).filter(i=>i);try{k.exports.set(s.properties,"branch_condition_list",c),s.refreshBranch()}catch(i){console.error("Error in refreshBranchAnchor:",i)}}const D=(e,_)=>{p.value[e].conditions.length>1&&p.value[e].conditions.splice(_,1)},I=e=>{p.value.length>1&&(p.value.splice(e,1),n.properties.branch_condition_list.splice(e,1),n.nodeModel&&n.nodeModel.refreshBranch())};return(e,_)=>{const s=f("el-option"),v=f("el-select"),c=f("el-col"),i=f("el-input"),y=f("el-row"),b=f("el-button");return d(),h("div",T,[o("div",G,[o("div",H,[o("i",{class:M(n.properties.icon)},null,2)]),o("div",q,N(n.properties.stepName),1)]),o("div",J,[o("div",null,[(d(!0),h(V,null,C(p.value,(B,u)=>(d(),h("div",{key:u,ref_for:!0,ref_key:"conditionPanelsRef",ref:g,class:"settings-form condition-panel"},[o("div",K,[O(N(u===0?"IF":`ELSE IF ${u}`)+" ",1),u>0?(d(),h("span",{key:0,class:"branch-remove-icon",onClick:r=>I(u)},X,8,Q)):P("",!0)]),(d(!0),h(V,null,C(B.conditions,(r,w)=>(d(),$(y,{key:w,style:{"margin-bottom":"5px"}},{default:a(()=>[l(c,{span:10},{default:a(()=>[l(v,{modelValue:r.variable,"onUpdate:modelValue":t=>r.variable=t,placeholder:"\u8BF7\u9009\u62E9\u53D8\u91CF",style:{"margin-right":"8px"}},{default:a(()=>[(d(),h(V,null,C(E,t=>l(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(c,{span:6},{default:a(()=>[l(v,{modelValue:r.condition,"onUpdate:modelValue":t=>r.condition=t,placeholder:"\u8BF7\u9009\u62E9\u6761\u4EF6",style:{"margin-right":"8px"}},{default:a(()=>[(d(),h(V,null,C(E,t=>l(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(c,{span:7},{default:a(()=>[l(i,{modelValue:r.value,"onUpdate:modelValue":t=>r.value=t,placeholder:"\u8BF7\u8F93\u5165\u503C"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(c,{span:1},{default:a(()=>[o("div",{class:"condition-node-remove-icon",onClick:t=>D(u,w)},ee,8,Y)]),_:2},1024)]),_:2},1024))),128)),o("div",oe,[l(b,{type:"primary",text:"",bg:"",onClick:r=>U(u)},{default:a(()=>[O(" + \u6DFB\u52A0\u6761\u4EF6 ")]),_:2},1032,["onClick"])])],512))),128)),o("div",{ref_key:"conditionPanelsRef",ref:g,class:"settings-form condition-panel"},ne,512)]),o("div",le,[l(b,{type:"primary",text:"",bg:"",onClick:F},{default:a(()=>[O(" + \u6DFB\u52A0\u5206\u652F ")]),_:1})])]),se])}}},re=L(ie,[["__scopeId","data-v-06b4c6ad"]]);export{re as default};
