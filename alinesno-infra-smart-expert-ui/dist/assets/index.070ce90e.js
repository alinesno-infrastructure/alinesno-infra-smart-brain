import{E as C,K as le,_ as Se,m as Ve,r as u,Q as X,T as xe,R as Ue,v as Ne,a as s,H as B,o as p,l as Ce,d as t,w as e,I as S,f as o,h as Y,j as c,U as Z,c as f,J as ee,i as V,e as g,x as te,z as Te,A as De,n as Ie}from"./index.2b31a27b.js";var v="/api/infra/smart/assistant/secret/",T={datatables:v+"datatables",createUrl:v+"add",saveUrl:v+"save",updateUrl:v+"modify",statusUrl:v+"changeStatus",cleanUrl:v+"clean",detailUrl:v+"detail",removeUrl:v+"delete",exportUrl:v+"exportExcel",changeField:v+"changeField",downloadFile:v+"downloadFile"};function Fe(i){return C({url:T.datatables,method:"post",params:i})}function Re(i){return C({url:T.detailUrl+"/"+le(i),method:"get"})}function $e(i){return C({url:T.saveUrl,method:"post",data:i})}function qe(i){return C({url:T.updateUrl,method:"put",data:i})}function Ke(i){return C({url:T.removeUrl+"/"+le(i),method:"delete"})}function Pe(i){return C({url:T.changeField,method:"post",data:i})}const Q=i=>(Te("data-v-85e9da2b"),i=i(),De(),i),ze={class:"app-container"},Ee=Q(()=>g("i",{class:"fa-solid fa-code"},null,-1)),Be={class:"dialog-footer"},Qe=Q(()=>g("div",{class:"el-upload__text"},[c("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),g("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1)),Ae={class:"el-upload__tip text-center"},je={class:"el-upload__tip"},Le=Q(()=>g("span",null,"\u4EC5\u5141\u8BB8\u5BFC\u5165xls\u3001xlsx\u683C\u5F0F\u6587\u4EF6\u3002",-1)),He={class:"dialog-footer"},Je={__name:"index",setup(i){Ve();const{proxy:y}=Ie(),A=u([]),w=u(!1),q=u(!0),I=u(!0),K=u([]),j=u(!0),L=u(!0),P=u(0),z=u(""),H=u([]);u([]);const ae=u([{key:"utility-tools",secretName:"\u5B9E\u7528\u5BC6\u94A5"},{key:"web-search",secretName:"\u7F51\u9875\u641C\u7D22"},{key:"project-management",secretName:"\u9879\u76EE\u7BA1\u7406"}]),h=X({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+xe()},url:"/prod-api/v1/api/infra/base/im/chat/importData",display:"/prod-api/v1/api/infra/base/im/chat/displayImage/"}),x=u([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u5BC6\u94A5\u540D\u79F0",visible:!0},{key:2,label:"\u5BC6\u94A5\u7C7B\u578B",visible:!0},{key:3,label:"\u4F7F\u7528\u573A\u666F",visible:!0},{key:4,label:"\u72B6\u6001",visible:!0},{key:5,label:"\u5BC6\u94A5\u63CF\u8FF0",visible:!0},{key:6,label:"\u5E94\u7528\u76EE\u6807",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),oe=X({form:{},queryParams:{pageNum:1,pageSize:10,SecretName:void 0,secretName:void 0,toolType:void 0,status:void 0,deptId:void 0},rules:{secretName:[{required:!0,message:"\u4F7F\u7528\u573A\u666F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],secretValue:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],secretDesc:[{required:!0,message:"\u5BC6\u94A5\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:r,form:d,rules:ne}=Ue(oe);function k(){q.value=!0,Fe(y.addDateRange(r.value,H.value)).then(n=>{q.value=!1,A.value=n.rows,P.value=n.total})}Ne(()=>n=>{const l=ae.value.find(_=>_.key===n);return l?l.secretName:"\u672A\u77E5\u7C7B\u578B"});function F(){console.log(r),r.value.pageNum=1,k()}function se(){H.value=[],y.resetForm("queryRef"),r.value.secretName=void 0,r.value.toolType=void 0,y.$refs.deptTreeRef.setCurrentKey(null),F()}function J(n){const l=n.id||K.value;y.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+l+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Ke(l)}).then(()=>{k(),y.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}const ie=async(n,l,_)=>{const b=await Pe({field:n,value:l?1:0,id:_}).catch(()=>{});b&&b.code==200&&k()};function re(n){K.value=n.map(l=>l.id),j.value=n.length!=1,L.value=!n.length}function E(){d.value={applicationId:void 0,secretName:void 0,toolType:void 0,screen:void 0,hasStatus:void 0,secretDesc:void 0,target:void 0},y.resetForm("SecretRef")}function de(){w.value=!1,E()}function ue(){E(),w.value=!0,z.value="\u6DFB\u52A0\u5E94\u7528"}function G(n){E();const l=n.id||K.value;Re(l).then(_=>{d.value=_.data,d.value.applicationId=l,w.value=!0,z.value="\u4FEE\u6539\u5E94\u7528"})}function pe(){y.$refs.SecretRef.validate(n=>{n&&(d.value.applicationId!=null?qe(d.value).then(l=>{y.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),w.value=!1,k()}):$e(d.value).then(l=>{y.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),w.value=!1,k()}))})}return k(),(n,l)=>{const _=s("el-input"),b=s("el-form-item"),m=s("el-button"),M=s("el-form"),U=s("el-col"),ce=s("right-toolbar"),D=s("el-row"),N=s("el-table-column"),me=s("el-switch"),O=s("el-tooltip"),fe=s("el-table"),_e=s("pagination"),W=s("el-dialog"),ve=s("upload-filled"),he=s("el-icon"),ge=s("el-checkbox"),ye=s("el-link"),be=s("el-upload"),R=B("hasPermi"),we=B("copyText"),ke=B("loading");return p(),Ce("div",ze,[t(D,{gutter:20},{default:e(()=>[t(U,{span:24,xs:24},{default:e(()=>[S(t(M,{model:o(r),ref:"queryRef",inline:!0,"label-width":"68px"},{default:e(()=>[t(b,{label:"\u5BC6\u94A5\u540D\u79F0",prop:"secretName"},{default:e(()=>[t(_,{modelValue:o(r)["condition[secretName|like]"],"onUpdate:modelValue":l[0]||(l[0]=a=>o(r)["condition[secretName|like]"]=a),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u94A5\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:Y(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{label:"\u5BC6\u94A5\u7C7B\u578B",prop:"toolType","label-width":"100px"},{default:e(()=>[t(_,{modelValue:o(r)["condition[toolType|like]"],"onUpdate:modelValue":l[1]||(l[1]=a=>o(r)["condition[toolType|like]"]=a),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u94A5\u7C7B\u578B",clearable:"",style:{width:"240px"},onKeyup:Y(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,null,{default:e(()=>[t(m,{type:"primary",icon:"Search",onClick:F},{default:e(()=>[c("\u641C\u7D22")]),_:1}),t(m,{icon:"Refresh",onClick:se},{default:e(()=>[c("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[Z,o(I)]]),t(D,{gutter:10,class:"mb8"},{default:e(()=>[t(U,{span:1.5},{default:e(()=>[t(m,{type:"primary",plain:"",icon:"Plus",onClick:ue},{default:e(()=>[c("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),t(U,{span:1.5},{default:e(()=>[S((p(),f(m,{type:"success",plain:"",icon:"Edit",disabled:o(j),onClick:G},{default:e(()=>[c("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[R,["system:Secret:edit"]]])]),_:1},8,["span"]),t(U,{span:1.5},{default:e(()=>[S((p(),f(m,{type:"danger",plain:"",icon:"Delete",disabled:o(L),onClick:J},{default:e(()=>[c("\u5220\u9664 ")]),_:1},8,["disabled"])),[[R,["system:Secret:remove"]]])]),_:1},8,["span"]),t(ce,{showSearch:o(I),"onUpdate:showSearch":l[2]||(l[2]=a=>ee(I)?I.value=a:null),onQueryTable:k,columns:o(x)},null,8,["showSearch","columns"])]),_:1}),S((p(),f(fe,{data:o(A),onSelectionChange:re},{default:e(()=>[t(N,{type:"selection",width:"50",align:"center"}),o(x)[1].visible?(p(),f(N,{label:"\u5BC6\u94A5\u63CF\u8FF0",align:"left",key:"secretDesc",width:"250",prop:"secretDesc","show-overflow-tooltip":!0})):V("",!0),o(x)[5].visible?(p(),f(N,{label:"\u5BC6\u94A5\u540D\u79F0",align:"left",key:"secretName",prop:"secretName","show-overflow-tooltip":!0},{default:e(a=>[g("div",null,te(a.row.secretName),1)]),_:1})):V("",!0),o(x)[6].visible?(p(),f(N,{label:"\u811A\u672C",align:"center",width:"120",key:"target",prop:"target","show-overflow-tooltip":!0},{default:e(a=>[S((p(),f(m,{type:"primary",text:""},{default:e(()=>[Ee,c("\u590D\u5236\u503C ")]),_:2},1024)),[[we,a.row.secretValue]])]),_:1})):V("",!0),o(x)[1].visible?(p(),f(N,{label:"\u72B6\u6001",align:"center",width:"100",key:"hasStatus",prop:"hasStatus","show-overflow-tooltip":!0},{default:e(a=>[t(me,{modelValue:a.row.hasStatus,"onUpdate:modelValue":$=>a.row.hasStatus=$,"active-value":0,"inactive-value":1,onChange:$=>ie("hasStatus",a.row.hasStatus,a.row.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):V("",!0),o(x)[7].visible?(p(),f(N,{key:4,label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:e(a=>[g("span",null,te(n.parseTime(a.row.addTime)),1)]),_:1})):V("",!0),o(x)[8].visible?(p(),f(N,{key:5,label:"\u64CD\u4F5C",align:"center",width:"100","class-secretName":"small-padding fixed-width"},{default:e(a=>[a.row.applicationId!==1?(p(),f(O,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:e(()=>[S(t(m,{link:"",type:"primary",icon:"Edit",onClick:$=>G(a.row)},null,8,["onClick"]),[[R,["system:Secret:edit"]]])]),_:2},1024)):V("",!0),a.row.applicationId!==1?(p(),f(O,{key:1,content:"\u5220\u9664",placement:"top"},{default:e(()=>[S(t(m,{link:"",type:"primary",icon:"Delete",onClick:$=>J(a.row)},null,8,["onClick"]),[[R,["system:Secret:remove"]]])]),_:2},1024)):V("",!0)]),_:1})):V("",!0)]),_:1},8,["data"])),[[ke,o(q)]]),S(t(_e,{total:o(P),page:o(r).pageNum,"onUpdate:page":l[3]||(l[3]=a=>o(r).pageNum=a),limit:o(r).pageSize,"onUpdate:limit":l[4]||(l[4]=a=>o(r).pageSize=a),onPagination:k},null,8,["total","page","limit"]),[[Z,o(P)>0]])]),_:1})]),_:1}),t(W,{title:o(z),modelValue:o(w),"onUpdate:modelValue":l[8]||(l[8]=a=>ee(w)?w.value=a:null),width:"900px","append-to-body":""},{footer:e(()=>[g("div",Be,[t(m,{type:"primary",onClick:pe},{default:e(()=>[c("\u786E \u5B9A")]),_:1}),t(m,{onClick:de},{default:e(()=>[c("\u53D6 \u6D88")]),_:1})])]),default:e(()=>[t(M,{model:o(d),rules:o(ne),ref:"SecretRef","label-width":"80px"},{default:e(()=>[t(D,null,{default:e(()=>[t(U,{span:24},{default:e(()=>[t(b,{label:"\u63CF\u8FF0",prop:"secretDesc"},{default:e(()=>[t(_,{modelValue:o(d).secretDesc,"onUpdate:modelValue":l[5]||(l[5]=a=>o(d).secretDesc=a),rows:3,placeholder:"\u5BC6\u94A5\u63CF\u8FF0\u4FE1\u606F",maxlength:"250"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(U,{span:24},{default:e(()=>[t(b,{label:"\u540D\u79F0",prop:"secretName"},{default:e(()=>[t(_,{modelValue:o(d).secretName,"onUpdate:modelValue":l[6]||(l[6]=a=>o(d).secretName=a),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u94A5\u540D\u79F0",maxlength:"512"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(U,{span:24},{default:e(()=>[t(b,{label:"\u5BC6\u94A5\u503C",prop:"secretValue"},{default:e(()=>[t(_,{modelValue:o(d).secretValue,"onUpdate:modelValue":l[7]||(l[7]=a=>o(d).secretValue=a),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u94A5\u503C",maxlength:"512"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(W,{title:h.title,modelValue:h.open,"onUpdate:modelValue":l[11]||(l[11]=a=>h.open=a),width:"400px","append-to-body":""},{footer:e(()=>[g("div",He,[t(m,{type:"primary",onClick:n.submitFileForm},{default:e(()=>[c("\u786E \u5B9A")]),_:1},8,["onClick"]),t(m,{onClick:l[10]||(l[10]=a=>h.open=!1)},{default:e(()=>[c("\u53D6 \u6D88")]),_:1})])]),default:e(()=>[t(be,{ref:"uploadRef",limit:1,accept:".xlsx, .xls",headers:h.headers,action:h.url+"?updateSupport="+h.updateSupport,disabled:h.isUploading,"on-progress":n.handleFileUploadProgress,"on-success":n.handleFileSuccess,"auto-upload":!1,drag:""},{tip:e(()=>[g("div",Ae,[g("div",je,[t(ge,{modelValue:h.updateSupport,"onUpdate:modelValue":l[9]||(l[9]=a=>h.updateSupport=a)},null,8,["modelValue"]),c(" \u662F\u5426\u66F4\u65B0\u5DF2\u7ECF\u5B58\u5728\u7684\u5E94\u7528\u6570\u636E ")]),Le,t(ye,{type:"primary",underline:!1,style:{"font-size":"12px","vertical-align":"baseline"},onClick:n.importTemplate},{default:e(()=>[c("\u4E0B\u8F7D\u6A21\u677F ")]),_:1},8,["onClick"])])]),default:e(()=>[t(he,{class:"el-icon--upload"},{default:e(()=>[t(ve)]),_:1}),Qe]),_:1},8,["headers","action","disabled","on-progress","on-success"])]),_:1},8,["title","modelValue"])])}}},Me=Se(Je,[["__scopeId","data-v-85e9da2b"]]);export{Me as default};
