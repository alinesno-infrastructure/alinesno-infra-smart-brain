import{_ as De,B as Ve,m as xe,r as o,Q as W,T as Ce,R as Se,a as s,H as B,o as d,l as P,d as a,w as t,e as b,f as l,J as K,I as v,h as X,j as p,U as Y,c,D as Z,x,i as y,F as ee,C as te,n as Ie}from"./index.2b31a27b.js";import{l as Ne,d as Pe,g as Re,e as Ue,u as Te,a as qe}from"./vectorDataset.02b10d35.js";const ze={class:"app-container"},$e={class:"head-container"},Be={class:"head-container"},Ke={style:{"font-size":"13px",color:"#a5a5a5",cursor:"pointer"}},Fe={class:"dataset-description"},Le={class:"dialog-footer"},Qe=Ve({name:"Dataset"}),Ee=Object.assign(Qe,{setup(Oe){xe();const{proxy:f}=Ie();o([{code:"direct_segmentation",name:"\u76F4\u63A5\u5206\u6BB5"},{code:"enhanced_processing",name:"\u589E\u5F3A\u5904\u7406"},{code:"qa_split",name:"\u95EE\u7B54\u62C6\u5206"}]);const F=o([]),g=o(!1),R=o(!0),S=o(!0),U=o([]),L=o(!0),Q=o(!0),T=o(0),q=o(""),E=o([]),z=o(""),O=o(void 0),ae=o([{label:"\u79C1\u4EBA",code:"private"},{label:"\u7EC4\u7EC7",code:"organization"}]),le=o([{id:1,icon:"fa-solid fa-charging-station"},{id:1,icon:"fa-solid fa-truck"},{id:2,icon:"fa-solid fa-paper-plane"},{id:2,icon:"fa-solid fa-ship"},{id:3,icon:"fa-solid fa-chart-column"},{id:4,icon:"fa-solid fa-server"},{id:5,icon:"fa-solid fa-box-open"},{id:8,icon:"fa-solid fa-file-invoice-dollar"},{id:9,icon:"fa-solid fa-user-tie"}]);o(void 0),o([]),o([]),W({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Ce()},url:"/prod-api/system/Dataset/importData"});const h=o([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u6570\u636E\u96C6\u540D\u79F0",visible:!0},{key:2,label:"\u6240\u6709\u8005",visible:!0},{key:3,label:"\u63CF\u8FF0\u4FE1\u606F",visible:!0},{key:4,label:"\u72B6\u6001",visible:!0},{key:5,label:"\u8BBF\u95EE\u6743\u9650",visible:!0},{key:6,label:"\u6570\u636E\u603B\u91CF",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),ne=W({form:{},queryParams:{pageNum:1,pageSize:10,isMemory:0,DatasetName:void 0,name:void 0,ownerId:void 0,status:void 0,deptId:void 0},rules:{applicationId:[{required:!0,message:"\u5E94\u7528\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u5E94\u7528\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],ownerId:[{required:!0,message:"\u663E\u793A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u63CF\u8FF0\u4FE1\u606F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],datasetStatus:[{required:!0,message:"\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessPermission:[{required:!0,message:"\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],datasetSize:[{required:!0,message:"\u5E94\u7528\u76EE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:u,form:r,rules:oe}=Se(ne);function w(){R.value=!0,Ne(f.addDateRange(u.value,E.value)).then(i=>{R.value=!1,F.value=i.rows,T.value=i.total})}function I(){console.log(u),u.value.pageNum=1,w()}function ie(){E.value=[],f.resetForm("queryRef"),u.value.name=void 0,u.value.ownerId=void 0,f.$refs.deptTreeRef.setCurrentKey(null),I()}function j(i){const n=i.id||U.value;f.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+n+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Pe(n)}).then(()=>{w(),f.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function se(i){U.value=i.map(n=>n.id),L.value=i.length!=1,Q.value=!i.length}function $(){r.value={applicationId:void 0,name:void 0,ownerId:void 0,description:void 0,datasetStatus:void 0,accessPermission:void 0,datasetSize:void 0},f.resetForm("DatasetRef")}function de(){g.value=!1,$()}function re(){$(),g.value=!0,q.value="\u6DFB\u52A0\u6570\u636E\u96C6"}function A(i){$();const n=i.id||U.value;Re(n).then(k=>{r.value=k.data,r.value.applicationId=n,g.value=!0,q.value="\u4FEE\u6539\u5E94\u7528"})}function ue(){Ue().then(i=>{O.value=i.data})}function ce(){f.$refs.DatasetRef.validate(i=>{i&&(r.value.applicationId!=null?Te(r.value).then(n=>{f.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),g.value=!1,w()}):qe(r.value).then(n=>{f.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),g.value=!1,w()}))})}return ue(),w(),(i,n)=>{const k=s("el-input"),pe=s("el-tree"),_=s("el-col"),D=s("el-form-item"),m=s("el-button"),M=s("el-form"),me=s("right-toolbar"),C=s("el-row"),V=s("el-table-column"),fe=s("router-link"),_e=s("CopyDocument"),ge=s("el-icon"),H=s("el-tooltip"),be=s("el-table"),ve=s("pagination"),J=s("el-radio"),G=s("el-radio-group"),ye=s("el-dialog"),N=B("hasPermi"),he=B("copyText"),we=B("loading");return d(),P("div",ze,[a(C,{gutter:20},{default:t(()=>[a(_,{span:4,xs:24},{default:t(()=>[b("div",$e,[a(k,{modelValue:l(z),"onUpdate:modelValue":n[0]||(n[0]=e=>K(z)?z.value=e:null),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B\u540D\u79F0",clearable:"","prefix-icon":"Search",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),b("div",Be,[a(pe,{data:l(O),props:{label:"label",children:"children"},"expand-on-click-node":!1,"filter-node-method":i.filterNode,ref:"deptTreeRef","node-key":"id","highlight-current":"",onNodeClick:i.handleNodeClick},null,8,["data","filter-node-method","onNodeClick"])])]),_:1}),a(_,{span:20,xs:24},{default:t(()=>[v(a(M,{model:l(u),ref:"queryRef",inline:!0,"label-width":"100px"},{default:t(()=>[a(D,{label:"\u6570\u636E\u96C6\u540D\u79F0",prop:"name"},{default:t(()=>[a(k,{modelValue:l(u)["condition[name|like]"],"onUpdate:modelValue":n[1]||(n[1]=e=>l(u)["condition[name|like]"]=e),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:X(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(D,{label:"\u6240\u6709\u8005",prop:"ownerId","label-width":"100px"},{default:t(()=>[a(k,{modelValue:l(u)["condition[ownerId|like]"],"onUpdate:modelValue":n[2]||(n[2]=e=>l(u)["condition[ownerId|like]"]=e),placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:X(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(D,null,{default:t(()=>[a(m,{type:"primary",icon:"Search",onClick:I},{default:t(()=>[p("\u641C\u7D22")]),_:1}),a(m,{icon:"Refresh",onClick:ie},{default:t(()=>[p("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[Y,l(S)]]),a(C,{gutter:10,class:"mb8"},{default:t(()=>[a(_,{span:1.5},{default:t(()=>[a(m,{type:"primary",plain:"",icon:"Plus",onClick:re},{default:t(()=>[p("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),a(_,{span:1.5},{default:t(()=>[v((d(),c(m,{type:"success",plain:"",icon:"Edit",disabled:l(L),onClick:A},{default:t(()=>[p("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[N,["system:Dataset:edit"]]])]),_:1},8,["span"]),a(_,{span:1.5},{default:t(()=>[v((d(),c(m,{type:"danger",plain:"",icon:"Delete",disabled:l(Q),onClick:j},{default:t(()=>[p("\u5220\u9664 ")]),_:1},8,["disabled"])),[[N,["system:Dataset:remove"]]])]),_:1},8,["span"]),a(me,{showSearch:l(S),"onUpdate:showSearch":n[3]||(n[3]=e=>K(S)?S.value=e:null),onQueryTable:w,columns:l(h)},null,8,["showSearch","columns"])]),_:1}),v((d(),c(be,{data:l(F),onSelectionChange:se},{default:t(()=>[a(V,{type:"selection",width:"50",align:"center"}),l(h)[1].visible?(d(),c(V,{label:"\u6570\u636E\u96C6\u540D\u79F0",align:"left",width:"300",key:"name",prop:"name","show-overflow-tooltip":!0},{default:t(e=>[b("div",null,[a(fe,{to:"/base/search/vectorData/parseDataset?datasetId="+e.row.id},{default:t(()=>[b("i",{class:Z(e.row.icon)},null,2),p(" "+x(e.row.name),1)]),_:2},1032,["to"])]),v((d(),P("div",Ke,[p(" \u6807\u8BC6: "+x(e.row.id)+" ",1),a(ge,null,{default:t(()=>[a(_e)]),_:1})])),[[he,e.row.id]])]),_:1})):y("",!0),l(h)[3].visible?(d(),c(V,{label:"\u63CF\u8FF0\u4FE1\u606F",align:"left",key:"description",prop:"description"},{default:t(e=>[b("div",Fe,x(e.row.description),1)]),_:1})):y("",!0),l(h)[5].visible?(d(),c(V,{label:"\u8BBF\u95EE\u6743\u9650",align:"center",width:"130",key:"accessPermission",prop:"accessPermission","show-overflow-tooltip":!0},{default:t(e=>[a(m,{type:"danger",text:"",bg:"",icon:"Link"},{default:t(()=>[p(x(e.row.accessPermission),1)]),_:2},1024)]),_:1})):y("",!0),l(h)[6].visible?(d(),c(V,{label:"\u6570\u636E\u603B\u91CF",align:"center",width:"130",key:"datasetSize",prop:"datasetSize","show-overflow-tooltip":!0})):y("",!0),l(h)[7].visible?(d(),c(V,{key:4,label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:t(e=>[b("span",null,x(i.parseTime(e.row.addTime)),1)]),_:1})):y("",!0),l(h)[8].visible?(d(),c(V,{key:5,label:"\u64CD\u4F5C",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:t(e=>[e.row.applicationId!==1?(d(),c(H,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:t(()=>[v(a(m,{link:"",type:"primary",icon:"Edit",onClick:ke=>A(e.row)},null,8,["onClick"]),[[N,["system:Dataset:edit"]]])]),_:2},1024)):y("",!0),e.row.applicationId!==1?(d(),c(H,{key:1,content:"\u5220\u9664",placement:"top"},{default:t(()=>[v(a(m,{link:"",type:"primary",icon:"Delete",onClick:ke=>j(e.row)},null,8,["onClick"]),[[N,["system:Dataset:remove"]]])]),_:2},1024)):y("",!0)]),_:1})):y("",!0)]),_:1},8,["data"])),[[we,l(R)]]),v(a(ve,{total:l(T),page:l(u).pageNum,"onUpdate:page":n[4]||(n[4]=e=>l(u).pageNum=e),limit:l(u).pageSize,"onUpdate:limit":n[5]||(n[5]=e=>l(u).pageSize=e),onPagination:w},null,8,["total","page","limit"]),[[Y,l(T)>0]])]),_:1})]),_:1}),a(ye,{title:l(q),modelValue:l(g),"onUpdate:modelValue":n[10]||(n[10]=e=>K(g)?g.value=e:null),width:"600px","append-to-body":""},{footer:t(()=>[b("div",Le,[a(m,{type:"primary",onClick:ce},{default:t(()=>[p("\u786E \u5B9A")]),_:1}),a(m,{onClick:de},{default:t(()=>[p("\u53D6 \u6D88")]),_:1})])]),default:t(()=>[a(M,{model:l(r),rules:l(oe),ref:"DatasetRef","label-width":"100px"},{default:t(()=>[a(C,null,{default:t(()=>[a(_,{span:24},{default:t(()=>[a(D,{label:"\u56FE\u6807",prop:"icon"},{default:t(()=>[a(G,{modelValue:l(r).icon,"onUpdate:modelValue":n[6]||(n[6]=e=>l(r).icon=e)},{default:t(()=>[(d(!0),P(ee,null,te(l(le),e=>(d(),c(J,{value:e.icon,key:e.icon,label:e.icon},{default:t(()=>[b("i",{class:Z(e.icon)},null,2)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(_,{span:24},{default:t(()=>[a(D,{label:"\u6570\u636E\u96C6\u540D\u79F0",prop:"name"},{default:t(()=>[a(k,{modelValue:l(r).name,"onUpdate:modelValue":n[7]||(n[7]=e=>l(r).name=e),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(_,{span:24},{default:t(()=>[a(D,{label:"\u63CF\u8FF0\u4FE1\u606F",prop:"description"},{default:t(()=>[a(k,{modelValue:l(r).description,"onUpdate:modelValue":n[8]||(n[8]=e=>l(r).description=e),placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(_,{span:24},{default:t(()=>[a(D,{label:"\u8BBF\u95EE\u6743\u9650",prop:"accessPermission"},{default:t(()=>[a(G,{modelValue:l(r).accessPermission,"onUpdate:modelValue":n[9]||(n[9]=e=>l(r).accessPermission=e)},{default:t(()=>[(d(!0),P(ee,null,te(l(ae),e=>(d(),c(J,{key:e.code,label:e.code},{default:t(()=>[p(x(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Me=De(Ee,[["__scopeId","data-v-2bfaefe9"]]);export{Me as default};
