import{E as D,K as de,B as xe,m as Te,r as f,Q as $e,R as Re,a as d,H as L,o as r,l as S,d as e,w as l,I as N,f as a,h as te,j as s,U as ae,J as Q,c as _,i as g,x as R,e as h,F as oe,C as ne,n as Fe}from"./index.2b31a27b.js";import qe from"./channelList.303da686.js";var b="/api/infra/smart/assistant/project/",x={datatables:b+"datatables",createUrl:b+"add",saveUrl:b+"save",updateUrl:b+"modify",statusUrl:b+"changeStatus",cleanUrl:b+"clean",detailUrl:b+"detail",removeUrl:b+"delete",exportUrl:b+"exportExcel",changeField:b+"changeField",defaultProject:b+"defaultProject",downloadFile:b+"downloadFile"};function Ie(c){return D({url:x.changeField,method:"post",data:c})}function ze(c){return D({url:x.datatables,method:"post",params:c})}function Ke(c){return D({url:x.detailUrl+"/"+de(c),method:"get"})}function Ee(c){return D({url:x.saveUrl,method:"post",data:c})}function Be(c){return D({url:x.updateUrl,method:"put",data:c})}function Le(c){return D({url:x.removeUrl+"/"+de(c),method:"delete"})}const Qe={class:"app-container"},Ae=h("span",{style:{"font-size":"25px",color:"#3b5998"}},[h("i",{class:"fa-solid fa-file-word"})],-1),He=h("i",{class:"fa-solid fa-link"},null,-1),Je={style:{"font-size":"13px",color:"#a5a5a5",cursor:"pointer"}},Oe=h("i",{class:"fa-solid fa-link"},null,-1),Ge=["src"],Me={class:"el-upload-list__item-actions"},We=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze={class:"dialog-footer"},el={class:"dialog-footer"},ll=xe({name:"Project"}),ol=Object.assign(ll,{setup(c){const ue=Te(),{proxy:w}=Fe(),A=f([]),V=f(!1),z=f(!0),F=f(!0),K=f([]),H=f(!0),J=f(!0),E=f(0),q=f(""),O=f([]),T=f(!1),j=f([{key:0,label:"\u5E94\u7528\u540D\u79F0",visible:!0},{key:1,label:"\u5E94\u7528\u63CF\u8FF0",visible:!0},{key:2,label:"\u6388\u6743\u5730\u5740",visible:!0},{key:3,label:"\u7C7B\u578B",visible:!0},{key:4,label:"\u662F\u5426\u516C\u5F00",visible:!0},{key:5,label:"\u72B6\u6001",visible:!0},{key:6,label:"\u6DFB\u52A0\u65F6\u95F4",visible:!0}]),re=$e({form:{},queryParams:{pageNum:1,pageSize:10,dbName:void 0,dbDesc:void 0},rules:{dbName:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],jdbcUrl:[{required:!0,message:"\u8FDE\u63A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbType:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbUsername:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbPasswd:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbDesc:[{required:!0,message:"\u5907\u6CE8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:m,form:u,rules:se}=Re(re);function U(){z.value=!0,ze(w.addDateRange(m.value,O.value)).then(n=>{z.value=!1,A.value=n.rows,E.value=n.total})}function I(){m.value.pageNum=1,U()}function ie(){O.value=[],w.resetForm("queryRef"),m.value.deptId=void 0,w.$refs.deptTreeRef.setCurrentKey(null),I()}function G(n){const o=n.id||K.value;w.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+o+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Le(o)}).then(()=>{U(),w.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function pe(n){K.value=n.map(o=>o.id),H.value=n.length!=1,J.value=!n.length}function B(){u.value={id:void 0,deptId:void 0,ProjectName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,status:"0",remark:void 0},w.resetForm("databaseRef")}function ce(){V.value=!1,B()}function me(){B(),V.value=!0,q.value="\u6DFB\u52A0\u5E94\u7528"}function M(n){B();const o=n.id||K.value;Ke(o).then(y=>{u.value=y.data,V.value=!0,q.value="\u4FEE\u6539\u5E94\u7528"})}function fe(n){let o="/project/space/";ue.push({path:o+n})}function _e(){w.$refs.databaseRef.validate(n=>{n&&(u.value.ProjectId!=null?Be(u.value).then(o=>{w.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),V.value=!1,U()}):Ee(u.value).then(o=>{w.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),V.value=!1,U()}))})}function be(n,o){T.value=!0}const ve=async(n,o,y)=>{const i=await Ie({field:n,value:o?1:0,id:y}).catch(()=>{});i&&i.code==200&&U()};function ge(){}return U(),(n,o)=>{const y=d("el-input"),i=d("el-form-item"),p=d("el-button"),W=d("el-form"),v=d("el-col"),he=d("right-toolbar"),P=d("el-row"),k=d("el-table-column"),ye=d("CopyDocument"),$=d("el-icon"),we=d("el-switch"),X=d("el-tooltip"),ke=d("el-table"),Ce=d("pagination"),Ve=d("Plus"),je=d("zoom-in"),Ue=d("Download"),Pe=d("Delete"),Se=d("el-upload"),Y=d("el-radio"),Z=d("el-radio-group"),ee=d("el-dialog"),Ne=L("copyText"),le=L("hasPermi"),De=L("loading");return r(),S("div",Qe,[e(P,{gutter:20},{default:l(()=>[e(v,{span:24,xs:24},{default:l(()=>[N(e(W,{model:a(m),ref:"queryRef",inline:!0,"label-width":"100px"},{default:l(()=>[e(i,{label:"\u5E94\u7528\u540D\u79F0",prop:"dbName"},{default:l(()=>[e(y,{modelValue:a(m).dbName,"onUpdate:modelValue":o[0]||(o[0]=t=>a(m).dbName=t),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:te(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(i,{label:"\u5E94\u7528\u540D\u79F0",prop:"dbName"},{default:l(()=>[e(y,{modelValue:a(m)["condition[dbName|like]"],"onUpdate:modelValue":o[1]||(o[1]=t=>a(m)["condition[dbName|like]"]=t),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:te(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(i,null,{default:l(()=>[e(p,{type:"primary",icon:"Search",onClick:I},{default:l(()=>[s("\u641C\u7D22")]),_:1}),e(p,{icon:"Refresh",onClick:ie},{default:l(()=>[s("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[ae,a(F)]]),e(P,{gutter:10,class:"mb8"},{default:l(()=>[e(v,{span:1.5},{default:l(()=>[e(p,{type:"primary",plain:"",icon:"Plus",onClick:me},{default:l(()=>[s("\u65B0\u589E")]),_:1})]),_:1},8,["span"]),e(v,{span:1.5},{default:l(()=>[e(p,{type:"success",plain:"",icon:"Edit",disabled:a(H),onClick:M},{default:l(()=>[s("\u4FEE\u6539")]),_:1},8,["disabled"])]),_:1},8,["span"]),e(v,{span:1.5},{default:l(()=>[e(p,{type:"danger",plain:"",icon:"Delete",disabled:a(J),onClick:G},{default:l(()=>[s("\u5220\u9664")]),_:1},8,["disabled"])]),_:1},8,["span"]),e(he,{showSearch:a(F),"onUpdate:showSearch":o[2]||(o[2]=t=>Q(F)?F.value=t:null),onQueryTable:U,columns:a(j)},null,8,["showSearch","columns"])]),_:1}),N((r(),_(ke,{data:a(A),onSelectionChange:pe},{default:l(()=>[e(k,{type:"selection",width:"50",align:"center"}),a(j)[5].visible?(r(),_(k,{label:"\u56FE\u6807",align:"center",width:"70",key:"icon"},{default:l(t=>[Ae]),_:1})):g("",!0),a(j)[0].visible?(r(),_(k,{label:"\u5E94\u7528\u540D\u79F0",align:"left",width:"250",key:"projectName",prop:"projectName"},{default:l(t=>[e(p,{type:"danger",bg:"",text:"",onClick:C=>fe(t.row.id)},{default:l(()=>[He,s("\xA0"+R(t.row.projectName),1)]),_:2},1032,["onClick"])]),_:1})):g("",!0),a(j)[1].visible?(r(),_(k,{label:"\u5E94\u7528\u63CF\u8FF0",align:"left",key:"projectDesc",prop:"projectDesc"})):g("",!0),a(j)[2].visible?(r(),_(k,{label:"\u5E94\u7528\u4EE3\u7801",align:"center",width:"200",key:"projectCode",prop:"projectCode","show-overflow-tooltip":!0},{default:l(t=>[N((r(),S("div",Je,[s(R(t.row.projectCode)+" ",1),e($,null,{default:l(()=>[e(ye)]),_:1})])),[[Ne,t.row.projectCode]])]),_:1})):g("",!0),a(j)[1].visible?(r(),_(k,{label:"\u914D\u7F6E\u6587\u6863",align:"center",width:"200",key:"documentType",prop:"documentType","show-overflow-tooltip":!0},{default:l(t=>[e(p,{type:"primary",bg:"",text:"",onClick:C=>be(t.row.id,t.row.documentType)},{default:l(()=>[Oe,s("\xA0\u914D\u7F6E\u6587\u6863 ")]),_:2},1032,["onClick"])]),_:1})):g("",!0),a(j)[1].visible?(r(),_(k,{label:"\u5F00\u542F",align:"center",width:"100",key:"hasStatus",prop:"hasStatus","show-overflow-tooltip":!0},{default:l(t=>[e(we,{modelValue:t.row.hasStatus,"onUpdate:modelValue":C=>t.row.hasStatus=C,"active-value":0,"inactive-value":1,onChange:C=>ve("hasStatus",t.row.hasStatus,t.row.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):g("",!0),a(j)[6].visible?(r(),_(k,{key:6,label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:l(t=>[h("span",null,R(n.parseTime(t.row.addTime)),1)]),_:1})):g("",!0),e(k,{label:"\u64CD\u4F5C",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:l(t=>[t.row.ProjectId!==1?(r(),_(X,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:l(()=>[N(e(p,{link:"",type:"primary",icon:"Edit",onClick:C=>M(t.row)},null,8,["onClick"]),[[le,["system:Project:edit"]]])]),_:2},1024)):g("",!0),t.row.ProjectId!==1?(r(),_(X,{key:1,content:"\u5220\u9664",placement:"top"},{default:l(()=>[N(e(p,{link:"",type:"primary",icon:"Delete",onClick:C=>G(t.row)},null,8,["onClick"]),[[le,["system:Project:remove"]]])]),_:2},1024)):g("",!0)]),_:1})]),_:1},8,["data"])),[[De,a(z)]]),N(e(Ce,{total:a(E),page:a(m).pageNum,"onUpdate:page":o[3]||(o[3]=t=>a(m).pageNum=t),limit:a(m).pageSize,"onUpdate:limit":o[4]||(o[4]=t=>a(m).pageSize=t),onPagination:U},null,8,["total","page","limit"]),[[ae,a(E)>0]])]),_:1})]),_:1}),e(ee,{title:a(q),modelValue:a(V),"onUpdate:modelValue":o[11]||(o[11]=t=>Q(V)?V.value=t:null),width:"900px","append-to-body":""},{footer:l(()=>[h("div",Ze,[e(p,{type:"primary",onClick:_e},{default:l(()=>[s("\u786E \u5B9A")]),_:1}),e(p,{onClick:ce},{default:l(()=>[s("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(W,{model:a(u),rules:a(se),ref:"databaseRef","label-width":"100px"},{default:l(()=>[e(P,null,{default:l(()=>[e(v,{span:24},{default:l(()=>[e(i,{label:"\u5E94\u7528\u56FE\u6807",prop:"logo"},{default:l(()=>[e(Se,{action:"#","list-type":"picture-card","auto-upload":!1},{file:l(({file:t})=>[h("div",null,[h("img",{class:"el-upload-list__item-thumbnail",src:t.url,alt:""},null,8,Ge),h("span",Me,[h("span",{class:"el-upload-list__item-preview",onClick:C=>n.handlePictureCardPreview(t)},[e($,null,{default:l(()=>[e(je)]),_:1})],8,We),n.disabled?g("",!0):(r(),S("span",{key:0,class:"el-upload-list__item-delete",onClick:C=>n.handleDownload(t)},[e($,null,{default:l(()=>[e(Ue)]),_:1})],8,Xe)),n.disabled?g("",!0):(r(),S("span",{key:1,class:"el-upload-list__item-delete",onClick:C=>n.handleRemove(t)},[e($,null,{default:l(()=>[e(Pe)]),_:1})],8,Ye))])])]),default:l(()=>[e($,null,{default:l(()=>[e(Ve)]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{span:24},{default:l(()=>[e(i,{label:"\u5E94\u7528\u540D\u79F0",prop:"projectName"},{default:l(()=>[e(y,{modelValue:a(u).projectName,"onUpdate:modelValue":o[5]||(o[5]=t=>a(u).projectName=t),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(v,{span:24},{default:l(()=>[e(i,{label:"\u5E94\u7528\u4ECB\u7ECD",prop:"intro"},{default:l(()=>[e(y,{modelValue:a(u).intro,"onUpdate:modelValue":o[6]||(o[6]=t=>a(u).intro=t),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u4ECB\u7ECD",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(v,{span:24},{default:l(()=>[e(i,{label:"\u6388\u6743\u5730\u5740",prop:"allowUrl"},{default:l(()=>[e(y,{modelValue:a(u).allowUrl,"onUpdate:modelValue":o[7]||(o[7]=t=>a(u).allowUrl=t),placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u5730\u5740",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:24},{default:l(()=>[e(i,{label:"\u5E94\u7528\u72B6\u6001",prop:"status"},{default:l(()=>[e(Z,{modelValue:a(u).status,"onUpdate:modelValue":o[8]||(o[8]=t=>a(u).status=t)},{default:l(()=>[(r(!0),S(oe,null,ne(n.sys_normal_disable,t=>(r(),_(Y,{key:t.value,label:t.value},{default:l(()=>[s(R(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(v,{span:24},{default:l(()=>[e(i,{label:"\u662F\u5426\u516C\u5F00",prop:"isPublic"},{default:l(()=>[e(Z,{modelValue:a(u).isPublic,"onUpdate:modelValue":o[9]||(o[9]=t=>a(u).isPublic=t)},{default:l(()=>[(r(!0),S(oe,null,ne(n.sys_normal_disable,t=>(r(),_(Y,{key:t.value,label:t.value},{default:l(()=>[s(R(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(v,{span:24},{default:l(()=>[e(i,{label:"\u5907\u6CE8",prop:"description"},{default:l(()=>[e(y,{modelValue:a(u).description,"onUpdate:modelValue":o[10]||(o[10]=t=>a(u).description=t),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(ee,{title:a(q),modelValue:a(T),"onUpdate:modelValue":o[13]||(o[13]=t=>Q(T)?T.value=t:null),width:"1024px","append-to-body":""},{footer:l(()=>[h("div",el,[e(p,{type:"primary",onClick:ge},{default:l(()=>[s("\u786E \u5B9A")]),_:1}),e(p,{onClick:o[12]||(o[12]=t=>T.value=!1)},{default:l(()=>[s("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(qe)]),_:1},8,["title","modelValue"])])}}});export{ol as default};
