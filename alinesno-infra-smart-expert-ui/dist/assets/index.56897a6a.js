import{_ as de,B as re,m as ce,r as o,Q as F,T as pe,R as me,a as s,H as z,o as c,l as M,d as e,w as t,I as b,f as a,h as fe,j as f,U as Q,c as _,e as j,x as A,i as h,J as _e,n as ge}from"./index.2b31a27b.js";import{l as ve,d as be,g as ye,u as he,a as ke}from"./vectorDataset.02b10d35.js";import we from"./displayMemory.af6ba021.js";const De={class:"app-container"},xe={style:{"font-size":"13px",color:"#a5a5a5",cursor:"pointer"}},Ce={class:"dialog-footer"},Se=re({name:"Dataset"}),Ie=Object.assign(Se,{setup(Ve){ce();const{proxy:r}=ge(),N=o([]),p=o(!1),x=o(!0),E=o(!0),C=o([]),U=o(!0),L=o(!0),S=o(0),I=o(""),P=o([]);o(""),o(void 0),o(void 0),o([]),o([]),F({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+pe()},url:"/prod-api/system/Dataset/importData"});const V=o([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u8BB0\u5FC6\u5E93\u540D\u79F0",visible:!0},{key:2,label:"\u6240\u6709\u8005",visible:!0},{key:3,label:"\u63CF\u8FF0\u4FE1\u606F",visible:!0},{key:4,label:"\u72B6\u6001",visible:!0},{key:5,label:"\u8BBF\u95EE\u6743\u9650",visible:!0},{key:6,label:"\u6570\u636E\u603B\u91CF",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),H=F({form:{},queryParams:{pageNum:1,pageSize:10,isMemory:1,DatasetName:void 0,name:void 0,ownerId:void 0,status:void 0,deptId:void 0},rules:{applicationId:[{required:!0,message:"\u5E94\u7528\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u5E94\u7528\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],ownerId:[{required:!0,message:"\u663E\u793A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u63CF\u8FF0\u4FE1\u606F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],datasetStatus:[{required:!0,message:"\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessPermission:[{required:!0,message:"\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],datasetSize:[{required:!0,message:"\u5E94\u7528\u76EE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:u,form:d,rules:J}=me(H);function g(){x.value=!0,ve(r.addDateRange(u.value,P.value)).then(i=>{x.value=!1,N.value=i.rows,S.value=i.total})}function R(){console.log(u),u.value.pageNum=1,g()}function O(){P.value=[],r.resetForm("queryRef"),u.value.name=void 0,u.value.ownerId=void 0,r.$refs.deptTreeRef.setCurrentKey(null),R()}function G(i){const l=i.id||C.value;r.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+l+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return be(l)}).then(()=>{g(),r.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function W(i){C.value=i.map(l=>l.id),U.value=i.length!=1,L.value=!i.length}function q(){d.value={applicationId:void 0,name:void 0,ownerId:void 0,description:void 0,datasetStatus:void 0,accessPermission:void 0,datasetSize:void 0},r.resetForm("DatasetRef")}function X(){p.value=!1,q()}function Y(){q(),p.value=!0,I.value="\u6DFB\u52A0\u5E94\u7528"}function Z(i){q();const l=i.id||C.value;ye(l).then(y=>{d.value=y.data,d.value.applicationId=l,p.value=!0,I.value="\u4FEE\u6539\u5E94\u7528"})}function ee(){r.$refs.DatasetRef.validate(i=>{i&&(d.value.isMemory=1,d.value.applicationId!=null?he(d.value).then(l=>{r.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),p.value=!1,g()}):ke(d.value).then(l=>{r.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),p.value=!1,g()}))})}return g(),(i,l)=>{const y=s("el-input"),k=s("el-form-item"),m=s("el-button"),$=s("el-form"),v=s("el-col"),w=s("el-row"),D=s("el-table-column"),te=s("CopyDocument"),B=s("el-icon"),T=s("el-tooltip"),ae=s("Right"),le=s("el-table"),ne=s("pagination"),oe=s("el-dialog"),K=z("hasPermi"),ie=z("copyText"),se=z("loading");return c(),M("div",De,[e(w,{gutter:20},{default:t(()=>[e(v,{span:8,xs:24},{default:t(()=>[b(e($,{model:a(u),ref:"queryRef",inline:!0,"label-width":"100px"},{default:t(()=>[e(k,{label:"\u8BB0\u5FC6\u5E93\u540D\u79F0",prop:"name"},{default:t(()=>[e(y,{modelValue:a(u)["condition[name|like]"],"onUpdate:modelValue":l[0]||(l[0]=n=>a(u)["condition[name|like]"]=n),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:fe(R,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,null,{default:t(()=>[e(m,{type:"primary",icon:"Search",onClick:R},{default:t(()=>[f("\u641C\u7D22")]),_:1}),e(m,{icon:"Refresh",onClick:O},{default:t(()=>[f("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[Q,a(E)]]),e(w,{gutter:10,class:"mb8"},{default:t(()=>[e(v,{span:1.5},{default:t(()=>[e(m,{type:"primary",plain:"",size:"mini",icon:"Plus",onClick:Y},{default:t(()=>[f("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),e(v,{span:1.5},{default:t(()=>[b((c(),_(m,{type:"success",plain:"",size:"mini",icon:"Edit",disabled:a(U),onClick:Z},{default:t(()=>[f("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[K,["system:Dataset:edit"]]])]),_:1},8,["span"])]),_:1}),b((c(),_(le,{data:a(N),onSelectionChange:W},{default:t(()=>[e(D,{type:"selection",width:"50",align:"center"}),a(V)[1].visible?(c(),_(D,{label:"\u8BB0\u5FC6\u5E93\u540D\u79F0",align:"left",key:"name",prop:"name","show-overflow-tooltip":!0},{default:t(n=>[j("div",null,A(n.row.name),1),b((c(),M("div",xe,[f(" \u6807\u8BC6: "+A(n.row.id)+" ",1),e(B,null,{default:t(()=>[e(te)]),_:1})])),[[ie,n.row.id]])]),_:1})):h("",!0),a(V)[6].visible?(c(),_(D,{label:"\u5B9E\u4F53\u603B\u91CF",align:"center",width:"130",key:"datasetSize",prop:"datasetSize","show-overflow-tooltip":!0})):h("",!0),a(V)[8].visible?(c(),_(D,{key:2,label:"\u64CD\u4F5C",align:"center",width:"100","class-name":"small-padding fixed-width"},{default:t(n=>[n.row.applicationId!==1?(c(),_(T,{key:0,content:"\u5220\u9664",placement:"top"},{default:t(()=>[b(e(m,{link:"",type:"primary",icon:"Delete",onClick:ue=>G(n.row)},null,8,["onClick"]),[[K,["system:Dataset:remove"]]])]),_:2},1024)):h("",!0),n.row.applicationId!==1?(c(),_(T,{key:1,content:"\u67E5\u770B",placement:"top"},{default:t(()=>[e(m,{onClick:ue=>i.handleClickBalanced(n.row),type:"text",bg:"",circle:"",title:"\u8BF7\u70B9\u51FB\u9009\u4E2D\u67E5\u770B"},{default:t(()=>[e(B,null,{default:t(()=>[e(ae)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):h("",!0)]),_:1})):h("",!0)]),_:1},8,["data"])),[[se,a(x)]]),b(e(ne,{total:a(S),page:a(u).pageNum,"onUpdate:page":l[1]||(l[1]=n=>a(u).pageNum=n),limit:a(u).pageSize,"onUpdate:limit":l[2]||(l[2]=n=>a(u).pageSize=n),onPagination:g},null,8,["total","page","limit"]),[[Q,a(S)>0]])]),_:1}),e(v,{span:16,xs:24},{default:t(()=>[e(we)]),_:1})]),_:1}),e(oe,{title:a(I),modelValue:a(p),"onUpdate:modelValue":l[5]||(l[5]=n=>_e(p)?p.value=n:null),width:"600px","append-to-body":""},{footer:t(()=>[j("div",Ce,[e(m,{type:"primary",onClick:ee},{default:t(()=>[f("\u786E \u5B9A")]),_:1}),e(m,{onClick:X},{default:t(()=>[f("\u53D6 \u6D88")]),_:1})])]),default:t(()=>[e($,{model:a(d),rules:a(J),ref:"DatasetRef","label-width":"100px"},{default:t(()=>[e(w,null,{default:t(()=>[e(v,{span:24},{default:t(()=>[e(k,{label:"\u8BB0\u5FC6\u5E93\u540D\u79F0",prop:"name"},{default:t(()=>[e(y,{modelValue:a(d).name,"onUpdate:modelValue":l[3]||(l[3]=n=>a(d).name=n),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(v,{span:24},{default:t(()=>[e(k,{label:"\u63CF\u8FF0\u4FE1\u606F",prop:"description"},{default:t(()=>[e(y,{modelValue:a(d).description,"onUpdate:modelValue":l[4]||(l[4]=n=>a(d).description=n),placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Ne=de(Ie,[["__scopeId","data-v-4447b208"]]);export{Ne as default};
