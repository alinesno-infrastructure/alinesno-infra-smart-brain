import{E as w,K as z,B as me,r as _,Q as ce,R as fe,a as r,H as j,o as c,l as O,I as C,U as _e,f as a,d as e,w as l,h as he,j as p,c as v,J as G,x as q,e as H,i as D,F as ge,C as ve,n as be,G as ye}from"./index.2b31a27b.js";var u="/api/infra/smart/assistant/roleCatalog/",x={datatables:u+"datatables",createUrl:u+"add",saveUrl:u+"insertCatalog",updateUrl:u+"modify",statusUrl:u+"changeStatus",cleanUrl:u+"clean",detailUrl:u+"detail",removeUrl:u+"delete",exportUrl:u+"exportExcel",changeField:u+"changeField",list:u+"list",excludeChild:u+"excludeChild",downloadFile:u+"downloadFile"};function Ce(s){return w({url:x.excludeChild+"/"+s,method:"get"})}function J(s){return w({url:x.list,method:"get",params:s})}function we(s){return w({url:x.detailUrl+"/"+z(s),method:"get"})}function xe(s){return w({url:x.saveUrl,method:"post",data:s})}function Ve(s){return w({url:x.updateUrl,method:"put",data:s})}function ke(s){return w({url:x.removeUrl+"/"+z(s),method:"delete"})}const Ue={class:"app-container"},Se={class:"dialog-footer"},Ie=me({name:"Catalog"}),Te=Object.assign(Ie,{setup(s){const{proxy:i}=be(),{sys_normal_disable:P}=i.useDict("sys_normal_disable"),B=_([]),f=_(!1),S=_(!0),V=_(!0),I=_(""),N=_([]),T=_(!0),F=_(!0),M=ce({form:{},queryParams:{name:void 0,hasStatus:void 0},rules:{parentId:[{required:!0,message:"\u4E0A\u7EA7\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNum:[{required:!0,message:"\u663E\u793A\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}}),{queryParams:k,form:o,rules:W}=fe(M);function b(){S.value=!0,J(k.value).then(d=>{B.value=i.handleTree(d.data,"id"),S.value=!1})}function X(){f.value=!1,R()}function R(){o.value={id:void 0,parentId:void 0,name:void 0,orderNum:0,leader:void 0,phone:void 0,email:void 0,hasStatus:"0"},i.resetForm("deptRef")}function $(){b()}function Y(){i.resetForm("queryRef"),$()}function K(d){R(),J().then(n=>{N.value=i.handleTree(n.data,"id")}),d!=null&&(o.value.parentId=d.id),f.value=!0,I.value="\u6DFB\u52A0\u5206\u7C7B"}function Z(){F.value=!1,T.value=!T.value,ye(()=>{F.value=!0})}function ee(d){R(),Ce(d.id).then(n=>{N.value=i.handleTree(n.data,"id")}),we(d.id).then(n=>{o.value=n.data,f.value=!0,I.value="\u4FEE\u6539\u5206\u7C7B"})}function le(){i.$refs.deptRef.validate(d=>{d&&(o.value.id!=null?Ve(o.value).then(n=>{i.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),f.value=!1,b()}):xe(o.value).then(n=>{i.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),f.value=!1,b()}))})}function te(d){i.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u79F0\u4E3A"'+d.name+'"\u7684\u6570\u636E\u9879?').then(function(){return ke(d.id)}).then(()=>{b(),i.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}return b(),(d,n)=>{const E=r("el-input"),h=r("el-form-item"),m=r("el-button"),Q=r("el-form"),g=r("el-col"),ae=r("right-toolbar"),A=r("el-row"),y=r("el-table-column"),ne=r("dict-tag"),oe=r("el-table"),re=r("el-tree-select"),de=r("el-input-number"),ue=r("el-radio"),se=r("el-radio-group"),ie=r("el-dialog"),U=j("hasPermi"),pe=j("loading");return c(),O("div",Ue,[C(e(Q,{model:a(k),ref:"queryRef",inline:!0},{default:l(()=>[e(h,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:l(()=>[e(E,{modelValue:a(k).name,"onUpdate:modelValue":n[0]||(n[0]=t=>a(k).name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:he($,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,null,{default:l(()=>[e(m,{type:"primary",icon:"Search",onClick:$},{default:l(()=>[p("\u641C\u7D22")]),_:1}),e(m,{icon:"Refresh",onClick:Y},{default:l(()=>[p("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[_e,a(V)]]),e(A,{gutter:10,class:"mb8"},{default:l(()=>[e(g,{span:1.5},{default:l(()=>[C((c(),v(m,{type:"primary",plain:"",icon:"Plus",onClick:K},{default:l(()=>[p("\u65B0\u589E")]),_:1})),[[U,["system:dept:add"]]])]),_:1},8,["span"]),e(g,{span:1.5},{default:l(()=>[e(m,{type:"info",plain:"",icon:"Sort",onClick:Z},{default:l(()=>[p("\u5C55\u5F00/\u6298\u53E0")]),_:1})]),_:1},8,["span"]),e(ae,{showSearch:a(V),"onUpdate:showSearch":n[1]||(n[1]=t=>G(V)?V.value=t:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),a(F)?C((c(),v(oe,{key:0,data:a(B),"row-key":"id","default-expand-all":a(T),"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:l(()=>[e(y,{prop:"name",width:"250px",label:"\u5206\u7C7B\u540D\u79F0"},{default:l(t=>[p(q(t.row.name),1)]),_:1}),e(y,{prop:"description",label:"\u7C7B\u578B\u63CF\u8FF0"}),e(y,{prop:"orderNum",align:"center",label:"\u6392\u5E8F",width:"200"}),e(y,{prop:"hasStatus",align:"center",label:"\u72B6\u6001",width:"100"},{default:l(t=>[e(ne,{options:a(P),value:t.row.hasStatus},null,8,["options","value"])]),_:1}),e(y,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"200"},{default:l(t=>[H("span",null,q(d.parseTime(t.row.addTime)),1)]),_:1}),e(y,{label:"\u64CD\u4F5C",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:l(t=>[C((c(),v(m,{type:"text",icon:"Edit",onClick:L=>ee(t.row)},{default:l(()=>[p("\u4FEE\u6539")]),_:2},1032,["onClick"])),[[U,["system:dept:edit"]]]),C((c(),v(m,{type:"text",icon:"Plus",onClick:L=>K(t.row)},{default:l(()=>[p("\u65B0\u589E")]),_:2},1032,["onClick"])),[[U,["system:dept:add"]]]),t.row.parentId!=0?C((c(),v(m,{key:0,type:"text",icon:"Delete",onClick:L=>te(t.row)},{default:l(()=>[p("\u5220\u9664")]),_:2},1032,["onClick"])),[[U,["system:dept:remove"]]]):D("",!0)]),_:1})]),_:1},8,["data","default-expand-all"])),[[pe,a(S)]]):D("",!0),e(ie,{title:a(I),modelValue:a(f),"onUpdate:modelValue":n[7]||(n[7]=t=>G(f)?f.value=t:null),width:"600px","append-to-body":""},{footer:l(()=>[H("div",Se,[e(m,{type:"primary",onClick:le},{default:l(()=>[p("\u786E \u5B9A")]),_:1}),e(m,{onClick:X},{default:l(()=>[p("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(Q,{ref:"deptRef",model:a(o),rules:a(W),"label-width":"80px"},{default:l(()=>[e(A,null,{default:l(()=>[a(o).parentId!==0?(c(),v(g,{key:0,span:24},{default:l(()=>[e(h,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:l(()=>[e(re,{modelValue:a(o).parentId,"onUpdate:modelValue":n[2]||(n[2]=t=>a(o).parentId=t),data:a(N),props:{value:"id",label:"name",children:"children"},"value-key":"id",placeholder:"\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B","check-strictly":""},null,8,["modelValue","data"])]),_:1})]),_:1})):D("",!0),e(g,{span:24},{default:l(()=>[e(h,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:l(()=>[e(E,{modelValue:a(o).name,"onUpdate:modelValue":n[3]||(n[3]=t=>a(o).name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{span:24},{default:l(()=>[e(h,{label:"\u7C7B\u578B\u63CF\u8FF0",prop:"name"},{default:l(()=>[e(E,{modelValue:a(o).description,"onUpdate:modelValue":n[4]||(n[4]=t=>a(o).description=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{span:24},{default:l(()=>[e(h,{label:"\u663E\u793A\u6392\u5E8F",prop:"orderNum"},{default:l(()=>[e(de,{modelValue:a(o).orderNum,"onUpdate:modelValue":n[5]||(n[5]=t=>a(o).orderNum=t),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{span:24},{default:l(()=>[e(h,{label:"\u5206\u7C7B\u72B6\u6001"},{default:l(()=>[e(se,{modelValue:a(o).hasStatus,"onUpdate:modelValue":n[6]||(n[6]=t=>a(o).hasStatus=t)},{default:l(()=>[(c(!0),O(ge,null,ve(a(P),t=>(c(),v(ue,{key:t.value,label:t.value},{default:l(()=>[p(q(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Te as default};
