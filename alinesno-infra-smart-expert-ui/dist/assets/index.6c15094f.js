import{B as we,m as ke,r,Q as Ce,R as Ve,a as d,H as B,o as u,l as U,d as e,w as t,e as C,f as o,I as N,h as Z,j as v,U as ee,J as z,c as m,i as g,x as D,n as Ne}from"./index.2b31a27b.js";import{_ as Pe,l as Se,d as xe,c as Te,g as Ue,u as De,a as Ie}from"./editor.d3b7d268.js";const Re={class:"app-container"},$e={class:"head-container"},qe={class:"head-container"},Ae={class:"role-icon"},Ke=["src"],Be={style:{"font-size":"13px",color:"#a5a5a5",cursor:"pointer"}},ze={key:0},Oe={key:1},Qe={class:"dialog-footer"},Ee=we({name:"Prompt"}),Le=Object.assign(Ee,{setup(Fe){ke();const{proxy:c}=Ne(),O=r([]),h=r(!1),Q=r(""),E=r(""),F=r([]),P=r(!1),I=r(!0),S=r(!0),R=r([]),j=r(!0),J=r(!0),$=r(0),q=r(""),L=r([]),A=r(void 0);r([]),r([]);const b=r([{key:0,label:"\u6307\u4EE4\u540D\u79F0",visible:!0},{key:1,label:"\u6307\u4EE4\u63CF\u8FF0",visible:!0},{key:2,label:"\u8868\u6570\u636E\u91CF",visible:!0},{key:3,label:"\u7C7B\u578B",visible:!0},{key:4,label:"\u6307\u4EE4\u5730\u5740",visible:!0},{key:5,label:"\u72B6\u6001",visible:!0},{key:6,label:"\u66F4\u65B0\u65F6\u95F4",visible:!0}]),te=Ce({form:{},queryParams:{pageNum:1,pageSize:10,promptName:void 0,promptDesc:void 0,catalogId:void 0},rules:{promptName:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dataSourceApi:[{required:!0,message:"\u8FDE\u63A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],promptType:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],promptDesc:[{required:!0,message:"\u5907\u6CE8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:s,form:i,rules:le}=Ve(te);function y(){I.value=!0,Se(c.addDateRange(s.value,L.value)).then(n=>{I.value=!1,O.value=n.rows,$.value=n.total})}function oe(n){s.value.catalogId=n.id,console.log("data.id = "+n.id),y()}function x(){s.value.pageNum=1,y()}function ae(){L.value=[],c.resetForm("queryRef"),s.value.catalogId=void 0,c.$refs.deptTreeRef.setCurrentKey(null),x()}function H(n){const a=n.id||R.value;c.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u6307\u4EE4\u7F16\u53F7\u4E3A"'+a+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return xe(a)}).then(()=>{y(),c.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function ne(n){R.value=n.map(a=>a.id),j.value=n.length!=1,J.value=!n.length}function re(){Te().then(n=>{A.value=n.data})}function de(n){Q.value="\u914D\u7F6E\u89D2\u8272Prompt",P.value=!0,E.value=n.id,n.promptContent&&(F.value=JSON.parse(n.promptContent))}function K(){i.value={id:void 0,deptId:void 0,PromptName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,status:"0",remark:void 0},c.resetForm("databaseRef")}function ie(){h.value=!1,P.value=!1,K()}function ue(){K(),h.value=!0,q.value="\u6DFB\u52A0\u6307\u4EE4"}function G(n){K();const a=n.id||R.value;Ue(a).then(w=>{i.value=w.data,h.value=!0,q.value="\u4FEE\u6539\u6307\u4EE4"})}function se(){c.$refs.databaseRef.validate(n=>{n&&(i.value.id!=null?De(i.value).then(a=>{c.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),h.value=!1,y()}):Ie(i.value).then(a=>{c.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),h.value=!1,y()}))})}return re(),y(),(n,a)=>{const w=d("el-input"),pe=d("el-tree"),f=d("el-col"),k=d("el-form-item"),p=d("el-button"),M=d("el-form"),me=d("right-toolbar"),V=d("el-row"),_=d("el-table-column"),ce=d("CopyDocument"),fe=d("el-icon"),_e=d("el-switch"),W=d("el-tooltip"),ve=d("el-table"),ge=d("pagination"),X=d("el-dialog"),he=d("el-tree-select"),be=B("copyText"),Y=B("hasPermi"),ye=B("loading");return u(),U("div",Re,[e(V,{gutter:20},{default:t(()=>[e(f,{span:4,xs:24},{default:t(()=>[C("div",$e,[e(w,{modelValue:n.deptName,"onUpdate:modelValue":a[0]||(a[0]=l=>n.deptName=l),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B\u540D\u79F0",clearable:"","prefix-icon":"Search",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),C("div",qe,[e(pe,{data:o(A),props:{label:"label",children:"children"},"expand-on-click-node":!1,"filter-node-method":n.filterNode,ref:"deptTreeRef","node-key":"id","highlight-current":"",onNodeClick:oe},null,8,["data","filter-node-method"])])]),_:1}),e(f,{span:20,xs:24},{default:t(()=>[N(e(M,{model:o(s),ref:"queryRef",inline:!0,"label-width":"100px"},{default:t(()=>[e(k,{label:"\u6307\u4EE4\u540D\u79F0",prop:"promptName"},{default:t(()=>[e(w,{modelValue:o(s).promptName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(s).promptName=l),placeholder:"\u8BF7\u8F93\u5165\u6307\u4EE4\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:Z(x,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,{label:"\u6307\u4EE4\u540D\u79F0",prop:"promptName"},{default:t(()=>[e(w,{modelValue:o(s)["condition[promptName|like]"],"onUpdate:modelValue":a[2]||(a[2]=l=>o(s)["condition[promptName|like]"]=l),placeholder:"\u8BF7\u8F93\u5165\u6307\u4EE4\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:Z(x,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,null,{default:t(()=>[e(p,{type:"primary",icon:"Search",onClick:x},{default:t(()=>[v("\u641C\u7D22")]),_:1}),e(p,{icon:"Refresh",onClick:ae},{default:t(()=>[v("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[ee,o(S)]]),e(V,{gutter:10,class:"mb8"},{default:t(()=>[e(f,{span:1.5},{default:t(()=>[e(p,{type:"primary",plain:"",icon:"Plus",onClick:ue},{default:t(()=>[v("\u65B0\u589E")]),_:1})]),_:1},8,["span"]),e(f,{span:1.5},{default:t(()=>[e(p,{type:"success",plain:"",icon:"Edit",disabled:o(j),onClick:G},{default:t(()=>[v("\u4FEE\u6539")]),_:1},8,["disabled"])]),_:1},8,["span"]),e(f,{span:1.5},{default:t(()=>[e(p,{type:"danger",plain:"",icon:"Delete",disabled:o(J),onClick:H},{default:t(()=>[v("\u5220\u9664")]),_:1},8,["disabled"])]),_:1},8,["span"]),e(me,{showSearch:o(S),"onUpdate:showSearch":a[3]||(a[3]=l=>z(S)?S.value=l:null),onQueryTable:y,columns:o(b)},null,8,["showSearch","columns"])]),_:1}),N((u(),m(ve,{data:o(O),onSelectionChange:ne},{default:t(()=>[e(_,{type:"selection",width:"50",align:"center"}),o(b)[5].visible?(u(),m(_,{label:"\u56FE\u6807",align:"center",width:"70",key:"status"},{default:t(l=>[C("div",Ae,[C("img",{style:{width:"40px",height:"40px","border-radius":"5px"},src:"http://data.linesno.com/icons/sepcialist/dataset_"+((l.$index+1)%10+5)+".png"},null,8,Ke)])]),_:1})):g("",!0),o(b)[0].visible?(u(),m(_,{label:"\u6307\u4EE4\u540D\u79F0",align:"left",key:"promptName",prop:"promptName"},{default:t(l=>[C("div",null,D(l.row.promptName),1),N((u(),U("div",Be,[v(" \u4F1A\u8BDD\u6B21\u6570: 12734 \u8C03\u7528\u7801: "+D(l.row.promptId)+" ",1),e(fe,null,{default:t(()=>[e(ce)]),_:1})])),[[be,l.row.promptId]])]),_:1})):g("",!0),o(b)[2].visible?(u(),m(_,{label:"\u4F7F\u7528\u6B21\u6570",align:"center",width:"100",key:"useCount",prop:"useCount","show-overflow-tooltip":!0},{default:t(l=>[l.row.useCount?(u(),U("span",ze,D(l.row.useCount),1)):(u(),U("span",Oe,"0"))]),_:1})):g("",!0),o(b)[2].visible?(u(),m(_,{label:"Prompt\u914D\u7F6E",align:"center",width:"130",key:"promptContent",prop:"promptContent","show-overflow-tooltip":!0},{default:t(l=>[e(p,{type:"primary",text:"",bg:"",icon:"Paperclip",onClick:T=>de(l.row)},{default:t(()=>[v("\u914D\u7F6E")]),_:2},1032,["onClick"])]),_:1})):g("",!0),o(b)[3].visible?(u(),m(_,{label:"\u7C7B\u578B",align:"center",width:"200",key:"promptType",prop:"promptType","show-overflow-tooltip":!0})):g("",!0),o(b)[5].visible?(u(),m(_,{label:"\u72B6\u6001",align:"center",width:"100",key:"hasStatus"},{default:t(l=>[e(_e,{modelValue:l.row.hasStatus,"onUpdate:modelValue":T=>l.row.hasStatus=T,"active-value":"0","inactive-value":"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):g("",!0),o(b)[6].visible?(u(),m(_,{key:6,label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:t(l=>[C("span",null,D(n.parseTime(l.row.addTime)),1)]),_:1})):g("",!0),e(_,{label:"\u64CD\u4F5C",align:"center",width:"100","class-name":"small-padding fixed-width"},{default:t(l=>[l.row.PromptId!==1?(u(),m(W,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:t(()=>[N(e(p,{link:"",type:"primary",icon:"Edit",onClick:T=>G(l.row)},null,8,["onClick"]),[[Y,["system:Prompt:edit"]]])]),_:2},1024)):g("",!0),l.row.PromptId!==1?(u(),m(W,{key:1,content:"\u5220\u9664",placement:"top"},{default:t(()=>[N(e(p,{link:"",type:"primary",icon:"Delete",onClick:T=>H(l.row)},null,8,["onClick"]),[[Y,["system:Prompt:remove"]]])]),_:2},1024)):g("",!0)]),_:1})]),_:1},8,["data"])),[[ye,o(I)]]),N(e(ge,{total:o($),page:o(s).pageNum,"onUpdate:page":a[4]||(a[4]=l=>o(s).pageNum=l),limit:o(s).pageSize,"onUpdate:limit":a[5]||(a[5]=l=>o(s).pageSize=l),onPagination:y},null,8,["total","page","limit"]),[[ee,o($)>0]])]),_:1})]),_:1}),e(X,{title:o(Q),modelValue:o(P),"onUpdate:modelValue":a[6]||(a[6]=l=>z(P)?P.value=l:null),width:"1024","destroy-on-close":"","append-to-body":""},{default:t(()=>[e(Pe,{currentPostId:o(E),currentPromptContent:o(F)},null,8,["currentPostId","currentPromptContent"])]),_:1},8,["title","modelValue"]),e(X,{title:o(q),modelValue:o(h),"onUpdate:modelValue":a[11]||(a[11]=l=>z(h)?h.value=l:null),width:"900px","append-to-body":""},{footer:t(()=>[C("div",Qe,[e(p,{type:"primary",onClick:se},{default:t(()=>[v("\u786E \u5B9A")]),_:1}),e(p,{onClick:ie},{default:t(()=>[v("\u53D6 \u6D88")]),_:1})])]),default:t(()=>[e(M,{model:o(i),rules:o(le),ref:"databaseRef","label-width":"100px"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,{span:24},{default:t(()=>[e(k,{style:{width:"100%"},label:"\u7C7B\u578B",prop:"promptType"},{default:t(()=>[e(he,{modelValue:o(i).promptType,"onUpdate:modelValue":a[7]||(a[7]=l=>o(i).promptType=l),data:o(A),props:{value:"id",label:"label",children:"children"},"value-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u7C7B\u578B","check-strictly":""},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,{span:24},{default:t(()=>[e(k,{label:"\u540D\u79F0",prop:"promptName"},{default:t(()=>[e(w,{modelValue:o(i).promptName,"onUpdate:modelValue":a[8]||(a[8]=l=>o(i).promptName=l),placeholder:"\u8BF7\u8F93\u5165\u6307\u4EE4\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,{span:24},{default:t(()=>[e(k,{label:"\u6570\u636E\u6765\u6E90",prop:"dataSourceApi"},{default:t(()=>[e(w,{modelValue:o(i).dataSourceApi,"onUpdate:modelValue":a[9]||(a[9]=l=>o(i).dataSourceApi=l),placeholder:"\u8BF7\u8F93\u5165dataSourceApi\u6570\u636E\u6765\u6E90",maxlength:"128"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,{span:24},{default:t(()=>[e(k,{label:"\u5907\u6CE8",prop:"promptDesc"},{default:t(()=>[e(w,{modelValue:o(i).promptDesc,"onUpdate:modelValue":a[10]||(a[10]=l=>o(i).promptDesc=l),placeholder:"\u8BF7\u8F93\u5165\u6307\u4EE4\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Le as default};
