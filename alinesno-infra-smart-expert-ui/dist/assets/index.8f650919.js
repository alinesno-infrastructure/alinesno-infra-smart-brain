import{E as M,K as re,_ as Ue,B as Ve,r,Q as ae,T as Ie,R as xe,a as i,H as te,o as u,l as A,d as l,w as e,I as x,U as ne,f as t,h as de,j as s,c,e as z,x as N,i as w,F as B,C as E,m as Me,n as Ce,z as Ne,A as Pe}from"./index.2b31a27b.js";var v="/api/infra/smart/assistant/llmModel/",C={datatables:v+"datatables",createUrl:v+"add",saveUrl:v+"save",updateUrl:v+"modify",statusUrl:v+"changeStatus",cleanUrl:v+"clean",detailUrl:v+"detail",removeUrl:v+"delete",exportUrl:v+"exportExcel",changeField:v+"changeField",downloadFile:v+"downloadFile",allModelProvidersInfo:v+"getAllModelProvidersInfo",allModelTypesInfo:v+"getAllModelTypesInfo"};function Le(p){return M({url:C.datatables,method:"post",params:p})}function Se(p){return M({url:C.detailUrl+"/"+re(p),method:"get"})}function Ae(p){return M({url:C.saveUrl,method:"post",data:p})}function Ke(p){return M({url:C.updateUrl,method:"put",data:p})}function Te(p){return M({url:C.removeUrl+"/"+re(p),method:"delete"})}function Re(){return M({url:C.allModelProvidersInfo,method:"get"})}function qe(){return M({url:C.allModelTypesInfo,method:"get"})}const Fe=p=>(Ne("data-v-f0ad92d9"),p=p(),Pe(),p),De={class:"app-container"},$e=["src"],Be=Fe(()=>z("i",{class:"fas fa-file-signature"},null,-1)),Ee={class:"dialog-footer"},ze=Ve({name:"LlmModel"}),Oe=Object.assign(ze,{setup(p){Me();const{proxy:b}=Ce(),O=r([]),k=r(!1),K=r(!0),T=r(!0),Q=r([]),j=r(!0),H=r(!0),R=r(0),q=r(""),G=r([]),P=r(void 0),J=r(void 0),F=r(void 0);r(""),r(void 0),r(void 0),r([]),r([]),ae({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Ie()},url:"/prod-api/system/LlmModel/importData"});const U=r([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u5927\u6A21\u578B\u540D\u79F0",visible:!0},{key:2,label:"\u5927\u6A21\u578B\u63CF\u8FF0",visible:!0},{key:3,label:"\u6240\u5C5E\u63D0\u4F9B\u5546\u540D\u79F0",visible:!0},{key:4,label:"API \u5BC6\u94A5",visible:!0},{key:5,label:"API \u5730\u5740",visible:!0},{key:6,label:"\u6A21\u578B\u540D\u79F0",visible:!0},{key:7,label:"\u7F16\u8F91",visible:!0}]),ue=ae({form:{},queryParams:{pageNum:1,pageSize:10,modelName:void 0,providerId:void 0,status:void 0,deptId:void 0},rules:{modelName:[{required:!0,message:"\u5927\u6A21\u578B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:255,message:"\u5927\u6A21\u578B\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 255 \u4E4B\u95F4",trigger:"blur"}],providerCode:[{required:!0,message:"\u6240\u5C5E\u63D0\u4F9B\u5546\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],modelType:[{required:!0,message:"\u6240\u5C5E\u6A21\u578B\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiKey:[{required:!0,message:"API \u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiUrl:[{required:!0,message:"API \u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],model:[{required:!0,message:"\u6A21\u578B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:m,form:n,rules:ie}=xe(ue);function V(){K.value=!0,Le(b.addDateRange(m.value,G.value)).then(d=>{K.value=!1,O.value=d.rows,R.value=d.total})}function L(){console.log(m),m.value.pageNum=1,V()}function se(){G.value=[],b.resetForm("queryRef"),m.value.modelName=void 0,m.value.providerId=void 0,b.$refs.deptTreeRef.setCurrentKey(null),L()}function W(d){const a=d.id||a.value;b.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5927\u6A21\u578B\u7F16\u53F7\u4E3A"'+a+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Te(a)}).then(()=>{V(),b.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function pe(d){Q.value=d.map(a=>a.id),j.value=d.length!=1,H.value=!d.length}function D(){n.value={id:void 0,icon:void 0,modelName:void 0,description:void 0,providerId:void 0,apiKey:void 0,apiUrl:void 0,model:void 0},b.resetForm("LlmModelRef")}function me(){k.value=!1,D()}function fe(){D(),k.value=!0,q.value="\u6DFB\u52A0\u5927\u6A21\u578B"}function X(d){D();const a=d.id||Q.value;Se(a).then(_=>{n.value=_.data,n.value.id=a,k.value=!0,q.value="\u4FEE\u6539\u5927\u6A21\u578B"})}function ce(){b.$refs.LlmModelRef.validate(d=>{d&&(n.value.id!=null?Ke(n.value).then(a=>{b.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),k.value=!1,V()}):Ae(n.value).then(a=>{b.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),k.value=!1,V()}))})}function ve(){Re().then(d=>{P.value=d.data}),qe().then(d=>{J.value=d.data})}function _e(d){console.log("value = "+d);let a=null;for(let _=0;_<P.value.length;_++){const f=P.value[_];if(f.code===d){console.log("\u627E\u5230\u5339\u914D\u9879:",f),a=f;break}}a&&(n.value.apiUrl=a.url,F.value=a.modelList,console.log("form.apiUrl = "+n.apiUrl+"baseModelOptions = "+F))}return V(),ve(),(d,a)=>{const _=i("el-input"),f=i("el-form-item"),y=i("el-button"),Y=i("el-form"),g=i("el-col"),ge=i("right-toolbar"),h=i("el-row"),I=i("el-table-column"),Z=i("el-tooltip"),ye=i("el-table"),be=i("pagination"),$=i("el-radio"),ee=i("el-radio-group"),le=i("el-option"),oe=i("el-select"),he=i("el-dialog"),S=te("hasPermi"),we=te("loading");return u(),A("div",De,[l(h,{gutter:20},{default:e(()=>[l(g,{span:24,xs:24},{default:e(()=>[x(l(Y,{model:t(m),ref:"queryRef",inline:!0,"label-width":"68px"},{default:e(()=>[l(f,{label:"\u6A21\u578B\u540D\u79F0",prop:"modelName"},{default:e(()=>[l(_,{modelValue:t(m)["condition[modelName|like]"],"onUpdate:modelValue":a[0]||(a[0]=o=>t(m)["condition[modelName|like]"]=o),placeholder:"\u8BF7\u8F93\u5165\u5927\u6A21\u578B\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:de(L,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(f,{label:"\u6A21\u578B\u7C7B\u578B",prop:"providerId"},{default:e(()=>[l(_,{modelValue:t(m)["condition[providerId|like]"],"onUpdate:modelValue":a[1]||(a[1]=o=>t(m)["condition[providerId|like]"]=o),placeholder:"\u8BF7\u8F93\u5165\u6240\u5C5E\u63D0\u4F9B\u5546\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:de(L,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(f,null,{default:e(()=>[l(y,{type:"primary",icon:"Search",onClick:L},{default:e(()=>[s("\u641C\u7D22")]),_:1}),l(y,{icon:"Refresh",onClick:se},{default:e(()=>[s("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[ne,T.value]]),l(h,{gutter:10,class:"mb8"},{default:e(()=>[l(g,{span:1.5},{default:e(()=>[l(y,{type:"primary",plain:"",icon:"Plus",onClick:fe},{default:e(()=>[s("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),l(g,{span:1.5},{default:e(()=>[x((u(),c(y,{type:"success",plain:"",icon:"Edit",disabled:j.value,onClick:X},{default:e(()=>[s("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[S,["system:LlmModel:edit"]]])]),_:1},8,["span"]),l(g,{span:1.5},{default:e(()=>[x((u(),c(y,{type:"danger",plain:"",icon:"Delete",disabled:H.value,onClick:W},{default:e(()=>[s("\u5220\u9664 ")]),_:1},8,["disabled"])),[[S,["system:LlmModel:remove"]]])]),_:1},8,["span"]),l(ge,{showSearch:T.value,"onUpdate:showSearch":a[2]||(a[2]=o=>T.value=o),onQueryTable:V,columns:U.value},null,8,["showSearch","columns"])]),_:1}),x((u(),c(ye,{data:O.value,onSelectionChange:pe},{default:e(()=>[l(I,{type:"selection",width:"50",align:"center"}),U.value[0].visible?(u(),c(I,{label:"\u540D\u79F0",align:"left",key:"icon",prop:"icon",width:"200px","show-overflow-tooltip":!0},{default:e(o=>[z("img",{src:"http://data.linesno.com/icons/llm/"+o.row.providerCode+".png",alt:"\u56FE\u6807",style:{width:"45px",height:"45px","border-radius":"50%"}},null,8,$e),s(" "+N(o.row.modelName),1)]),_:1})):w("",!0),U.value[6].visible?(u(),c(I,{label:"\u6A21\u578B\u540D\u79F0",align:"left",key:"model",prop:"model","show-overflow-tooltip":!0})):w("",!0),U.value[5].visible?(u(),c(I,{label:"API \u5730\u5740",align:"left",key:"apiUrl",prop:"apiUrl","show-overflow-tooltip":!0})):w("",!0),U.value[2].visible?(u(),c(I,{label:"\u5927\u6A21\u578B\u63CF\u8FF0",align:"center",key:"description",prop:"description","show-overflow-tooltip":!0},{default:e(o=>[s(N(o.row.modelPermission=="org"?"\u7EC4\u7EC7":"\u79C1\u6709"),1)]),_:1})):w("",!0),U.value[4].visible?(u(),c(I,{label:"\u6A21\u578B\u7C7B\u578B",align:"center",key:"apiKey",prop:"apiKey"},{default:e(o=>[l(y,{type:"primary",text:"",bg:""},{default:e(()=>[Be,s(" "+N(o.row.modelType),1)]),_:2},1024)]),_:1})):w("",!0),U.value[7].visible?(u(),c(I,{key:5,label:"\u64CD\u4F5C",align:"center",width:"100","class-name":"small-padding fixed-width"},{default:e(o=>[o.row.id!==1?(u(),c(Z,{key:0,content:"\u67E5\u770B",placement:"top"},{default:e(()=>[x(l(y,{link:"",type:"primary",icon:"Edit",onClick:ke=>X(o.row)},null,8,["onClick"]),[[S,["system:LlmModel:edit"]]])]),_:2},1024)):w("",!0),o.row.id!==1?(u(),c(Z,{key:1,content:"\u5220\u9664",placement:"top"},{default:e(()=>[x(l(y,{link:"",type:"primary",icon:"Delete",onClick:ke=>W(o.row)},null,8,["onClick"]),[[S,["system:LlmModel:remove"]]])]),_:2},1024)):w("",!0)]),_:1})):w("",!0)]),_:1},8,["data"])),[[we,K.value]]),x(l(be,{total:R.value,page:t(m).pageNum,"onUpdate:page":a[3]||(a[3]=o=>t(m).pageNum=o),limit:t(m).pageSize,"onUpdate:limit":a[4]||(a[4]=o=>t(m).pageSize=o),onPagination:V},null,8,["total","page","limit"]),[[ne,R.value>0]])]),_:1})]),_:1}),l(he,{title:q.value,modelValue:k.value,"onUpdate:modelValue":a[12]||(a[12]=o=>k.value=o),width:"900px","append-to-body":""},{footer:e(()=>[z("div",Ee,[l(y,{type:"primary",onClick:ce},{default:e(()=>[s("\u786E \u5B9A")]),_:1}),l(y,{onClick:me},{default:e(()=>[s("\u53D6 \u6D88")]),_:1})])]),default:e(()=>[l(Y,{model:t(n),rules:t(ie),ref:"LlmModelRef","label-width":"110px"},{default:e(()=>[l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"\u6A21\u578B\u540D\u79F0",prop:"modelName"},{default:e(()=>[l(_,{modelValue:t(n).modelName,"onUpdate:modelValue":a[5]||(a[5]=o=>t(n).modelName=o),placeholder:"\u8BF7\u8F93\u5165\u5927\u6A21\u578B\u540D\u79F0",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"\u6A21\u578B\u5382\u5546",prop:"providerCode"},{default:e(()=>[l(ee,{modelValue:t(n).providerCode,"onUpdate:modelValue":a[6]||(a[6]=o=>t(n).providerCode=o),onChange:_e},{default:e(()=>[(u(!0),A(B,null,E(P.value,o=>(u(),c($,{value:o.code,label:o.code,key:o.code},{default:e(()=>[s(N(o.displayName),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"\u6A21\u578B\u7C7B\u578B",prop:"modelType"},{default:e(()=>[l(oe,{modelValue:t(n).modelType,"onUpdate:modelValue":a[7]||(a[7]=o=>t(n).modelType=o),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[(u(!0),A(B,null,E(J.value,o=>(u(),c(le,{label:o.displayName,value:o.code,key:o.code},{default:e(()=>[s(N(o.displayName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"\u6743\u9650",prop:"modelPermission"},{default:e(()=>[l(ee,{modelValue:t(n).modelPermission,"onUpdate:modelValue":a[8]||(a[8]=o=>t(n).modelPermission=o)},{default:e(()=>[l($,{value:"person",label:"person"},{default:e(()=>[s("\u79C1\u6709")]),_:1}),l($,{value:"org",label:"org"},{default:e(()=>[s("\u7EC4\u7EC7")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"\u6A21\u578B\u5730\u5740",prop:"apiUrl"},{default:e(()=>[l(_,{modelValue:t(n).apiUrl,"onUpdate:modelValue":a[9]||(a[9]=o=>t(n).apiUrl=o),placeholder:"\u8BF7\u8F93\u5165 API \u5730\u5740",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"ApiKey",prop:"apiKey"},{default:e(()=>[l(_,{modelValue:t(n).apiKey,"onUpdate:modelValue":a[10]||(a[10]=o=>t(n).apiKey=o),placeholder:"\u8BF7\u8F93\u5165 API \u5BC6\u94A5",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(h,null,{default:e(()=>[l(g,{span:24},{default:e(()=>[l(f,{label:"\u57FA\u7840\u6A21\u578B",prop:"model"},{default:e(()=>[l(oe,{modelValue:t(n).model,"onUpdate:modelValue":a[11]||(a[11]=o=>t(n).model=o),"allow-create":"",filterable:"","default-first-option":"",placeholder:"\u8BF7\u9009\u62E9\u57FA\u7840\u6A21\u578B"},{default:e(()=>[(u(!0),A(B,null,E(F.value,o=>(u(),c(le,{label:o.modelName,value:o.modelName,key:o.modelName},{default:e(()=>[s(N(o.modelName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),je=Ue(Oe,[["__scopeId","data-v-f0ad92d9"]]);export{je as default};
