import{E as I,K as le,_ as ye,B as ve,m as Ce,r as s,Q as W,T as ke,R as we,a as i,H as X,o as m,l as xe,d as e,w as l,I as U,f as n,h as Y,j as r,U as Z,c as _,J as ee,e as h,x as T,i as C,z as Ve,A as Se,n as Ae}from"./index.2b31a27b.js";var d="/api/infra/base/im/accountChannel/",K={datatables:d+"datatables",createUrl:d+"add",saveUrl:d+"save",updateUrl:d+"modify",statusUrl:d+"changeStatus",cleanUrl:d+"clean",detailUrl:d+"detail",removeUrl:d+"delete",removeAccountChannel:d+"removeAccountChannel",exportUrl:d+"exportExcel",changeField:d+"changeField",downloadFile:d+"downloadFile",createAccountChannel:d+"createAccountChannel",allMyAccountChannel:d+"allMyAccountChannel",allPublicAccountChannel:d+"allPublicAccountChannel",joinAccountChannel:d+"joinAccountChannel",getDefaultAccountChannelId:d+"getDefaultAccountChannelId",closeAccountChannelSSE:"/v1/api/infra/base/im/sseAccountChannelTask/closeSseConnect",getFlowTaskNotice:"/v1/api/infra/base/im/chat/getFlowTaskNotice"};function Ue(p){return I({url:K.datatables,method:"post",params:p})}function Te(p){return I({url:K.detailUrl+"/"+le(p),method:"get"})}function Ie(p){return I({url:K.saveUrl,method:"post",data:p})}function Ke(p){return I({url:K.updateUrl,method:"put",data:p})}function Re(p){return I({url:K.removeUrl+"/"+le(p),method:"delete"})}const E=p=>(Ve("data-v-b65149cf"),p=p(),Se(),p),Fe={class:"app-container"},qe={style:{"font-size":"15px","font-weight":"500",color:"#3b5998"}},Ne=E(()=>h("i",{class:"fa-solid fa-screwdriver-wrench"},null,-1)),De={style:{"font-size":"13px",color:"#a5a5a5"}},ze={style:{"font-size":"13px",color:"#a5a5a5"}},Pe={class:"dialog-footer"},$e=E(()=>h("div",{class:"el-upload__text"},[r("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),h("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1)),Ee={class:"el-upload__tip text-center"},Be={class:"el-upload__tip"},je=E(()=>h("span",null,"\u4EC5\u5141\u8BB8\u5BFC\u5165xls\u3001xlsx\u683C\u5F0F\u6587\u4EF6\u3002",-1)),Le={class:"dialog-footer"},Qe=ve({name:"AccountChannel"}),Me=Object.assign(Qe,{setup(p){Ce();const{proxy:k}=Ae(),B=s([]),x=s(!1),N=s(!0),R=s(!0),D=s([]),j=s(!0),L=s(!0),z=s(0),P=s(""),Q=s([]);s(""),s(void 0),s(void 0),s([]),s([]);const y=W({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+ke()},url:"/prod-api/system/AccountChannel/importData"}),V=s([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u63D2\u4EF6\u540D\u79F0",visible:!0},{key:2,label:"\u63D2\u4EF6\u7C7B\u578B",visible:!0},{key:3,label:"\u4F7F\u7528\u573A\u666F",visible:!0},{key:4,label:"\u72B6\u6001",visible:!0},{key:5,label:"\u63D2\u4EF6\u63CF\u8FF0",visible:!0},{key:6,label:"\u5E94\u7528\u76EE\u6807",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),te=W({form:{},queryParams:{pageNum:1,pageSize:10,AccountChannelName:void 0,name:void 0,toolType:void 0,status:void 0,deptId:void 0},rules:{applicationId:[{required:!0,message:"\u5E94\u7528\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u63D2\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u63D2\u4EF6\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],toolType:[{required:!0,message:"\u63D2\u4EF6\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],screen:[{required:!0,message:"\u4F7F\u7528\u573A\u666F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],hasStatus:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u63D2\u4EF6\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],target:[{required:!0,message:"\u5E94\u7528\u76EE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:c,form:o,rules:ae}=we(te);function S(){N.value=!0,Ue(k.addDateRange(c.value,Q.value)).then(u=>{N.value=!1,B.value=u.rows,z.value=u.total})}function F(){console.log(c),c.value.pageNum=1,S()}function ne(){Q.value=[],k.resetForm("queryRef"),c.value.name=void 0,c.value.toolType=void 0,k.$refs.deptTreeRef.setCurrentKey(null),F()}function M(u){const a=u.id||D.value;k.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+a+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Re(a)}).then(()=>{S(),k.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function oe(u){D.value=u.map(a=>a.id),j.value=u.length!=1,L.value=!u.length}function $(){o.value={applicationId:void 0,name:void 0,toolType:void 0,screen:void 0,hasStatus:void 0,description:void 0,target:void 0},k.resetForm("AccountChannelRef")}function ue(){x.value=!1,$()}function ie(){$(),x.value=!0,P.value="\u6DFB\u52A0\u5E94\u7528"}function H(u){$();const a=u.id||D.value;Te(a).then(g=>{o.value=g.data,o.value.applicationId=a,x.value=!0,P.value="\u4FEE\u6539\u5E94\u7528"})}function de(){k.$refs.AccountChannelRef.validate(u=>{u&&(o.value.applicationId!=null?Ke(o.value).then(a=>{k.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),x.value=!1,S()}):Ie(o.value).then(a=>{k.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),x.value=!1,S()}))})}return S(),(u,a)=>{const g=i("el-input"),v=i("el-form-item"),f=i("el-button"),J=i("el-form"),b=i("el-col"),se=i("right-toolbar"),w=i("el-row"),A=i("el-table-column"),O=i("el-tooltip"),re=i("el-table"),pe=i("pagination"),G=i("el-dialog"),ce=i("upload-filled"),me=i("el-icon"),fe=i("el-checkbox"),_e=i("el-link"),he=i("el-upload"),q=X("hasPermi"),ge=X("loading");return m(),xe("div",Fe,[e(w,{gutter:20},{default:l(()=>[e(b,{span:24,xs:24},{default:l(()=>[U(e(J,{model:n(c),ref:"queryRef",inline:!0,"label-width":"68px"},{default:l(()=>[e(v,{label:"\u63D2\u4EF6\u540D\u79F0",prop:"name"},{default:l(()=>[e(g,{modelValue:n(c)["condition[name|like]"],"onUpdate:modelValue":a[0]||(a[0]=t=>n(c)["condition[name|like]"]=t),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:Y(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(v,{label:"\u63D2\u4EF6\u7C7B\u578B",prop:"toolType","label-width":"100px"},{default:l(()=>[e(g,{modelValue:n(c)["condition[toolType|like]"],"onUpdate:modelValue":a[1]||(a[1]=t=>n(c)["condition[toolType|like]"]=t),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u7C7B\u578B",clearable:"",style:{width:"240px"},onKeyup:Y(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(v,null,{default:l(()=>[e(f,{type:"primary",icon:"Search",onClick:F},{default:l(()=>[r("\u641C\u7D22")]),_:1}),e(f,{icon:"Refresh",onClick:ne},{default:l(()=>[r("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[Z,n(R)]]),e(w,{gutter:10,class:"mb8"},{default:l(()=>[e(b,{span:1.5},{default:l(()=>[e(f,{type:"primary",plain:"",icon:"Plus",onClick:ie},{default:l(()=>[r("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),e(b,{span:1.5},{default:l(()=>[U((m(),_(f,{type:"success",plain:"",icon:"Edit",disabled:n(j),onClick:H},{default:l(()=>[r("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[q,["system:AccountChannel:edit"]]])]),_:1},8,["span"]),e(b,{span:1.5},{default:l(()=>[U((m(),_(f,{type:"danger",plain:"",icon:"Delete",disabled:n(L),onClick:M},{default:l(()=>[r("\u5220\u9664 ")]),_:1},8,["disabled"])),[[q,["system:AccountChannel:remove"]]])]),_:1},8,["span"]),e(se,{showSearch:n(R),"onUpdate:showSearch":a[2]||(a[2]=t=>ee(R)?R.value=t:null),onQueryTable:S,columns:n(V)},null,8,["showSearch","columns"])]),_:1}),U((m(),_(re,{data:n(B),onSelectionChange:oe},{default:l(()=>[e(A,{type:"selection",width:"50",align:"center"}),n(V)[1].visible?(m(),_(A,{label:"\u63D2\u4EF6\u540D\u79F0",align:"left",key:"name",prop:"name","show-overflow-tooltip":!0},{default:l(t=>[h("div",qe,[Ne,r(" "+T(t.row.name),1)]),h("div",De," \u63D2\u4EF6\u63CF\u8FF0: "+T(t.row.description),1)]),_:1})):C("",!0),n(V)[5].visible?(m(),_(A,{label:"\u63D2\u4EF6\u63CF\u8FF0",align:"left",key:"description",prop:"description","show-overflow-tooltip":!0},{default:l(t=>[h("div",null,T(t.row.description),1),h("div",ze," \u673A\u5668\u4EBAKey: "+T(t.row.robotKey),1)]),_:1})):C("",!0),n(V)[2].visible?(m(),_(A,{label:"\u63D2\u4EF6\u7C7B\u578B",align:"center",key:"toolType",width:"150",prop:"toolType","show-overflow-tooltip":!0})):C("",!0),n(V)[4].visible?(m(),_(A,{label:"\u72B6\u6001",align:"center",key:"hasStatus",width:"80",prop:"hasStatus","show-overflow-tooltip":!0},{default:l(t=>[t.row.hasStauts==="1"?(m(),_(f,{key:0,type:"primary",text:"",bg:"",icon:"Link"},{default:l(()=>[r("\u6B63\u5E38")]),_:1})):C("",!0),t.row.hasStauts==="0"?(m(),_(f,{key:1,type:"danger",text:"",bg:"",icon:"Link"},{default:l(()=>[r("\u5F02\u5E38")]),_:1})):C("",!0)]),_:1})):C("",!0),n(V)[7].visible?(m(),_(A,{key:4,label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:l(t=>[h("span",null,T(u.parseTime(t.row.addTime)),1)]),_:1})):C("",!0),n(V)[8].visible?(m(),_(A,{key:5,label:"\u64CD\u4F5C",align:"center",width:"100","class-name":"small-padding fixed-width"},{default:l(t=>[t.row.applicationId!==1?(m(),_(O,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:l(()=>[U(e(f,{link:"",type:"primary",icon:"Edit",onClick:be=>H(t.row)},null,8,["onClick"]),[[q,["system:AccountChannel:edit"]]])]),_:2},1024)):C("",!0),t.row.applicationId!==1?(m(),_(O,{key:1,content:"\u5220\u9664",placement:"top"},{default:l(()=>[U(e(f,{link:"",type:"primary",icon:"Delete",onClick:be=>M(t.row)},null,8,["onClick"]),[[q,["system:AccountChannel:remove"]]])]),_:2},1024)):C("",!0)]),_:1})):C("",!0)]),_:1},8,["data"])),[[ge,n(N)]]),U(e(pe,{total:n(z),page:n(c).pageNum,"onUpdate:page":a[3]||(a[3]=t=>n(c).pageNum=t),limit:n(c).pageSize,"onUpdate:limit":a[4]||(a[4]=t=>n(c).pageSize=t),onPagination:S},null,8,["total","page","limit"]),[[Z,n(z)>0]])]),_:1})]),_:1}),e(G,{title:n(P),modelValue:n(x),"onUpdate:modelValue":a[12]||(a[12]=t=>ee(x)?x.value=t:null),width:"900px","append-to-body":""},{footer:l(()=>[h("div",Pe,[e(f,{type:"primary",onClick:de},{default:l(()=>[r("\u786E \u5B9A")]),_:1}),e(f,{onClick:ue},{default:l(()=>[r("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(J,{model:n(o),rules:n(ae),ref:"AccountChannelRef","label-width":"80px"},{default:l(()=>[e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u63D2\u4EF6\u540D\u79F0",prop:"name"},{default:l(()=>[e(g,{modelValue:n(o).name,"onUpdate:modelValue":a[5]||(a[5]=t=>n(o).name=t),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u63D2\u4EF6\u7C7B\u578B",prop:"toolType"},{default:l(()=>[e(g,{modelValue:n(o).toolType,"onUpdate:modelValue":a[6]||(a[6]=t=>n(o).toolType=t),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u7C7B\u578B",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u673A\u5668\u4EBAKey",prop:"robotKey"},{default:l(()=>[e(g,{modelValue:n(o).robotKey,"onUpdate:modelValue":a[7]||(a[7]=t=>n(o).robotKey=t),placeholder:"\u8BF7\u8F93\u5165\u673A\u5668\u4EBAKey",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u5173\u8054\u89D2\u8272",prop:"roleId"},{default:l(()=>[e(g,{modelValue:n(o).roleId,"onUpdate:modelValue":a[8]||(a[8]=t=>n(o).roleId=t),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272Id",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u72B6\u6001",prop:"hasStatus"},{default:l(()=>[e(g,{modelValue:n(o).hasStatus,"onUpdate:modelValue":a[9]||(a[9]=t=>n(o).hasStatus=t),placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u4F7F\u7528\u573A\u666F",prop:"screen"},{default:l(()=>[e(g,{modelValue:n(o).screen,"onUpdate:modelValue":a[10]||(a[10]=t=>n(o).screen=t),placeholder:"\u8BF7\u8F93\u5165\u4F7F\u7528\u573A\u666F",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(b,{span:24},{default:l(()=>[e(v,{label:"\u63D2\u4EF6\u63CF\u8FF0",prop:"description"},{default:l(()=>[e(g,{modelValue:n(o).description,"onUpdate:modelValue":a[11]||(a[11]=t=>n(o).description=t),placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u63CF\u8FF0",maxlength:"200"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(G,{title:y.title,modelValue:y.open,"onUpdate:modelValue":a[15]||(a[15]=t=>y.open=t),width:"400px","append-to-body":""},{footer:l(()=>[h("div",Le,[e(f,{type:"primary",onClick:u.submitFileForm},{default:l(()=>[r("\u786E \u5B9A")]),_:1},8,["onClick"]),e(f,{onClick:a[14]||(a[14]=t=>y.open=!1)},{default:l(()=>[r("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(he,{ref:"uploadRef",limit:1,accept:".xlsx, .xls",headers:y.headers,action:y.url+"?updateSupport="+y.updateSupport,disabled:y.isUploading,"on-progress":u.handleFileUploadProgress,"on-success":u.handleFileSuccess,"auto-upload":!1,drag:""},{tip:l(()=>[h("div",Ee,[h("div",Be,[e(fe,{modelValue:y.updateSupport,"onUpdate:modelValue":a[13]||(a[13]=t=>y.updateSupport=t)},null,8,["modelValue"]),r(" \u662F\u5426\u66F4\u65B0\u5DF2\u7ECF\u5B58\u5728\u7684\u5E94\u7528\u6570\u636E ")]),je,e(_e,{type:"primary",underline:!1,style:{"font-size":"12px","vertical-align":"baseline"},onClick:u.importTemplate},{default:l(()=>[r("\u4E0B\u8F7D\u6A21\u677F ")]),_:1},8,["onClick"])])]),default:l(()=>[e(me,{class:"el-icon--upload"},{default:l(()=>[e(ce)]),_:1}),$e]),_:1},8,["headers","action","disabled","on-progress","on-success"])]),_:1},8,["title","modelValue"])])}}}),Je=ye(Me,[["__scopeId","data-v-b65149cf"]]);export{Je as default};
