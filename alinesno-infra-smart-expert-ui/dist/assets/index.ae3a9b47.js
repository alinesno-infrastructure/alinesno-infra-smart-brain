import{l as k}from"./lodash.d9cddd10.js";import{_ as L,r as S,a as f,o as d,l as h,e,D as M,x as N,F as V,C,j as x,i as P,c as $,w as i,d as l,G as A,z as R,A as z}from"./index.2b31a27b.js";const B=m=>(R("data-v-11ba481a"),m=m(),z(),m),T={class:"workflow-node-container"},G={class:"node-title"},H={class:"node-icon"},q={class:"node-name"},J={class:"node-settings"},K={class:"settings-title"},Q=["onClick"],W=B(()=>e("i",{class:"fa-solid fa-trash"},null,-1)),X=[W],Y=["onClick"],Z=B(()=>e("i",{class:"fa-solid fa-file-pdf"},null,-1)),ee=[Z],oe={class:"condition-node-add"},te=B(()=>e("div",{class:"settings-title"},"ELSE",-1)),ne=[te],le={class:"condition-branch-add"},se=B(()=>e("div",{class:"node-output"},[e("div",{class:"output-title"},"\u8F93\u51FA\u53C2\u6570"),e("div",{class:"output-content"}," \u5206\u652F\u540D\u79F0 {branch_name} ")],-1)),ae={__name:"index",props:{properties:{type:Object,default:()=>({})},isSelected:{type:Boolean,default:!1},nodeModel:{type:Object}},setup(m){const n=m,E=[{value:"Option1",label:"Option1"},{value:"Option2",label:"Option2"},{value:"Option3",label:"Option3"},{value:"Option4",label:"Option4"},{value:"Option5",label:"Option5"}],p=S([{conditions:[{variable:"",condition:"",value:""}]}]);n.properties.branch_condition_list||(n.properties.branch_condition_list=[{id:"condition_0",height:100}]);const g=S([]),U=o=>{p.value[o].conditions.push({variable:"",condition:"",value:""})};function F(){if(!n.nodeModel){console.error("Node model is not available.");return}p.value.push({conditions:[{variable:"",condition:"",value:""}]}),A(()=>{const o=k.exports.cloneDeep(n.nodeModel.properties.branch_condition_list),_=g.value[g.value.length-1],s=_?_.offsetHeight:120,v={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(o.length-1),height:s,id:"12312312",condition:"and"};o.splice(o.length-1,0,v);try{j(o,!0,n.nodeModel),k.exports.set(n.nodeModel.properties,"branch_condition_list",o)}catch(c){console.error("Error in addBranch:",c)}})}function j(o,_,s){const v=k.exports.cloneDeep(s.properties.branch_condition_list?s.properties.branch_condition_list:[]),c=o.map((a,y)=>{const b=v.find(O=>O.id===a.id);if(b)return{index:y,height:b.height,id:a.id};if(_)return{index:y,height:12,id:a.id}}).filter(a=>a);try{k.exports.set(s.properties,"branch_condition_list",c),s.refreshBranch()}catch(a){console.error("Error in refreshBranchAnchor:",a)}}const D=(o,_)=>{p.value[o].conditions.length>1&&p.value[o].conditions.splice(_,1)},I=o=>{p.value.length>1&&(p.value.splice(o,1),n.properties.branch_condition_list.splice(o,1),n.nodeModel&&n.nodeModel.refreshBranch())};return(o,_)=>{const s=f("el-option"),v=f("el-select"),c=f("el-col"),a=f("el-input"),y=f("el-row"),b=f("el-button");return d(),h("div",T,[e("div",G,[e("div",H,[e("i",{class:M(n.properties.icon)},null,2)]),e("div",q,N(n.properties.stepName),1)]),e("div",J,[e("div",null,[(d(!0),h(V,null,C(p.value,(O,u)=>(d(),h("div",{key:u,ref_for:!0,ref_key:"conditionPanelsRef",ref:g,class:"settings-form condition-panel"},[e("div",K,[x(N(u===0?"IF":`ELSE IF ${u}`)+" ",1),u>0?(d(),h("span",{key:0,class:"branch-remove-icon",onClick:r=>I(u)},X,8,Q)):P("",!0)]),(d(!0),h(V,null,C(O.conditions,(r,w)=>(d(),$(y,{key:w,style:{"margin-bottom":"5px"}},{default:i(()=>[l(c,{span:10},{default:i(()=>[l(v,{modelValue:r.variable,"onUpdate:modelValue":t=>r.variable=t,placeholder:"\u8BF7\u9009\u62E9\u53D8\u91CF",style:{"margin-right":"8px"}},{default:i(()=>[(d(),h(V,null,C(E,t=>l(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(c,{span:6},{default:i(()=>[l(v,{modelValue:r.condition,"onUpdate:modelValue":t=>r.condition=t,placeholder:"\u8BF7\u9009\u62E9\u6761\u4EF6",style:{"margin-right":"8px"}},{default:i(()=>[(d(),h(V,null,C(E,t=>l(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(c,{span:7},{default:i(()=>[l(a,{modelValue:r.value,"onUpdate:modelValue":t=>r.value=t,placeholder:"\u8BF7\u8F93\u5165\u503C"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(c,{span:1},{default:i(()=>[e("div",{class:"condition-node-remove-icon",onClick:t=>D(u,w)},ee,8,Y)]),_:2},1024)]),_:2},1024))),128)),e("div",oe,[l(b,{type:"primary",text:"",bg:"",onClick:r=>U(u)},{default:i(()=>[x(" + \u6DFB\u52A0\u6761\u4EF6 ")]),_:2},1032,["onClick"])])],512))),128)),e("div",{ref_key:"conditionPanelsRef",ref:g,class:"settings-form condition-panel"},ne,512)]),e("div",le,[l(b,{type:"primary",text:"",bg:"",onClick:F},{default:i(()=>[x(" + \u6DFB\u52A0\u5206\u652F ")]),_:1})])]),se])}}},re=L(ae,[["__scopeId","data-v-11ba481a"]]);export{re as default};
