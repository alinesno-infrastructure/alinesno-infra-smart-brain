import{_ as Ue,B as Ie,m as Re,r as f,Q as Y,T as Fe,R as qe,v as Pe,a as i,H as Z,o as s,l as ee,d as l,w as e,I as x,f as a,h as le,j as u,U as te,c,J as oe,e as m,i as y,x as C,F as $e,C as ze,z as Ne,A as De,n as Be}from"./index.2b31a27b.js";import{l as Ae,d as Ke,c as Ee,g as Qe,b as je,e as Le}from"./tool.2b8b43d0.js";const B=I=>(Ne("data-v-46d997b0"),I=I(),De(),I),Me={class:"app-container"},He={class:"role-icon"},Je=["src"],Oe={style:{"font-size":"15px","font-weight":"500",color:"#3b5998"}},Ge={style:{"font-size":"13px",color:"#a5a5a5"}},We=B(()=>m("i",{class:"fa-solid fa-code"},null,-1)),Xe={class:"dialog-footer"},Ye=B(()=>m("div",{class:"el-upload__text"},[u("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),m("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1)),Ze={class:"el-upload__tip text-center"},el={class:"el-upload__tip"},ll=B(()=>m("span",null,"\u4EC5\u5141\u8BB8\u5BFC\u5165xls\u3001xlsx\u683C\u5F0F\u6587\u4EF6\u3002",-1)),tl={class:"dialog-footer"},ol=Ie({name:"Tool"}),al=Object.assign(ol,{setup(I){const ae=Re(),{proxy:b}=Be(),A=f([]),k=f(!1),P=f(!0),R=f(!0),$=f([]),K=f(!0),E=f(!0),z=f(0),N=f(""),Q=f([]),j=f([]),L=f([{key:"utility-tools",name:"\u5B9E\u7528\u5DE5\u5177"},{key:"web-search",name:"\u7F51\u9875\u641C\u7D22"},{key:"project-management",name:"\u9879\u76EE\u7BA1\u7406"}]),d=Y({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Fe()},url:"/prod-api/v1/api/infra/base/im/chat/importData",display:"/prod-api/v1/api/infra/base/im/chat/displayImage/"}),h=f([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u5DE5\u5177\u540D\u79F0",visible:!0},{key:2,label:"\u5DE5\u5177\u7C7B\u578B",visible:!0},{key:3,label:"\u4F7F\u7528\u573A\u666F",visible:!0},{key:4,label:"\u72B6\u6001",visible:!0},{key:5,label:"\u5DE5\u5177\u63CF\u8FF0",visible:!0},{key:6,label:"\u5E94\u7528\u76EE\u6807",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),ne=Y({form:{},queryParams:{pageNum:1,pageSize:10,ToolName:void 0,name:void 0,toolType:void 0,status:void 0,deptId:void 0},rules:{applicationId:[{required:!0,message:"\u5E94\u7528\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5DE5\u5177\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u5DE5\u5177\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],toolType:[{required:!0,message:"\u5DE5\u5177\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],screen:[{required:!0,message:"\u4F7F\u7528\u573A\u666F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],hasStatus:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u5DE5\u5177\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],target:[{required:!0,message:"\u5E94\u7528\u76EE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:p,form:r,rules:ie}=qe(ne);function T(){P.value=!0,Ae(b.addDateRange(p.value,Q.value)).then(n=>{P.value=!1,A.value=n.rows,z.value=n.total})}const se=(n,o)=>{j.value=n.data?n.data.split(",").map(_=>({url:d.display+_})):[],r.value.icon=n.data,console.log("form.icon = "+r.value.icon)},de=n=>n.size/1024/1024>2?(ElMessage.error("Avatar picture size can not exceed 2MB!"),!1):!0;function re(n){ae.push({path:"/expert/smart/assistant/tool/script",query:{toolId:n.id}})}const ue=Pe(()=>n=>{const o=L.value.find(_=>_.key===n);return o?o.name:"\u672A\u77E5\u7C7B\u578B"});function F(){console.log(p),p.value.pageNum=1,T()}function pe(){Q.value=[],b.resetForm("queryRef"),p.value.name=void 0,p.value.toolType=void 0,b.$refs.deptTreeRef.setCurrentKey(null),F()}function M(n){const o=n.id||$.value;b.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+o+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Ke(o)}).then(()=>{T(),b.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}const ce=async(n,o,_)=>{const v=await Ee({field:n,value:o?1:0,id:_}).catch(()=>{});v&&v.code==200&&T()};function me(n){$.value=n.map(o=>o.id),K.value=n.length!=1,E.value=!n.length}function D(){r.value={applicationId:void 0,name:void 0,toolType:void 0,screen:void 0,hasStatus:void 0,description:void 0,target:void 0},b.resetForm("ToolRef")}function fe(){k.value=!1,D()}function _e(){D(),k.value=!0,N.value="\u6DFB\u52A0\u5E94\u7528"}function H(n){D();const o=n.id||$.value;Qe(o).then(_=>{r.value=_.data,r.value.applicationId=o,k.value=!0,N.value="\u4FEE\u6539\u5E94\u7528"})}function ge(){b.$refs.ToolRef.validate(n=>{n&&(r.value.applicationId!=null?je(r.value).then(o=>{b.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),k.value=!1,T()}):Le(r.value).then(o=>{b.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),k.value=!1,T()}))})}return T(),(n,o)=>{const _=i("el-input"),v=i("el-form-item"),g=i("el-button"),J=i("el-form"),S=i("el-col"),ve=i("right-toolbar"),V=i("el-row"),w=i("el-table-column"),ye=i("el-switch"),O=i("el-tooltip"),be=i("el-table"),he=i("pagination"),we=i("Plus"),G=i("el-icon"),W=i("el-upload"),ke=i("el-radio"),Te=i("el-radio-group"),X=i("el-dialog"),Se=i("upload-filled"),xe=i("el-checkbox"),Ve=i("el-link"),q=Z("hasPermi"),Ce=Z("loading");return s(),ee("div",Me,[l(V,{gutter:20},{default:e(()=>[l(S,{span:24,xs:24},{default:e(()=>[x(l(J,{model:a(p),ref:"queryRef",inline:!0,"label-width":"68px"},{default:e(()=>[l(v,{label:"\u5DE5\u5177\u540D\u79F0",prop:"name"},{default:e(()=>[l(_,{modelValue:a(p)["condition[name|like]"],"onUpdate:modelValue":o[0]||(o[0]=t=>a(p)["condition[name|like]"]=t),placeholder:"\u8BF7\u8F93\u5165\u5DE5\u5177\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:le(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(v,{label:"\u5DE5\u5177\u7C7B\u578B",prop:"toolType","label-width":"100px"},{default:e(()=>[l(_,{modelValue:a(p)["condition[toolType|like]"],"onUpdate:modelValue":o[1]||(o[1]=t=>a(p)["condition[toolType|like]"]=t),placeholder:"\u8BF7\u8F93\u5165\u5DE5\u5177\u7C7B\u578B",clearable:"",style:{width:"240px"},onKeyup:le(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(v,null,{default:e(()=>[l(g,{type:"primary",icon:"Search",onClick:F},{default:e(()=>[u("\u641C\u7D22")]),_:1}),l(g,{icon:"Refresh",onClick:pe},{default:e(()=>[u("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[te,a(R)]]),l(V,{gutter:10,class:"mb8"},{default:e(()=>[l(S,{span:1.5},{default:e(()=>[l(g,{type:"primary",plain:"",icon:"Plus",onClick:_e},{default:e(()=>[u("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),l(S,{span:1.5},{default:e(()=>[x((s(),c(g,{type:"success",plain:"",icon:"Edit",disabled:a(K),onClick:H},{default:e(()=>[u("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[q,["system:Tool:edit"]]])]),_:1},8,["span"]),l(S,{span:1.5},{default:e(()=>[x((s(),c(g,{type:"danger",plain:"",icon:"Delete",disabled:a(E),onClick:M},{default:e(()=>[u("\u5220\u9664 ")]),_:1},8,["disabled"])),[[q,["system:Tool:remove"]]])]),_:1},8,["span"]),l(ve,{showSearch:a(R),"onUpdate:showSearch":o[2]||(o[2]=t=>oe(R)?R.value=t:null),onQueryTable:T,columns:a(h)},null,8,["showSearch","columns"])]),_:1}),x((s(),c(be,{data:a(A),onSelectionChange:me},{default:e(()=>[l(w,{type:"selection",width:"50",align:"center"}),a(h)[0].visible?(s(),c(w,{key:0,label:"\u56FE\u6807",align:"center",width:"60px",prop:"icon"},{default:e(t=>[m("div",He,[m("img",{src:n.imagePath(t.row.icon),style:{"border-radius":"5px"}},null,8,Je)])]),_:1})):y("",!0),a(h)[1].visible?(s(),c(w,{label:"\u5DE5\u5177\u540D\u79F0",align:"left",key:"name",width:"250",prop:"name","show-overflow-tooltip":!0},{default:e(t=>[m("div",Oe,C(t.row.name),1),m("div",Ge," \u6B21\u6570: "+C(t.row.useCount),1)]),_:1})):y("",!0),a(h)[5].visible?(s(),c(w,{label:"\u5DE5\u5177\u63CF\u8FF0",align:"left",key:"description",prop:"description","show-overflow-tooltip":!0},{default:e(t=>[m("div",null,C(t.row.description),1)]),_:1})):y("",!0),a(h)[2].visible?(s(),c(w,{label:"\u5DE5\u5177\u7C7B\u578B",align:"center",key:"toolType",width:"150",prop:"toolType","show-overflow-tooltip":!0},{default:e(t=>[u(C(a(ue)(t.row.toolType)),1)]),_:1})):y("",!0),a(h)[6].visible?(s(),c(w,{label:"\u811A\u672C",align:"center",width:"110",key:"target",prop:"target","show-overflow-tooltip":!0},{default:e(t=>[l(g,{type:"primary",text:"",onClick:U=>re(t.row)},{default:e(()=>[We,u("\u811A\u672C ")]),_:2},1032,["onClick"])]),_:1})):y("",!0),a(h)[1].visible?(s(),c(w,{label:"\u72B6\u6001",align:"center",width:"100",key:"hasStatus",prop:"hasStatus","show-overflow-tooltip":!0},{default:e(t=>[l(ye,{modelValue:t.row.hasStatus,"onUpdate:modelValue":U=>t.row.hasStatus=U,"active-value":0,"inactive-value":1,onChange:U=>ce("hasStatus",t.row.hasStatus,t.row.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):y("",!0),a(h)[7].visible?(s(),c(w,{key:6,label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:e(t=>[m("span",null,C(n.parseTime(t.row.addTime)),1)]),_:1})):y("",!0),a(h)[8].visible?(s(),c(w,{key:7,label:"\u64CD\u4F5C",align:"center",width:"100","class-name":"small-padding fixed-width"},{default:e(t=>[t.row.applicationId!==1?(s(),c(O,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:e(()=>[x(l(g,{link:"",type:"primary",icon:"Edit",onClick:U=>H(t.row)},null,8,["onClick"]),[[q,["system:Tool:edit"]]])]),_:2},1024)):y("",!0),t.row.applicationId!==1?(s(),c(O,{key:1,content:"\u5220\u9664",placement:"top"},{default:e(()=>[x(l(g,{link:"",type:"primary",icon:"Delete",onClick:U=>M(t.row)},null,8,["onClick"]),[[q,["system:Tool:remove"]]])]),_:2},1024)):y("",!0)]),_:1})):y("",!0)]),_:1},8,["data"])),[[Ce,a(P)]]),x(l(he,{total:a(z),page:a(p).pageNum,"onUpdate:page":o[3]||(o[3]=t=>a(p).pageNum=t),limit:a(p).pageSize,"onUpdate:limit":o[4]||(o[4]=t=>a(p).pageSize=t),onPagination:T},null,8,["total","page","limit"]),[[te,a(z)>0]])]),_:1})]),_:1}),l(X,{title:a(N),modelValue:a(k),"onUpdate:modelValue":o[8]||(o[8]=t=>oe(k)?k.value=t:null),width:"900px","append-to-body":""},{footer:e(()=>[m("div",Xe,[l(g,{type:"primary",onClick:ge},{default:e(()=>[u("\u786E \u5B9A")]),_:1}),l(g,{onClick:fe},{default:e(()=>[u("\u53D6 \u6D88")]),_:1})])]),default:e(()=>[l(J,{model:a(r),rules:a(ie),ref:"ToolRef","label-width":"80px"},{default:e(()=>[l(V,null,{default:e(()=>[l(S,{span:24,class:"editor-after-div"},{default:e(()=>[l(v,{label:"\u56FE\u6807",prop:"icon"},{default:e(()=>[l(W,{"file-list":a(j),action:d.url+"?type=img&updateSupport="+d.updateSupport,"list-type":"picture-card","auto-upload":!0,"on-success":se,"before-upload":de,headers:d.headers,disabled:d.isUploading,"on-progress":n.handleFileUploadProgress},{default:e(()=>[l(G,{class:"avatar-uploader-icon"},{default:e(()=>[l(we)]),_:1})]),_:1},8,["file-list","action","headers","disabled","on-progress"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:e(()=>[l(S,{span:24},{default:e(()=>[l(v,{label:"\u5DE5\u5177\u7C7B\u578B",prop:"toolType"},{default:e(()=>[l(Te,{modelValue:a(r).toolType,"onUpdate:modelValue":o[5]||(o[5]=t=>a(r).toolType=t)},{default:e(()=>[(s(!0),ee($e,null,ze(a(L),t=>(s(),c(ke,{key:t.key,label:t.key},{default:e(()=>[u(C(t.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:e(()=>[l(S,{span:24},{default:e(()=>[l(v,{label:"\u540D\u79F0",prop:"name"},{default:e(()=>[l(_,{modelValue:a(r).name,"onUpdate:modelValue":o[6]||(o[6]=t=>a(r).name=t),placeholder:"\u8BF7\u8F93\u5165\u5DE5\u5177\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:e(()=>[l(S,{span:24},{default:e(()=>[l(v,{label:"\u63CF\u8FF0",prop:"description"},{default:e(()=>[l(_,{type:"textarea",modelValue:a(r).description,"onUpdate:modelValue":o[7]||(o[7]=t=>a(r).description=t),rows:3,placeholder:"\u5DE5\u5177\u63CF\u8FF0\u4FE1\u606F",maxlength:"250"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(X,{title:d.title,modelValue:d.open,"onUpdate:modelValue":o[11]||(o[11]=t=>d.open=t),width:"400px","append-to-body":""},{footer:e(()=>[m("div",tl,[l(g,{type:"primary",onClick:n.submitFileForm},{default:e(()=>[u("\u786E \u5B9A")]),_:1},8,["onClick"]),l(g,{onClick:o[10]||(o[10]=t=>d.open=!1)},{default:e(()=>[u("\u53D6 \u6D88")]),_:1})])]),default:e(()=>[l(W,{ref:"uploadRef",limit:1,accept:".xlsx, .xls",headers:d.headers,action:d.url+"?updateSupport="+d.updateSupport,disabled:d.isUploading,"on-progress":n.handleFileUploadProgress,"on-success":n.handleFileSuccess,"auto-upload":!1,drag:""},{tip:e(()=>[m("div",Ze,[m("div",el,[l(xe,{modelValue:d.updateSupport,"onUpdate:modelValue":o[9]||(o[9]=t=>d.updateSupport=t)},null,8,["modelValue"]),u(" \u662F\u5426\u66F4\u65B0\u5DF2\u7ECF\u5B58\u5728\u7684\u5E94\u7528\u6570\u636E ")]),ll,l(Ve,{type:"primary",underline:!1,style:{"font-size":"12px","vertical-align":"baseline"},onClick:n.importTemplate},{default:e(()=>[u("\u4E0B\u8F7D\u6A21\u677F ")]),_:1},8,["onClick"])])]),default:e(()=>[l(G,{class:"el-icon--upload"},{default:e(()=>[l(Se)]),_:1}),Ye]),_:1},8,["headers","action","disabled","on-progress","on-success"])]),_:1},8,["title","modelValue"])])}}}),sl=Ue(al,[["__scopeId","data-v-46d997b0"]]);export{sl as default};
