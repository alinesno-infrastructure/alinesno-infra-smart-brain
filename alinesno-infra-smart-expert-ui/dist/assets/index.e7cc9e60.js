import{E as A,K as Z,B as be,m as ve,r,Q as G,T as he,R as ye,a as d,H as M,o as u,l as we,d as e,w as l,I as S,f as a,h as W,j as m,U as X,c as p,J as Y,i as f,e as U,x as ke,n as Ne}from"./index.2b31a27b.js";var g="/api/infra/smart/assistant/requestRecord/",R={datatables:g+"datatables",createUrl:g+"add",saveUrl:g+"save",updateUrl:g+"modify",statusUrl:g+"changeStatus",cleanUrl:g+"clean",detailUrl:g+"detail",removeUrl:g+"delete",exportUrl:g+"exportExcel",changeField:g+"changeField",downloadFile:g+"downloadFile"};function Ve(_){return A({url:R.datatables,method:"post",params:_})}function xe(_){return A({url:R.detailUrl+"/"+Z(_),method:"get"})}function Ue(_){return A({url:R.saveUrl,method:"post",data:_})}function Ce(_){return A({url:R.updateUrl,method:"put",data:_})}function Se(_){return A({url:R.removeUrl+"/"+Z(_),method:"delete"})}const Ae={class:"app-container"},Re={class:"dialog-footer"},Pe=U("div",{class:"el-upload__text"},[m("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),U("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1),qe={class:"el-upload__tip text-center"},Fe={class:"el-upload__tip"},Ie=U("span",null,"\u4EC5\u5141\u8BB8\u5BFC\u5165xls\u3001xlsx\u683C\u5F0F\u6587\u4EF6\u3002",-1),Te={class:"dialog-footer"},$e=be({name:"Application"}),Ke=Object.assign($e,{setup(_){ve();const{proxy:k}=Ne(),B=r([]),V=r(!1),I=r(!0),P=r(!0),T=r([]),E=r(!0),z=r(!0),$=r(0),D=r(""),Q=r([]);r(""),r(void 0),r(void 0),r([]),r([]);const b=G({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+he()},url:"/prod-api/system/Application/importData"}),v=r([{key:0,label:"\u56FE\u6807",visible:!0},{key:1,label:"\u5E94\u7528\u540D\u79F0",visible:!0},{key:2,label:"\u663E\u793A\u540D\u79F0",visible:!0},{key:3,label:"\u6240\u5C5E\u9886\u57DF",visible:!0},{key:4,label:"\u57DF\u540D",visible:!0},{key:5,label:"\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84",visible:!0},{key:6,label:"\u5E94\u7528\u76EE\u6807",visible:!0},{key:7,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:8,label:"\u7F16\u8F91",visible:!0}]),ee=G({form:{},queryParams:{pageNum:1,pageSize:10,ApplicationName:void 0,applicationName:void 0,showName:void 0,status:void 0,deptId:void 0},rules:{applicationId:[{required:!0,message:"\u5E94\u7528\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],applicationName:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u5E94\u7528\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],showName:[{required:!0,message:"\u663E\u793A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],domain:[{required:!0,message:"\u6240\u5C5E\u9886\u57DF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],domainName:[{required:!0,message:"\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],storagePath:[{required:!0,message:"\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],target:[{required:!0,message:"\u5E94\u7528\u76EE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:s,form:n,rules:le}=ye(ee);function C(){I.value=!0,Ve(k.addDateRange(s.value,Q.value)).then(i=>{I.value=!1,B.value=i.rows,$.value=i.total})}function q(){console.log(s),s.value.pageNum=1,C()}function ae(){Q.value=[],k.resetForm("queryRef"),s.value.applicationName=void 0,s.value.showName=void 0,k.$refs.deptTreeRef.setCurrentKey(null),q()}function j(i){const t=i.id||T.value;k.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5E94\u7528\u7F16\u53F7\u4E3A"'+t+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return Se(t)}).then(()=>{C(),k.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function te(i){T.value=i.map(t=>t.id),E.value=i.length!=1,z.value=!i.length}function K(){n.value={applicationId:void 0,applicationName:void 0,showName:void 0,domain:void 0,domainName:void 0,storagePath:void 0,target:void 0},k.resetForm("ApplicationRef")}function oe(){V.value=!1,K()}function ne(){K(),V.value=!0,D.value="\u6DFB\u52A0\u5E94\u7528"}function L(i){K();const t=i.id||T.value;xe(t).then(h=>{n.value=h.data,n.value.applicationId=t,V.value=!0,D.value="\u4FEE\u6539\u5E94\u7528"})}function ie(){k.$refs.ApplicationRef.validate(i=>{i&&(n.value.applicationId!=null?Ce(n.value).then(t=>{k.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),V.value=!1,C()}):Ue(n.value).then(t=>{k.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),V.value=!1,C()}))})}return C(),(i,t)=>{const h=d("el-input"),N=d("el-form-item"),c=d("el-button"),H=d("el-form"),y=d("el-col"),de=d("right-toolbar"),x=d("el-row"),w=d("el-table-column"),J=d("el-tooltip"),re=d("el-table"),ue=d("pagination"),O=d("el-dialog"),se=d("upload-filled"),pe=d("el-icon"),me=d("el-checkbox"),ce=d("el-link"),fe=d("el-upload"),F=M("hasPermi"),ge=M("loading");return u(),we("div",Ae,[e(x,{gutter:20},{default:l(()=>[e(y,{span:24,xs:24},{default:l(()=>[S(e(H,{model:a(s),ref:"queryRef",inline:!0,"label-width":"68px"},{default:l(()=>[e(N,{label:"\u5E94\u7528\u540D\u79F0",prop:"applicationName"},{default:l(()=>[e(h,{modelValue:a(s)["condition[applicationName|like]"],"onUpdate:modelValue":t[0]||(t[0]=o=>a(s)["condition[applicationName|like]"]=o),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:W(q,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,{label:"\u663E\u793A\u540D\u79F0",prop:"showName","label-width":"100px"},{default:l(()=>[e(h,{modelValue:a(s)["condition[showName|like]"],"onUpdate:modelValue":t[1]||(t[1]=o=>a(s)["condition[showName|like]"]=o),placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:W(q,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,null,{default:l(()=>[e(c,{type:"primary",icon:"Search",onClick:q},{default:l(()=>[m("\u641C\u7D22")]),_:1}),e(c,{icon:"Refresh",onClick:ae},{default:l(()=>[m("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[X,a(P)]]),e(x,{gutter:10,class:"mb8"},{default:l(()=>[e(y,{span:1.5},{default:l(()=>[e(c,{type:"primary",plain:"",icon:"Plus",onClick:ne},{default:l(()=>[m("\u65B0\u589E ")]),_:1})]),_:1},8,["span"]),e(y,{span:1.5},{default:l(()=>[S((u(),p(c,{type:"success",plain:"",icon:"Edit",disabled:a(E),onClick:L},{default:l(()=>[m("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[F,["system:Application:edit"]]])]),_:1},8,["span"]),e(y,{span:1.5},{default:l(()=>[S((u(),p(c,{type:"danger",plain:"",icon:"Delete",disabled:a(z),onClick:j},{default:l(()=>[m("\u5220\u9664 ")]),_:1},8,["disabled"])),[[F,["system:Application:remove"]]])]),_:1},8,["span"]),e(de,{showSearch:a(P),"onUpdate:showSearch":t[2]||(t[2]=o=>Y(P)?P.value=o:null),onQueryTable:C,columns:a(v)},null,8,["showSearch","columns"])]),_:1}),S((u(),p(re,{data:a(B),onSelectionChange:te},{default:l(()=>[e(w,{type:"selection",width:"50",align:"center"}),a(v)[0].visible?(u(),p(w,{key:0,label:"\u56FE\u6807",align:"center",width:"55px",prop:"icon"})):f("",!0),a(v)[1].visible?(u(),p(w,{label:"\u5E94\u7528\u540D\u79F0",align:"center",key:"applicationName",prop:"applicationName","show-overflow-tooltip":!0})):f("",!0),a(v)[2].visible?(u(),p(w,{label:"\u663E\u793A\u540D\u79F0",align:"center",key:"showName",prop:"showName","show-overflow-tooltip":!0})):f("",!0),a(v)[3].visible?(u(),p(w,{label:"\u6240\u5C5E\u9886\u57DF",align:"center",key:"domain",prop:"domain","show-overflow-tooltip":!0})):f("",!0),a(v)[4].visible?(u(),p(w,{label:"\u57DF\u540D",align:"center",key:"domainName",prop:"domainName","show-overflow-tooltip":!0})):f("",!0),a(v)[5].visible?(u(),p(w,{label:"\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84",align:"center",key:"storagePath",prop:"storagePath","show-overflow-tooltip":!0})):f("",!0),a(v)[6].visible?(u(),p(w,{label:"\u5E94\u7528\u76EE\u6807",align:"center",key:"target",prop:"target","show-overflow-tooltip":!0})):f("",!0),a(v)[7].visible?(u(),p(w,{key:7,label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"addTime",width:"160"},{default:l(o=>[U("span",null,ke(i.parseTime(o.row.addTime)),1)]),_:1})):f("",!0),a(v)[8].visible?(u(),p(w,{key:8,label:"\u64CD\u4F5C",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:l(o=>[o.row.applicationId!==1?(u(),p(J,{key:0,content:"\u4FEE\u6539",placement:"top"},{default:l(()=>[S(e(c,{link:"",type:"primary",icon:"Edit",onClick:_e=>L(o.row)},null,8,["onClick"]),[[F,["system:Application:edit"]]])]),_:2},1024)):f("",!0),o.row.applicationId!==1?(u(),p(J,{key:1,content:"\u5220\u9664",placement:"top"},{default:l(()=>[S(e(c,{link:"",type:"primary",icon:"Delete",onClick:_e=>j(o.row)},null,8,["onClick"]),[[F,["system:Application:remove"]]])]),_:2},1024)):f("",!0)]),_:1})):f("",!0)]),_:1},8,["data"])),[[ge,a(I)]]),S(e(ue,{total:a($),page:a(s).pageNum,"onUpdate:page":t[3]||(t[3]=o=>a(s).pageNum=o),limit:a(s).pageSize,"onUpdate:limit":t[4]||(t[4]=o=>a(s).pageSize=o),onPagination:C},null,8,["total","page","limit"]),[[X,a($)>0]])]),_:1})]),_:1}),e(O,{title:a(D),modelValue:a(V),"onUpdate:modelValue":t[11]||(t[11]=o=>Y(V)?V.value=o:null),width:"900px","append-to-body":""},{footer:l(()=>[U("div",Re,[e(c,{type:"primary",onClick:ie},{default:l(()=>[m("\u786E \u5B9A")]),_:1}),e(c,{onClick:oe},{default:l(()=>[m("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(H,{model:a(n),rules:a(le),ref:"ApplicationRef","label-width":"80px"},{default:l(()=>[e(x,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(N,{label:"\u5E94\u7528\u540D\u79F0",prop:"applicationName"},{default:l(()=>[e(h,{modelValue:a(n).applicationName,"onUpdate:modelValue":t[5]||(t[5]=o=>a(n).applicationName=o),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(N,{label:"\u663E\u793A\u540D\u79F0",prop:"showName"},{default:l(()=>[e(h,{modelValue:a(n).showName,"onUpdate:modelValue":t[6]||(t[6]=o=>a(n).showName=o),placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u540D\u79F0",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(N,{label:"\u57DF\u540D",prop:"domainName"},{default:l(()=>[e(h,{modelValue:a(n).domainName,"onUpdate:modelValue":t[7]||(t[7]=o=>a(n).domainName=o),placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(N,{label:"\u6240\u5C5E\u9886\u57DF",prop:"domain"},{default:l(()=>[e(h,{modelValue:a(n).domain,"onUpdate:modelValue":t[8]||(t[8]=o=>a(n).domain=o),placeholder:"\u8BF7\u8F93\u5165\u6240\u5C5E\u9886\u57DF",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(N,{label:"\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84",prop:"storagePath","label-width":"107px"},{default:l(()=>[e(h,{modelValue:a(n).storagePath,"onUpdate:modelValue":t[9]||(t[9]=o=>a(n).storagePath=o),placeholder:"\u8BF7\u8F93\u5165\u5B89\u5168\u5B58\u50A8\u8DEF\u5F84",maxlength:"200"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(y,{span:24},{default:l(()=>[e(N,{label:"\u5E94\u7528\u76EE\u6807",prop:"target"},{default:l(()=>[e(h,{modelValue:a(n).target,"onUpdate:modelValue":t[10]||(t[10]=o=>a(n).target=o),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u76EE\u6807",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(O,{title:b.title,modelValue:b.open,"onUpdate:modelValue":t[14]||(t[14]=o=>b.open=o),width:"400px","append-to-body":""},{footer:l(()=>[U("div",Te,[e(c,{type:"primary",onClick:i.submitFileForm},{default:l(()=>[m("\u786E \u5B9A")]),_:1},8,["onClick"]),e(c,{onClick:t[13]||(t[13]=o=>b.open=!1)},{default:l(()=>[m("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[e(fe,{ref:"uploadRef",limit:1,accept:".xlsx, .xls",headers:b.headers,action:b.url+"?updateSupport="+b.updateSupport,disabled:b.isUploading,"on-progress":i.handleFileUploadProgress,"on-success":i.handleFileSuccess,"auto-upload":!1,drag:""},{tip:l(()=>[U("div",qe,[U("div",Fe,[e(me,{modelValue:b.updateSupport,"onUpdate:modelValue":t[12]||(t[12]=o=>b.updateSupport=o)},null,8,["modelValue"]),m(" \u662F\u5426\u66F4\u65B0\u5DF2\u7ECF\u5B58\u5728\u7684\u5E94\u7528\u6570\u636E ")]),Ie,e(ce,{type:"primary",underline:!1,style:{"font-size":"12px","vertical-align":"baseline"},onClick:i.importTemplate},{default:l(()=>[m("\u4E0B\u8F7D\u6A21\u677F ")]),_:1},8,["onClick"])])]),default:l(()=>[e(pe,{class:"el-icon--upload"},{default:l(()=>[e(se)]),_:1}),Pe]),_:1},8,["headers","action","disabled","on-progress","on-success"])]),_:1},8,["title","modelValue"])])}}});export{Ke as default};
