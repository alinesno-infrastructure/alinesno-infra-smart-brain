import{r as y,a as o,o as _,l as w,d as e,w as t,e as n,j as g,F as R,C as q,f as u,c as B,x as A,I as G,U as H,c4 as J}from"./index.2b31a27b.js";import{_ as K,c as M,a as Q}from"./routeRequestCount.258fb980.js";const W={class:"app-container"},X=n("span",{class:"span_1"},"\u63A5\u53E3\u7EDF\u8BA1",-1),Y={style:{float:"right"}},Z=n("div",{style:{"margin-left":"20px"}},[n("i",{class:"iconfont icon-icon_renwujincheng",style:{"font-size":"16pt",color:"#90A0A5"}}),n("span",{class:"span_14"},"7\u65E5\u8BF7\u6C42\u603B\u91CF")],-1),ee=n("div",{id:"apiAccessChart",class:"chart_line_1"},null,-1),te=n("div",{style:{"margin-left":"20px"}},[n("i",{class:"iconfont icon-yibiaopan",style:{"font-size":"16pt",color:"#90A0A5"}}),n("span",{class:"span_14"},"24\u5C0F\u65F6\u8BF7\u6C42\u603B\u91CF")],-1),ae=n("div",{id:"requestAccessChart",class:"chart_line_1"},null,-1),le={style:{float:"right"}},oe={class:"block",style:{"margin-top":"20px"}},ce={__name:"index",setup(ne){const k=J,v=y(null),p={name:null,groupCode:null};let z=y([]),b=1,x=10,V=y(0),P=y([{value:"public_api",label:"\u516C\u5171API"},{value:"external_api",label:"\u7B2C\u4E09\u65B9API"},{value:"interior_api",label:"\u5185\u7F51API"},{value:"pay_api",label:"\u652F\u4ED8API"},{value:"other_api",label:"\u5176\u5B83API"}]);const F=()=>{h(),I()},N=a=>{x=a,h()},L=a=>{b=a,h()},j=a=>{v.value.dialogFormVisible=!0,v.value.count(a)},I=()=>{M().then(function(a){console.log(a),a.data&&(S("apiAccessChart",a.data.dayCounts),S("requestAccessChart",a.data.hourCounts))})},h=()=>{Q({name:p.name,groupCode:p.groupCode,currentPage:b,pageSize:x}).then(function(a){a.data&&(z.value=a.data.lists,V.value=a.data.totalNum)})},S=(a,i)=>{console.log("id = "+a),console.log(k);let s=[],r=[];i!==void 0&&(s=i.dates,r=i.counts),console.log("chart data",r);let d=k.init(document.getElementById(a));var m={color:"#1890FF",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{top:"5%",left:"1%",right:"2%",bottom:"1%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:s},series:[{data:r,type:"line",smooth:!0}]};d.setOption(m,!0)};return F(),(a,i)=>{const s=o("el-col"),r=o("el-button"),d=o("el-row"),m=o("el-divider"),D=o("el-option"),T=o("el-select"),U=o("el-input"),C=o("el-tag"),c=o("el-table-column"),E=o("el-table"),O=o("el-pagination"),$=o("el-card");return _(),w("div",W,[e($,{shadow:"never",class:"box-card"},{default:t(()=>[e(d,null,{default:t(()=>[e(s,{span:10},{default:t(()=>[X]),_:1}),e(s,{span:14},{default:t(()=>[n("div",Y,[e(r,{icon:"Refresh",style:{"font-size":"16px",padding:"6px 12px"},onClick:I,title:"\u5237\u65B0\u7EDF\u8BA1\u56FE\u8868"})])]),_:1})]),_:1}),e(d,{gutter:24,style:{"margin-top":"16px"}},{default:t(()=>[e(s,{span:12},{default:t(()=>[Z,e(m,{style:{width:"80%"}}),ee]),_:1}),e(s,{span:12},{default:t(()=>[te,e(m,{style:{width:"80%"}}),ae]),_:1})]),_:1}),e(d,{style:{"margin-top":"18px"}},{default:t(()=>[e(s,{span:10},{default:t(()=>[g("\xA0")]),_:1}),e(s,{span:14},{default:t(()=>[n("div",le,[e(U,{size:"large",placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u7AEF\u540D\u79F0",modelValue:p.name,"onUpdate:modelValue":i[1]||(i[1]=l=>p.name=l),class:"input-with-select",style:{width:"520px"}},{prepend:t(()=>[e(T,{size:"large",modelValue:p.groupCode,"onUpdate:modelValue":i[0]||(i[0]=l=>p.groupCode=l),placeholder:"\u8BF7\u9009\u62E9\u5206\u7EC4",style:{width:"150px","margin-right":"10px"}},{default:t(()=>[e(D,{label:"\u6240\u6709",value:""}),(_(!0),w(R,null,q(u(P),l=>(_(),B(D,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),append:t(()=>[e(r,{icon:"Search",onClick:h})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(E,{data:u(z),style:{"margin-top":"18px"}},{default:t(()=>[e(c,{label:"\u670D\u52A1ID",width:"300"},{default:t(l=>[e(C,{type:"warning"},{default:t(()=>[g(A(l.row.id),1)]),_:2},1024)]),_:1}),e(c,{label:"\u5206\u7EC4"},{default:t(l=>[(_(!0),w(R,null,q(u(P),f=>G((_(),B(C,{key:f.value,type:""},{default:t(()=>[g(A(f.label),1)]),_:2},1024)),[[H,f.value===l.row.groupCode]])),128))]),_:1}),e(c,{label:"\u670D\u52A1\u540D\u79F0"},{default:t(l=>[e(C,{type:"success"},{default:t(()=>[g(A(l.row.name),1)]),_:2},1024)]),_:1}),e(c,{label:"\u670D\u52A1\u5730\u5740",prop:"uri","show-overflow-tooltip":!0}),e(c,{label:"\u65AD\u8A00\u8DEF\u5F84",prop:"path"}),e(c,{label:"\u6700\u8FD1\u8BF7\u6C42\u65F6\u95F4",prop:"createTime",width:"220"}),e(c,{label:"\u4ECA\u65E5\u8BF7\u6C42\u603B\u6B21\u6570",prop:"count",width:"140",style:{"font-weight":"bold"}}),e(c,{label:"\u67E5\u770B",align:"center",width:"120"},{default:t(l=>[e(r,{bg:"",text:"",type:"primary",onClick:f=>j(l.row),title:"\u8BF7\u70B9\u51FB\u9009\u4E2D\u67E5\u770B",icon:"PieChart"},{default:t(()=>[g(" \u7EDF\u8BA1 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n("div",oe,[e(O,{onSizeChange:N,onCurrentChange:L,"current-page":u(b),"page-sizes":[10,30,50],"page-size":u(x),layout:"total, sizes, prev, pager, next, jumper",total:u(V)},null,8,["current-page","page-size","total"])])]),_:1}),e(K,{ref_key:"routeRequestCount",ref:v},null,512)])}}};export{ce as default};
