import{_ as q,r,G as A,a as l,H as F,o as m,l as G,d as n,f as i,e as a,w as s,I as J,c as h,J as U,j as C,m as K,z as O,A as P,n as Q}from"./index.2b31a27b.js";import W from"./ScriptEditor.b57c8723.js";import{v as X,u as Y,g as Z}from"./tool.2b8b43d0.js";import{M as ee}from"./index.a61017be.js";import"./index.aea152d8.js";const x=u=>(O("data-v-2d29a2c4"),u=u(),P(),u),te={class:"app-container"},oe={class:"form-container"},ae={style:{"margin-top":"20px","margin-bottom":"20px",display:"inline-flex",width:"100%","flex-direction":"column",gap:"8px"}},le={class:"flow-setting-footer",style:{margin:"0px",display:"flex",gap:"10px"}},ne=x(()=>a("i",{class:"fa-solid fa-truck-fast"},null,-1)),se=x(()=>a("i",{class:"fa-solid fa-paper-plane"},null,-1)),ce={class:"output-result-box"},re=x(()=>a("div",{class:"card-header"},[a("span",null,"\u6267\u884C\u7ED3\u679C")],-1)),ie=["innerHTML"],de={__name:"script",setup(u,{expose:R}){const V=new ee,y=K(),{proxy:k}=Q(),c=r(!1),v=r(null),w=r("execute"),g=r(null),I=r({name:""}),d=r(null),_=r(""),T=()=>v.value.getRawScript();function B(t){d.value=t}const M=()=>{let t=w.value;const e=T(),p=d.value;c.value=!0,X({script:e,toolId:p,type:t,params:_.value}).then(o=>{console.log("res = "+o),c.value=!1,g.value=o.data,k.$modal.msgSuccess("\u9A8C\u8BC1\u6210\u529F")}).catch(o=>{console.log("err = "+o),c.value=!1})},$=()=>{let t=w.value;const e=T(),p=d.value;c.value=!0,Y({script:e,toolId:p,type:t,params:"save"}).then(o=>{console.log("res = "+o),c.value=!1,k.$modal.msgSuccess("\u66F4\u65B0\u6210\u529F")}).catch(o=>{console.log("err = "+o),c.value=!1})};function z(){y.push({path:"/template/smart/assistant/plugin/index"})}function E(){d.value=y.currentRoute.value.query.toolId,Z(d.value).then(t=>{I.value=t.data;let e="";t.data.groovyScript&&(e=t.data.groovyScript),v.value.setRawScript(e)})}return A(()=>{E()}),R({setCurrentToolId:B}),(t,e)=>{const p=l("el-page-header"),o=l("el-input"),S=l("el-button"),b=l("el-col"),H=l("el-skeleton"),N=l("el-scrollbar"),j=l("el-card"),D=l("el-row"),L=F("loading");return m(),G("div",te,[n(p,{onBack:z,content:"["+i(I).name+"]\u5DE5\u5177\u811A\u672C\u914D\u7F6E"},null,8,["content"]),a("div",oe,[n(D,null,{default:s(()=>[J((m(),h(b,{span:14,"element-loading-text":"\u4EFB\u52A1\u6B63\u5728\u751F\u6210\u4E2D\uFF0C\u8BF7\u52FF\u5237\u65B0 ...","element-loading-spinner":t.svg},{default:s(()=>[a("div",ae,[a("div",le,[n(o,{modelValue:i(_),"onUpdate:modelValue":e[0]||(e[0]=f=>U(_)?_.value=f:null),size:"large",style:{width:"100%"},placeholder:"\u8F93\u5165\u8BF7\u6C42\u53C2\u6570\uFF0C\u6BD4\u5982{'name':'lisi'}."},null,8,["modelValue"]),n(S,{type:"primary",text:"",bg:"",onClick:e[1]||(e[1]=f=>M()),size:"large"},{default:s(()=>[ne,C("\xA0\u9A8C\u8BC1\u4EFB\u52A1 ")]),_:1}),n(S,{type:"danger",bg:"",text:"",onClick:e[2]||(e[2]=f=>$()),size:"large"},{default:s(()=>[se,C("\xA0\u63D0\u4EA4\u4FDD\u5B58 ")]),_:1})]),a("div",null,[n(W,{ref_key:"executeEditorRef",ref:v,lang:"java"},null,512)])])]),_:1},8,["element-loading-spinner"])),[[L,i(c)]]),n(b,{span:10},{default:s(()=>[a("div",ce,[n(j,{shadow:"never",style:{height:"calc(100vh - 220px)",padding:"0px !important"}},{header:s(()=>[re]),default:s(()=>[i(g)?(m(),h(N,{key:1,style:{height:"calc(-320px + 100vh)"}},{default:s(()=>[a("div",{innerHTML:i(V).render(i(g))},null,8,ie)]),_:1})):(m(),h(H,{key:0,rows:10}))]),_:1})])]),_:1})]),_:1})])])}}},ge=q(de,[["__scopeId","data-v-2d29a2c4"]]);export{ge as default};
