import{_ as w,x as T,r as u,j as V,a as v,b as r,c as _,F as y,f as A,e as s,t as p,d as S,w as h,y as C,l as N,z as E,A as z,E as R,p as j,i as F}from"./index.d9d30be3.js";const O=i=>(j("data-v-57b7da3b"),i=i(),F(),i),P={class:"config-agent-container"},U=O(()=>s("div",{class:"description"}," \u914D\u7F6E\u573A\u666F\u667A\u80FD\u4F53\uFF0C\u5C06\u573A\u666F\u80FD\u529B\u8FDB\u4E00\u6B65\u7ED3\u5408\u5230\u573A\u666F\u4E2D\uFF0C\u5B9E\u73B0\u573A\u666F\u667A\u80FD\u4F53\u7684\u529F\u80FD\u3002 ",-1)),D={class:"agent-info"},G={class:"agent-name"},J={class:"agent-desc"},L={class:"role-radio-group"},M={class:"role-item"},q={class:"role-avatar"},H=["src"],K={class:"role-details"},Q={class:"role-name"},W={class:"role-responsibilities"},X={class:"save-button-container"},Y=T({name:"Index"}),Z=Object.assign(Y,{emits:["updateSceneAgents"],setup(i,{expose:b,emit:m}){const f=u(null),a=u(null),d=u(null),x=u([]),I=(e,t)=>{f.value=e,x.value=t,d.value=[];const c=t.filter(o=>o.code===e.sceneType);c.length>0?(a.value=c[0],d.value=a.value.agents):a.value=null,console.log("currentSupportSceneAgents = "+JSON.stringify(d.value))},B=async e=>{try{const t=await E(a.value.id,e.id);e.roles=t.data}catch(t){console.error("Error fetching roles:",t),e.roles=[]}},k=()=>{const e=a.value.id,t=a.value.code;let c=[];for(const o of d.value){const g={id:o.id,code:o.code,selectAgentId:o.selectAgentId};c.push(g)}z(f.value.id,e,t,c).then(o=>{R.success("\u4FDD\u5B58\u6210\u529F"),m("updateSceneAgents")})};return V(()=>{var e;return(e=a.value)==null?void 0:e.agents},async e=>{if(e)for(const t of e)await B(t)}),b({configSceneAgent:I}),(e,t)=>{const c=v("el-radio"),o=v("el-radio-group"),g=v("el-button");return r(),_("div",P,[U,(r(!0),_(y,null,A(d.value,l=>(r(),_("div",{key:l.id,class:"agent-item"},[s("div",D,[s("span",G,p(l.name),1),s("span",J,p(l.description),1)]),s("div",L,[S(o,{modelValue:l.selectAgentId,"onUpdate:modelValue":n=>l.selectAgentId=n,class:"radio-group"},{default:h(()=>[(r(!0),_(y,null,A(l.roles,n=>(r(),C(c,{key:n.id,value:n.id,label:n.id,size:"large",class:"role-radio"},{default:h(()=>[s("div",M,[s("div",q,[s("img",{src:e.imagePathByPath(n.roleAvatar),style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,H)]),s("div",K,[s("span",Q,p(n.roleName),1),s("span",W,p(n.responsibilities),1)])])]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]))),128)),s("div",X,[S(g,{type:"primary",onClick:k,size:"large"},{default:h(()=>[N("\u786E\u8BA4\u4FDD\u5B58")]),_:1})])])}}}),ee=w(Z,[["__scopeId","data-v-57b7da3b"]]);export{ee as default};
