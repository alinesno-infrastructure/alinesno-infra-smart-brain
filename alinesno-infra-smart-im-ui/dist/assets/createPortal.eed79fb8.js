import q from"./agentCard.36bb3678.js";import te from"./sceneCard.0bd906b7.js";import{g as oe}from"./store.b23b57b8.js";import{_ as se,r,a as i,C as ne,b as l,y as n,w as a,e as u,D,l as f,c as m,d as c,F as h,f as b,S as re,t as S,G as k,R as ue,u as L,E as C,p as de,i as ie,ao as ce}from"./index.d9d30be3.js";import{u as pe,c as me,l as ge}from"./workplace.a7c11a4e.js";const _e=x=>(de("data-v-2991c338"),x=x(),ie(),x),fe=["element-loading-spinner"],ve=_e(()=>u("div",{style:{padding:"5px","margin-bottom":"10px"}},[f(" \u9009\u62E9\u4E0D\u540C\u7684\u5DE5\u4F5C\u53F0\u4F1A\u5F62\u6210\u4E0D\u540C\u7684"),u("b",null,"AI\u667A\u80FD\u4F53"),f("\u5DE5\u4F5C\u7EC4\u5408\uFF0C\u5E76\u4E14\u53EF\u4EE5\u6839\u636E\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\u5DE5\u4F5C\u53F0\u3002 ")],-1)),ye={style:{padding:"10px",display:"flex","flex-direction":"column","line-height":"1.5rem"}},he={style:{"font-size":"15px","font-weight":"bold"}},be={style:{color:"#a5a5a5"}},ke=["onClick"],xe=["src"],we={style:{display:"flex","flex-direction":"column","line-height":"1.4rem",gap:"5px",padding:"10px"}},Ve={style:{"font-size":"15px",color:"#333","font-weight":"bold"}},Ie={class:"ellipsis-2lines",style:{color:"#a5a5a5"}},Se={class:"dialog-footer"},Ce={__name:"createPortal",emits:["handleHasWorkplace"],setup(x,{expose:E,emit:z}){const R=r([]),W=r([]),B=r([]),v=r(!1),p=r(!1),g=r(!1),F=r(null),t=r({name:"",type:1,template:""}),H=r("large"),w=r(null),V=r([]),O=r([{id:1,name:"\u884C\u4E1A\u5DE5\u4F5C\u53F0",icon:"fa-solid fa-industry",desc:"\u884C\u4E1A\u5DE5\u4F5C\u53F0\u63D0\u4F9B\u901A\u7528\u7684\u884C\u4E1A\u667A\u80FD\u4F53\u548C\u573A\u666F"},{id:2,name:"\u81EA\u5B9A\u4E49\u5DE5\u4F5C\u53F0",icon:"fa-solid fa-wrench",desc:"\u81EA\u5B9A\u4E49\u5DE5\u4F5C\u53F0\u53EF\u81EA\u7531\u9009\u62E9\u667A\u80FD\u4F53\u548C\u573A\u666F"}]),G=r({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u53F0\u540D\u79F0",trigger:"blur"},{min:2,max:20,message:"\u5DE5\u4F5C\u53F0\u540D\u79F0\u957F\u5EA6\u5E94\u57282\u523020\u4E2A\u5B57\u7B26\u4E4B\u95F4",trigger:"blur"}],template:[{required:!0,message:"\u8BF7\u9009\u62E9\u5DE5\u4F5C\u53F0\u6A21\u677F",trigger:"change"}],selectSceneId:[{required:!0,message:"\u8BF7\u9009\u62E9\u573A\u666F",trigger:"change"}],selectAgentId:[{required:!0,message:"\u8BF7\u9009\u62E9\u667A\u80FD\u4F53",trigger:"change"}]}),M=o=>{C.warning("\u8BF7\u5148\u9009\u62E9\u5DE5\u4F5C\u53F0.")},$=o=>{if(V.value.find(s=>s.id===o).status===0){C.warning("\u8BE5\u5DE5\u4F5C\u53F0Agent\u667A\u80FD\u4F53\u6B63\u5728\u96C6\u6210\u4E2D\uFF0C\u5C1A\u672A\u5F00\u653E...");return}w.value=o,t.value.template=o,t.value.name=V.value.find(s=>s.id===o).name},j=()=>{F.value.validate(o=>{if(o)if(g.value=!0,t.value.type===1){const s={workplaceName:t.value.name,workplaceId:w.value};pe(s).then(P=>{C.success("\u8868\u5355\u63D0\u4EA4\u6210\u529F"),g.value=!1,v.value=!1,z("handleHasWorkplace")}).catch(()=>{g.value=!1})}else t.value.type===2&&me(t.value).then(s=>{C.success("\u8868\u5355\u63D0\u4EA4\u6210\u529F"),g.value=!1,v.value=!1,z("handleHasWorkplace")}).catch(()=>{g.value=!1});else return!1})},J=()=>{p.value=!0,ge().then(o=>{V.value=o.data,p.value=!1})},K=()=>{p.value=!0,v.value=!0,J(),p.value=!1},Q=async()=>{await oe().then(o=>{W.value=o.data.publicRoleList||[],B.value=o.data.orgRoleList||[]})},X=async()=>{await ce().then(o=>{R.value=o.data})},Y=o=>{console.log("type = "+o),o==2&&(p.value=!0,Q(),X(),p.value=!1)};return E({openSelectWorkplace:K}),(o,s)=>{const P=i("el-input"),y=i("el-form-item"),Z=i("el-radio"),ee=i("el-radio-group"),U=i("el-button"),I=i("el-col"),A=i("el-row"),N=i("el-scrollbar"),le=i("el-form"),ae=i("el-dialog"),T=ne("loading");return l(),n(ae,{modelValue:v.value,"onUpdate:modelValue":s[5]||(s[5]=e=>v.value=e),title:"\u9009\u62E9AI\u5DE5\u4F5C\u53F0",width:"1024","before-close":M},{footer:a(()=>[u("div",Se,[D((l(),n(U,{type:"primary",size:"large",onClick:j},{default:a(()=>[f(" \u786E\u8BA4 ")]),_:1})),[[T,g.value]])])]),default:a(()=>[D((l(),m("div",{"element-loading-text":"Loading...","element-loading-spinner":o.svg,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[ve,c(le,{ref_key:"ruleFormRef",ref:F,model:t.value,rules:G.value,"label-width":"auto",class:"demo-ruleForm","label-position":"top",size:H.value,"status-icon":""},{default:a(()=>[c(y,{label:"\u5DE5\u4F5C\u53F0\u540D\u79F0",prop:"name"},{default:a(()=>[c(P,{modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value.name=e),placeholder:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u53F0\u540D\u79F0"},null,8,["modelValue"])]),_:1}),c(y,{label:"\u7C7B\u578B",prop:"type"},{default:a(()=>[c(ee,{modelValue:t.value.type,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value.type=e),onChange:Y},{default:a(()=>[(l(!0),m(h,null,b(O.value,e=>(l(),n(Z,{style:{"margin-top":"10px","margin-bottom":"10px"},key:e.id,value:e.id,label:e.id,size:"large"},{default:a(()=>[u("div",ye,[u("span",he,[u("i",{class:re(e.icon)},null,2),f(" "+S(e.name),1)]),u("span",be,S(e.desc),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t.value.type===1?(l(),n(y,{key:0,label:"\u5DE5\u4F5C\u53F0",prop:"template"},{default:a(()=>[c(A,{style:{width:"100%"}},{default:a(()=>[(l(!0),m(h,null,b(V.value,(e,d)=>(l(),n(I,{span:6,key:d},{default:a(()=>[u("div",{style:ue({background:w.value===e.id?"#e5f6ff":"#fff",border:w.value===e.id?"1px solid #1890ff":"1px solid rgba(6, 7, 9, 0.1)",borderRadius:"8px",cursor:"pointer",margin:"10px",display:"flex","flex-direction":"column"}),onClick:_=>$(e.id)},[e.backgroundImage?(l(),m("img",{key:0,src:o.imagePathByPath(e.backgroundImage),style:{width:"100%","border-radius":"7px 7px 0px 0px"}},null,8,xe)):k("",!0),u("div",we,[u("span",Ve,[f(S(e.name)+" ",1),e.status===0?(l(),n(U,{key:0,type:"text",size:"small"},{default:a(()=>[f(" \u96C6\u6210\u4E2D ")]),_:1})):k("",!0)]),u("div",Ie,S(e.description),1)])],12,ke)]),_:2},1024))),128))]),_:1})]),_:1})):k("",!0),t.value.type===2?(l(),n(y,{key:1,label:"\u9009\u62E9\u667A\u80FD\u4F53",prop:"selectAgentId"},{default:a(()=>[c(N,{style:{height:"200px",width:"100%"}},{default:a(()=>[c(A,null,{default:a(()=>[(l(!0),m(h,null,b(B.value,(e,d)=>(l(),n(I,{span:6,key:d},{default:a(()=>[(l(),n(L(q),{modelValue:t.value.selectAgentId,"onUpdate:modelValue":s[2]||(s[2]=_=>t.value.selectAgentId=_),agent:e,key:d},null,8,["modelValue","agent"]))]),_:2},1024))),128)),(l(!0),m(h,null,b(W.value,(e,d)=>(l(),n(I,{span:6,key:d},{default:a(()=>[(l(),n(L(q),{modelValue:t.value.selectAgentId,"onUpdate:modelValue":s[3]||(s[3]=_=>t.value.selectAgentId=_),agent:e,key:d},null,8,["modelValue","agent"]))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):k("",!0),t.value.type===2?(l(),n(y,{key:2,label:"\u9009\u62E9\u573A\u666F",prop:"selectSceneId"},{default:a(()=>[c(N,{style:{height:"250px",width:"100%"}},{default:a(()=>[c(A,null,{default:a(()=>[(l(!0),m(h,null,b(R.value,(e,d)=>(l(),n(I,{span:4,key:d},{default:a(()=>[(l(),n(L(te),{modelValue:t.value.selectSceneId,"onUpdate:modelValue":s[4]||(s[4]=_=>t.value.selectSceneId=_),scene:e,key:d},null,8,["modelValue","scene"]))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1},8,["model","rules","size"])],8,fe)),[[T,p.value]])]),_:1},8,["modelValue"])}}},Be=se(Ce,[["__scopeId","data-v-2991c338"]]);export{Be as default};
