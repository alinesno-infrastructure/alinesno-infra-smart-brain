import{g as P,h as D,r as t,n as T,a as r,b as q,c as G,d as n,w as o,e as s,t as C,u as K,l as k,J as U}from"./index.d9d30be3.js";import z from"./chatPanel.7a6ad93a.js";import"./index.23422e4c.js";import"./speaking.fcefe2d3.js";import"./userQuestionSuggestionsPanel.cb0efdab.js";import"./roleChat.91ed275b.js";import"./chatsse.0657b2ca.js";const J={class:"screen-app-container",style:{height:"calc(100vh - 70px)"}},M={class:"avatar-title-container",style:{"align-items":"center"}},W={style:{display:"flex","flex-direction":"column"}},j={class:"title"},F={class:"description"},H=s("i",{class:"fa-solid fa-user-secret"},null,-1),O=[H],Q={class:"dialog-body-content",style:{"text-align":"center"}},X={class:"dialog-footer"},se={__name:"examEditor",setup(Y){const v=P();D();const{proxy:w}=U(),x=t(null);t(null);const b=t([]),_=t(""),i=t(!1),a=t([]),c=t("worker"),h=t(null);t(null),t(!1),t("\u56E2\u961F\u4EFB\u52A1\u8BA1\u5212");const f=t({id:0,screenName:null,screenDesc:null,screenCount:0,knowledgeId:null,chapterEditors:[],contentEditors:[]}),I=t({roleAvatar:null,roleName:null,responsibilities:null}),p=t(v.query.screenId),R=t([]);function V(e){i.value=!0,console.log("configAgent"),c.value=e,_.value="\u9009\u62E9\u89D2\u8272",a.value=[],getScreen(p.value).then(l=>{c.value=="leader"?a.value=[l.data.leader.id]:c.value=="worker"&&(a.value=l.data.workers.map(d=>d.id))})}const A=(e,l,d)=>{c.value=="leader"&&e.length>1&&e.splice(0,1)},S=(e,l,d)=>{c.value=="leader"&&(a.value=e,a.value.length>1&&a.value.shift())};function B(){getScreen(p.value).then(e=>{f.value=e.data,I.value=e.data.leader,R.value=e.data.workers,x.value.handleGetInfo(e.data.leader.id)})}function L(){i.value=!1;let e={screenId:p.value,workerIds:a.value,type:c.value,leaderId:a.value?a.value[0]:null};updateLeaderRole(e).then(l=>{w.$modal.msgSuccess("\u66F4\u65B0\u6210\u529F"),B()})}return T(()=>{console.log("screenId = "+v.query.screenId),h.value.openChatBoxWithRole("1896455996704731137")}),(e,l)=>{const d=r("el-avatar"),N=r("el-tooltip"),m=r("el-col"),g=r("el-row"),$=r("el-transfer"),y=r("el-button"),E=r("el-dialog");return q(),G("div",J,[n(g,{class:"app-row",style:{"background-color":"transparent"}},{default:o(()=>[n(m,{span:24},{default:o(()=>[s("div",M,[n(d,{shape:"square",size:40,src:e.imagePathByPath(f.value.screenBanner)},null,8,["src"]),s("div",W,[s("span",j,C(f.value.screenName),1),s("span",F,C(e.truncateString(f.value.screenDesc,20)),1)]),n(N,{class:"box-item",effect:"dark",content:"\u914D\u7F6E\u7BA1\u7406\u4EBA\u5458",placement:"top"},{default:o(()=>[s("span",{class:"edit-header-avatar",style:{color:"#3b5998"},onClick:l[0]||(l[0]=u=>V("leader"))},O)]),_:1})])]),_:1})]),_:1}),n(g,{class:"app-row",style:{padding:"0px"}},{default:o(()=>[n(m,{span:24},{default:o(()=>[n(K(z),{ref_key:"roleChatPanelRef",ref:h},null,512)]),_:1})]),_:1}),n(E,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=u=>i.value=u),title:_.value,width:"900"},{footer:o(()=>[s("div",X,[n(y,{onClick:l[2]||(l[2]=u=>i.value=!1)},{default:o(()=>[k("\u5173\u95ED")]),_:1}),n(y,{type:"primary",onClick:L},{default:o(()=>[k("\u786E\u8BA4")]),_:1})])]),default:o(()=>[s("div",Q,[n($,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=u=>a.value=u),filterable:"",style:{"text-align":"left",width:"100%",display:"inline-block"},titles:["\u6E90\u89D2\u8272","\u5DF2\u9009\u62E9"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},onLeftCheckChange:A,onChange:S,"filter-method":e.filterAgentMethod,"filter-placeholder":"\u641C\u7D22\u89D2\u8272",data:b.value},null,8,["modelValue","filter-method","data"])])]),_:1},8,["modelValue","title"])])}}};export{se as default};
