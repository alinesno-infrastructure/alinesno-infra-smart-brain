import{n as $}from"./longText.4d182a25.js";import{_ as D,r as c,a as d,b as p,c as _,d as i,w as r,e as s,F as b,f as w,S as x,t as g,l as S,p as F,i as G,z as V}from"./index.d9d30be3.js";const U=v=>(F("data-v-33dd583d"),v=v(),G(),v),L=U(()=>s("div",{class:"dialog-description"}," \u7531\u591A\u4E2A\u667A\u80FD\u4F53\u534F\u4F5C\uFF0C\u8BF7\u6839\u636E\u9700\u6C42\u9009\u62E9\u5927\u7EB2\u751F\u6210\u667A\u80FD\u4F53\u548C\u7AE0\u8282\u5DE5\u7A0B\u5E08\uFF0C\u5E76\u8F93\u5165\u5185\u5BB9\u751F\u6210\u76F8\u5173\u4FE1\u606F\u3002 ",-1)),j={class:"custom-radio-group"},q=["onClick"],J={class:"engineer-info"},K=["src"],M={class:"engineer-details"},Q={class:"engineer-name"},W={class:"engineer-responsibilities"},X={class:"custom-radio-group"},Y=["onClick"],Z={class:"engineer-info"},ee=["src"],ne={class:"engineer-details"},oe={class:"engineer-name"},te={class:"engineer-responsibilities"},le={class:"dialog-footer"},se={__name:"executeHandle",emits:["openChatBox","handleGetScene"],setup(v,{expose:B,emit:f}){c([]);const u=c(!1),h=c(null),E=c([]),I=c([]),l=c({outlineEngineer:null,chapterEngineer:null,contentInput:""}),a=c({});c();const k=c({outlineEngineer:[{validator:(t,e,n)=>{e===null?n(new Error("\u8BF7\u9009\u62E9\u4E00\u540D\u5927\u7EB2\u8BBE\u8BA1\u5DE5\u7A0B\u5E08")):n()},trigger:"change"}],chapterEngineer:[{validator:(t,e,n)=>{e===null?n(new Error("\u8BF7\u9009\u62E9\u4E00\u540D\u7AE0\u8282\u5DE5\u7A0B\u5E08")):n()},trigger:"change"}],contentInput:[{validator:(t,e,n)=>{e.trim()===""?n(new Error("\u5185\u5BB9\u751F\u6210\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A")):n()},trigger:"blur"}]}),A=()=>{console.log("\u5BF9\u8BDD\u6846\u5DF2\u5173\u95ED")},z=async()=>{if(await new Promise(e=>{h.value.validate(n=>{e(n)})})){console.log("\u70B9\u51FB\u4E86\u786E\u5B9A\u6309\u94AE"),console.log("\u9009\u4E2D\u7684\u5927\u7EB2\u8BBE\u8BA1\u5DE5\u7A0B\u5E08:",l.value.outlineEngineer),console.log("\u9009\u4E2D\u7684\u7AE0\u8282\u5DE5\u7A0B\u5E08:",l.value.chapterEngineer),console.log("\u5185\u5BB9\u751F\u6210\u8F93\u5165:",l.value.contentInput),u.value=!1,l.value.sceneId=a.value.id;const e=await $(l.value);console.log("response = "+e),f("handleGetScene"),f("openChatBox",l.value.outlineEngineer,l.value.contentInput)}else console.log("\u8868\u5355\u6821\u9A8C\u4E0D\u901A\u8FC7")},N=t=>{l.value.outlineEngineer=t},P=t=>{l.value.chapterEngineer=t},R=async()=>{if(console.log("sceneId = "+a.value.sceneId+" , agents = "+a.value.agents),a.value.sceneId&&a.value.agents)for(let t=0;t<a.value.agents.length;t++){let e=a.value.agents[t];if(e.code==="chapterEditor"){const n=await V(a.value.sceneId,e.id);console.log("chapterEditor response = "+n),E.value=n.data}else if(e.code==="contentEditor"){const n=await V(a.value.sceneId,e.id);console.log("contentEditor response = "+n),I.value=n.data}}};return B({handleOpen:t=>{u.value=!0,a.value=t,R()}}),(t,e)=>{const n=d("el-input"),m=d("el-form-item"),y=d("el-scrollbar"),H=d("el-form"),C=d("el-button"),O=d("el-dialog");return p(),_("div",null,[i(O,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),width:"1000px",title:"\u8BF7\u9009\u62E9\u667A\u80FD\u4F53",onClose:A},{default:r(()=>[L,i(H,{ref_key:"formRef",ref:h,model:l.value,rules:k.value,size:"large","label-position":"top"},{default:r(()=>[i(m,{label:"\u5185\u5BB9\u751F\u6210\u8F93\u5165",prop:"contentInput"},{default:r(()=>[i(n,{type:"textarea",rows:3,resize:"none",modelValue:l.value.contentInput,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.contentInput=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9\u751F\u6210\u7684\u76F8\u5173\u4FE1\u606F"},null,8,["modelValue"])]),_:1}),i(m,{label:"\u9009\u62E9\u5927\u7EB2\u8BBE\u8BA1\u4E13\u5458",prop:"outlineEngineer"},{default:r(()=>[i(y,{class:"scrollbar"},{default:r(()=>[s("div",j,[(p(!0),_(b,null,w(E.value,o=>(p(),_("div",{key:o.id,class:x(["custom-radio",{selected:l.value.outlineEngineer===o.id}]),onClick:T=>N(o.id)},[s("div",J,[s("img",{src:t.imagePathByPath(o.roleAvatar),alt:"\u5DE5\u7A0B\u5E08\u5934\u50CF",class:"engineer-avatar"},null,8,K),s("div",M,[s("span",Q,g(o.roleName),1),s("span",W,g(o.responsibilities),1)])])],10,q))),128))])]),_:1})]),_:1}),i(m,{label:"\u9009\u62E9\u7AE0\u8282\u5DE5\u7A0B\u5E08",prop:"chapterEngineer"},{default:r(()=>[i(y,{class:"scrollbar"},{default:r(()=>[s("div",X,[(p(!0),_(b,null,w(I.value,o=>(p(),_("div",{key:o.id,class:x(["custom-radio",{selected:l.value.chapterEngineer===o.id}]),onClick:T=>P(o.id)},[s("div",Z,[s("img",{src:t.imagePathByPath(o.roleAvatar),alt:"\u5DE5\u7A0B\u5E08\u5934\u50CF",class:"engineer-avatar"},null,8,ee),s("div",ne,[s("span",oe,g(o.roleName),1),s("span",te,g(o.responsibilities),1)])])],10,Y))),128))])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),footer:r(()=>[s("div",le,[i(C,{size:"large",onClick:e[1]||(e[1]=o=>u.value=!1)},{default:r(()=>[S("\u53D6\u6D88")]),_:1}),i(C,{size:"large",type:"primary",onClick:z},{default:r(()=>[S("\u5F00\u59CB\u5DE5\u4F5C")]),_:1})])]),_:1},8,["modelValue"])])}}},ce=D(se,[["__scopeId","data-v-33dd583d"]]);export{ce as default};
