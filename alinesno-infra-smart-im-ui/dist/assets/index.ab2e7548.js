import{_ as j,r as u,B as k,j as D,o as G,a as i,b as c,c as v,d as a,u as n,e as s,w as r,F as g,f as y,y as x,l as M,g as A,h as J,E,p as $,i as K}from"./index.d9d30be3.js";import Q from"./roleSelectPanel.b7972537.js";import{g as W,a as X,u as Y}from"./contentFormatter.0bc48627.js";import{S as Z}from"./snowflake-id.35ef5390.js";import"./configSceneAgent.f1635811.js";const h=p=>($("data-v-22887f0e"),p=p(),K(),p),ee={class:"content-formatter-container"},le={class:"main-content"},te=h(()=>s("div",{class:"title-section"},[s("span",{class:"title"},"\u5185\u5BB9\u6392\u7248\uFF0C\u4E00\u952E\u6309\u6A21\u677F\u683C\u5F0F"),s("span",{class:"description"},"\u9AD8\u6548\u8FDB\u884C\u5185\u5BB9\u6392\u7248\uFF0C\u8F93\u5165\u6587\u672C\u540E\uFF0C\u5373\u523B\u4E3A\u60A8\u8C03\u6574\u6BB5\u843D\u7ED3\u6784\u3001\u5B57\u4F53\u683C\u5F0F\u7B49\uFF0C\u6839\u636E\u6A21\u677F\u8FDB\u884C\u6392\u7248\uFF0C\u6253\u9020\u4E13\u4E1A\u7F8E\u89C2\u7684\u5185\u5BB9\u5448\u73B0")],-1)),ae={class:"input-button-section"},ne={style:{display:"flex","flex-direction":"row",gap:"10px"}},oe=h(()=>s("i",{class:"fa-solid fa-paper-plane",style:{"font-size":"15px"}},null,-1)),se=h(()=>s("div",{class:"review-footer-message"},[s("div",{class:"footer-message"},"\u670D\u52A1\u751F\u6210\u7684\u6240\u6709\u5185\u5BB9\u5747\u7531\u4EBA\u5DE5\u667A\u80FD\u6A21\u578B\u751F\u6210\uFF0C\u5176\u751F\u6210\u5185\u5BB9\u7684\u51C6\u786E\u6027\u548C\u5B8C\u6574\u6027\u65E0\u6CD5\u4FDD\u8BC1\uFF0C\u4E0D\u80FD\u4EE3\u8868\u6211\u4EEC\u7684\u6001\u5EA6\u548C\u89C2\u70B9\u3002")],-1)),re={__name:"index",setup(p){const S=u(null),I=u(null),F=new Z,R=A(),q=J(),T=u([]),l=k({promptText:"",documentType:[],businessScenario:[],templateId:""}),_=u(R.query.sceneId),C=k({promptText:[{required:!0,message:"\u8BF7\u8F93\u5165\u9700\u8981\u6574\u7406\u7684\u6587\u7A3F\u7C7B\u578B",trigger:"blur"}],documentType:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u7A3F\u7C7B\u578B",trigger:"change"}],businessScenario:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E1A\u52A1\u573A\u666F",trigger:"change"}],templateId:[{required:!0,message:"\u8BF7\u9009\u62E9\u6392\u7248\u6A21\u677F",trigger:"change"}]}),N=u([{value:"government",label:"\u653F\u52A1"},{value:"commerce",label:"\u5546\u52A1"},{value:"ecommerce",label:"\u7535\u5546"},{value:"campus",label:"\u6821\u56ED"},{value:"medical",label:"\u533B\u7597"},{value:"education",label:"\u6559\u80B2"},{value:"finance",label:"\u91D1\u878D"},{value:"manufacturing",label:"\u5236\u9020"},{value:"media",label:"\u5A92\u4F53"},{value:"entertainment",label:"\u5A31\u4E50"},{value:"transportation",label:"\u4EA4\u901A"},{value:"agriculture",label:"\u519C\u4E1A"},{value:"construction",label:"\u5EFA\u7B51"},{value:"energy",label:"\u80FD\u6E90"},{value:"tourism",label:"\u65C5\u6E38"},{value:"service",label:"\u670D\u52A1"}]),P=u([{value:"notice",label:"\u901A\u77E5"},{value:"government_letter",label:"\u653F\u52A1\u51FD"},{value:"red_head_document",label:"\u7EA2\u5934\u6587\u4EF6"},{value:"report",label:"\u62A5\u544A"},{value:"memo",label:"\u5907\u5FD8\u5F55"},{value:"contract",label:"\u5408\u540C"},{value:"agreement",label:"\u534F\u8BAE"},{value:"proposal",label:"\u63D0\u6848"},{value:"announcement",label:"\u516C\u544A"},{value:"circular",label:"\u901A\u62A5"},{value:"invitation",label:"\u9080\u8BF7\u51FD"},{value:"declaration",label:"\u58F0\u660E"},{value:"application",label:"\u7533\u8BF7\u4E66"},{value:"resume",label:"\u7B80\u5386"}]),d=u({sceneName:"\u6587\u4E66\u751F\u6210"}),z=()=>{W().then(o=>{T.value=o.data})},B=()=>{X(_.value).then(o=>{if(d.value=o.data,!d.value.templateExtractorEngineer||!d.value.contentReviewerEngineer){I.value.configAgent();return}o.data.genStatus==1&&w()})},O=()=>{const o=S.value;!o||o.validate(t=>{if(t){if(!l.promptText){E.error("\u8BF7\u8F93\u5165\u5185\u5BB9");return}E.success("\u751F\u6210\u6210\u529F"),Y({sceneId:_.value,promptContent:l.promptText}).then(V=>{w()})}})},w=()=>{q.push({path:"/scene/contentFormatter/contentParser",query:{sceneId:_.value,genStatus:!1,channelStreamId:F.generate()}})},U=()=>{localStorage.setItem("ruleForm",JSON.stringify({documentType:l.documentType,businessScenario:l.businessScenario,templateId:l.templateId}))};return D([()=>l.documentType,()=>l.businessScenario,()=>l.templateId],()=>{U()}),G(()=>{B(),z()}),(o,t)=>{const V=i("el-input"),m=i("el-form-item"),f=i("el-option"),b=i("el-select"),H=i("el-form"),L=i("el-button");return c(),v("div",ee,[a(n(Q),{currentSeneInfo:d.value,onOpenExecuteHandle:o.openExecuteHandle,ref_key:"roleSelectPanelRef",ref:I},null,8,["currentSeneInfo","onOpenExecuteHandle"]),s("div",le,[te,s("div",null,[a(H,{ref_key:"ruleFormRef",ref:S,model:n(l),rules:n(C),style:{display:"flex",gap:"10px","flex-direction":"column"},"label-width":"120px","label-position":"top",size:"large"},{default:r(()=>[s("div",ae,[a(m,{prop:"promptText",style:{width:"100%"}},{default:r(()=>[a(V,{type:"textarea",rows:8,modelValue:n(l).promptText,"onUpdate:modelValue":t[0]||(t[0]=e=>n(l).promptText=e),class:"input-box",size:"large",resize:"none",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6570\u636E\u53CA\u5206\u6790\u9700\u6C42\uFF0C\u751F\u6210\u5BF9\u5E94\u7684\u5206\u6790\u62A5\u544A\u6216\u8FDB\u884C\u6570\u636E\u5904\u7406","prefix-icon":o.Search},null,8,["modelValue","prefix-icon"])]),_:1})]),s("div",ne,[a(m,{prop:"documentType",style:{width:"33%"}},{default:r(()=>[a(b,{modelValue:n(l).documentType,"onUpdate:modelValue":t[1]||(t[1]=e=>n(l).documentType=e),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"\u8BF7\u9009\u62E9\u6587\u4E66\u7C7B\u578B",style:{width:"100%"}},{default:r(()=>[(c(!0),v(g,null,y(P.value,e=>(c(),x(f,{key:e.value,border:!1,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{prop:"businessScenario",style:{width:"33%"}},{default:r(()=>[a(b,{modelValue:n(l).businessScenario,"onUpdate:modelValue":t[2]||(t[2]=e=>n(l).businessScenario=e),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"\u8BF7\u9009\u62E9\u4E1A\u52A1\u573A\u666F",style:{width:"100%"}},{default:r(()=>[(c(!0),v(g,null,y(N.value,e=>(c(),x(f,{key:e.value,border:!1,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{prop:"templateId",style:{width:"33%"}},{default:r(()=>[a(b,{placeholder:"\u9009\u62E9\u6392\u7248\u6A21\u677F",modelValue:n(l).templateId,"onUpdate:modelValue":t[3]||(t[3]=e=>n(l).templateId=e)},{default:r(()=>[(c(!0),v(g,null,y(T.value,e=>(c(),x(f,{key:e.id,label:e.templateName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])]),a(L,{type:"primary",size:"large",onClick:t[4]||(t[4]=e=>O()),class:"send-button"},{default:r(()=>[M(" \u5185\u5BB9\u91CD\u65B0\u6392\u7248 \xA0 "),oe]),_:1})]),se])}}},me=j(re,[["__scopeId","data-v-22887f0e"]]);export{me as default};
