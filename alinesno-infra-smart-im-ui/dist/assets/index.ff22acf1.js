import{_ as M,r as n,B as N,O as T,o as U,a as l,b as V,c as D,d as o,w as c,u as i,e,h as G,g as L,E as y,I as $,p as j,i as J,l as d}from"./index.d9d30be3.js";import K from"./executeHandle.41bc6b7d.js";import Q from"./roleSelectPanel.b7972537.js";import{g as W}from"./documentReview.9b9cb1b2.js";import{S as X}from"./snowflake-id.35ef5390.js";import"./documentReviewSceneInfo.cbf698f4.js";import"./configSceneAgent.f1635811.js";const s=r=>(j("data-v-771678b2"),r=r(),J(),r),Y={class:"document-review-container"},Z={class:"review-main-content"},ee=s(()=>e("div",{class:"review-header-content"},[e("div",{class:"review-title"},[e("i",{class:"fa-brands fa-phoenix-framework",style:{color:"#409EFF"}}),d(" \u6587\u6863\u5BA1\u67E5\uFF0C\u4E00\u952E\u5F00\u542F\u5BA1\u67E5 ")]),e("div",{class:"review-description"},"\u5FEB\u901F\u8BC6\u522B\u6587\u6863\u6F5C\u5728\u98CE\u9669\uFF0C\u63D0\u4F9B\u4E13\u4E1A\u7684\u98CE\u9669\u8BC4\u4F30\u548C\u4FEE\u6539\u5EFA\u8BAE")],-1)),ae={class:"review-upload-container"},ne=s(()=>e("div",{class:"el-upload__text"},[e("em",null,"\u70B9\u51FB"),d("\u6216\u5C06\u6587\u6863\u62D6\u62FD\u5230\u8FD9\u91CC\u4E0A\u4F20 ")],-1)),te=s(()=>e("div",{class:"el-upload__tip"}," \u5355\u4E2A\u5408\u540C\u6587\u4EF6\u7684\u5B57\u6570\u4E0D\u8D85\u8FC710\u4E07\u5B57\uFF0C\u683C\u5F0F\u652F\u6301\uFF1Apdf/doc/docx ",-1)),oe=s(()=>e("span",null,[e("i",{class:"fa-solid fa-file-signature"}),d(" \u6587\u6863\u5BA1\u67E5\u77E5\u8BC6\u5E93 ")],-1)),se=s(()=>e("span",null,[d(" \u63D0\u4F9B\u81EA\u5B9A\u4E49\u5BA1\u6838\u89C4\u5219 "),e("i",{class:"fa-solid fa-right-long"})],-1)),le=[oe,se],ce=s(()=>e("div",{class:"review-footer-message"}," \u670D\u52A1\u751F\u6210\u7684\u6240\u6709\u5185\u5BB9\u5747\u7531\u4EBA\u5DE5\u667A\u80FD\u6A21\u578B\u751F\u6210\uFF0C\u5176\u751F\u6210\u5185\u5BB9\u7684\u51C6\u786E\u6027\u548C\u5B8C\u6574\u6027\u65E0\u6CD5\u4FDD\u8BC1\uFF0C\u4E0D\u80FD\u4EE3\u8868\u6211\u4EEC\u7684\u6001\u5EA6\u548C\u89C2\u70B9\u3002 ",-1)),re={__name:"index",setup(r){const v=new X,m=n(null),h=n(null),k=n([]),R=n([]),t=n({}),g=G(),w=L(),E=n(w.query.back||!1),x=n([]),I=n(null),u=n(w.query.sceneId),b=[{sceneId:"1",title:"\u5927\u7F57\u5E02\u5E94\u6025\u7BA1\u7406\u5C40\u9996\u90FD\u6838\u5FC3\u533A\u52A0\u6CB9\u7AD9\u667A\u80FD\u89C6\u9891\u76D1\u63A7\u548C\u7269\u8054\u76D1\u6D4B\u7CFB\u7EDF\u9879\u76EE_\u62DB\u6295\u6807\u6587\u4EF6"},{sceneId:"3",title:"\u5E7F\u897F\u4EBA\u5DE5\u667A\u80FD\u4EA7\u4E1A\u53D1\u5C55\u767D\u76AE\u4E66\uFF082024\uFF09"},{sceneId:"4",title:"\u5927\u7F57\u5E02\u5E94\u6025\u7BA1\u7406\u5C40\u9996\u90FD\u6838\u5FC3\u533A\u52A0\u6CB9\u7AD9\u667A\u80FD\u89C6\u9891\u76D1\u63A7\u548C\u7269\u8054\u76D1\u6D4B\u7CFB\u7EDF\u9879\u76EE_\u62DB\u6295\u6807\u6587\u4EF6"},{sceneId:"3",title:"\u5E7F\u897F\u4EBA\u5DE5\u667A\u80FD\u4EA7\u4E1A\u53D1\u5C55\u767D\u76AE\u4E66\uFF082024\uFF09"}],p=N({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+T()},url:"/prod-api/api/infra/smart/assistant/scene/documentReview/importData",display:"/prod-api/v1/api/infra/base/im/chat/displayImage/"});b.forEach(a=>{a.hover=!1});const B=async()=>{(t.value.analysisAgentEngineer==0||t.value.logicReviewerEngineer==0)&&m.value.configAgent()},A=()=>{I.value.handleOpen(t.value,k.value,R.value)},C=(a,_)=>{x.value=a.data?a.data.split(",").map(f=>({url:p.display+f})):[],h.value.close(),g.push({path:"/scene/documentReview/documentParser",query:{sceneId:u.value,channelStreamId:v.generate()}})},H=a=>a.size/1024/1024>20?(y.error("Avatar picture size can not exceed 20MB!"),!1):(h.value=$.service({lock:!0,text:"\u6587\u4EF6\u4E0A\u4F20\u4E2D ...",background:"rgba(0, 0, 0, 0.7)"}),!0),O=()=>{y.warning("\u8BF7\u4ECE\u667A\u80FD\u4F53\u5E73\u53F0\u540E\u53F0\uFF0C\u5168\u5C40\u914D\u7F6E\u81EA\u5B9A\u4E49\u5BA1\u6838\u6E05\u5355.")},S=()=>{W(u.value).then(a=>{if(t.value=a.data,t.value.genStatus==1&&!E.value){g.push({path:"/scene/documentReview/documentParser",query:{sceneId:u.value,channelStreamId:v.generate()}});return}B()})};return U(()=>{S()}),(a,_)=>{const f=l("upload-filled"),P=l("el-icon"),q=l("el-upload"),z=l("el-col"),F=l("el-row");return V(),D("div",Y,[o(F,null,{default:c(()=>[o(z,{span:24},{default:c(()=>[o(i(Q),{currentSeneInfo:t.value,onOpenExecuteHandle:A,ref_key:"roleSelectPanelRef",ref:m},null,8,["currentSeneInfo"]),e("div",Z,[ee,e("div",ae,[o(q,{class:"upload-demo",drag:"","file-list":x.value,action:i(p).url+"?sceneId="+t.value.id,"auto-upload":!0,accept:".doc,.docx,.pdf","on-success":C,"before-upload":H,headers:i(p).headers,multiple:""},{tip:c(()=>[te]),default:c(()=>[o(P,{class:"el-icon--upload"},{default:c(()=>[o(f)]),_:1}),ne]),_:1},8,["file-list","action","headers"])]),e("div",{class:"review-knowledge-base",onClick:_[0]||(_[0]=ie=>O())},le)]),ce]),_:1})]),_:1}),o(i(K),{ref_key:"executeHandleRef",ref:I,onOpenChatBox:a.openChatBox,onHandleGetScene:S},null,8,["onOpenChatBox"])])}}},he=M(re,[["__scopeId","data-v-771678b2"]]);export{he as default};
