import{_ as he,g as ge,r as s,n as ye,a as i,b as U,c as H,d as t,w as o,e as a,l as c,t as f,F as be,f as xe,y as Ce,L as K,E as ke,I as Ae,p as Ve,i as Se,J as we}from"./index.d9d30be3.js";import{l as Ee}from"./user.9e8a1ab9.js";const I=x=>(Ve("data-v-1055b142"),x=x(),Se(),x),Ie={class:"card-header"},Ne={style:{display:"flex","align-items":"center",gap:"5px"}},$e=I(()=>a("i",{class:"fa-solid fa-file-pdf"},null,-1)),Me={class:"edit-header-avatar"},ze=["src","onClick"],De=I(()=>a("i",{class:"fa-solid fa-user-plus"},null,-1)),Te=[De],Le=I(()=>a("i",{class:"fa-solid fa-feather icon-btn"},null,-1)),Ue=I(()=>a("i",{class:"fa-solid fa-file-shield"},null,-1)),Be={class:"chapter-tree-content"},Oe={class:"custom-tree-node",style:{height:"auto"}},Pe={style:{display:"flex","padding-top":"10px","flex-direction":"column"}},Re={style:{"font-size":"16px","font-weight":"bold"}},qe={class:"description"},Ge={style:{color:"#777"}},Je={class:"description",style:{"padding-top":"0px"}},je={style:{color:"#777"}},Fe={style:{"margin-right":"10px",display:"flex","align-items":"center",gap:"5px"}},He={class:"dialog-footer"},Ke={style:{"margin-bottom":"10px"}},Qe={class:"dialog-footer"},We={class:"dialog-body-content",style:{"text-align":"center"}},Xe={class:"dialog-footer"},Ye={__name:"mediaOutlineEditor",emits:["setCurrentScreenInfo","editContent"],setup(x,{expose:Q,emit:B}){const N=ge(),{proxy:C}=we(),k=s(null),u=s({roleAvatar:"",roleName:"",responsibilities:"",email:"zhangsan@example.com"}),_=s([{label:"\u5E97\u5916\u666F",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u5148\u5C55\u793A\u5E97\u94FA\u5916\u89C2\uFF0C\u7ED9\u89C2\u4F17\u7B2C\u4E00\u5370\u8C61\u3002",MediaSpeechTextArray:["\u6B22\u8FCE\u6765\u5230\u2018\u771F\u597D\u5403\u2019\uFF0C\u8FD9\u91CC\u6709\u7740\u4F20\u627F\u591A\u5E74\u7684\u8001\u53CB\u7C89\u3002","\u5728\u8FD9\u5BB6\u5E97\u91CC\uFF0C\u60A8\u80FD\u54C1\u5C1D\u5230\u6B63\u5B97\u7684\u8001\u53CB\u7C89\u3002","\u8D70\u8FDB\u2018\u771F\u597D\u5403\u2019\uFF0C\u611F\u53D7\u4F20\u7EDF\u7F8E\u98DF\u7684\u9B45\u529B\u3002"],description:"\u4F7F\u7528\u624B\u673A\u62CD\u6444\u5E97\u94FA\u6B63\u9762\u5168\u666F\uFF0C\u5305\u62EC\u62DB\u724C\u3002\u65E9\u6668\u9633\u5149\u4E0B\uFF0C\u987E\u5BA2\u9646\u7EED\u8FDB\u5E97\u3002",duration:"5\u79D2"},{label:"\u5E97\u5185\u73AF\u5883",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u63A5\u7740\u8F6C\u6362\u5230\u5185\u90E8\u73AF\u5883\uFF0C\u5C55\u73B0\u5E97\u94FA\u6C1B\u56F4\u3002",MediaSpeechTextArray:["\u6E29\u99A8\u7684\u7528\u9910\u73AF\u5883\uFF0C\u8BA9\u6BCF\u4E00\u9910\u90FD\u6210\u4E3A\u4EAB\u53D7\u3002","\u8212\u9002\u7684\u5EA7\u4F4D\uFF0C\u70ED\u60C5\u7684\u670D\u52A1\uFF0C\u8FD9\u91CC\u662F\u98DF\u5BA2\u4EEC\u7684\u5929\u5802\u3002","\u5E97\u5185\u7684\u6BCF\u4E00\u4E2A\u89D2\u843D\uFF0C\u90FD\u5145\u6EE1\u4E86\u6545\u4E8B\u3002"],description:"\u7528\u5355\u53CD\u76F8\u673A\u62CD\u6444\u4E2D\u666F\uFF0C\u6355\u6349\u5E97\u5185\u88C5\u9970\u3001\u987E\u5BA2\u7528\u9910\u573A\u666F\u3002",duration:"4\u79D2"},{label:"\u53A8\u5E08\u51C6\u5907",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u901A\u8FC7\u53A8\u5E08\u51C6\u5907\u98DF\u6750\u7684\u8FC7\u7A0B\uFF0C\u5F3A\u8C03\u98DF\u54C1\u7684\u65B0\u9C9C\u5EA6\u3002",MediaSpeechTextArray:["\u65B0\u9C9C\u7684\u98DF\u6750\u662F\u7F8E\u5473\u7684\u5173\u952E\u3002","\u6BCF\u4E00\u4EFD\u8001\u53CB\u7C89\u90FD\u662F\u7528\u5FC3\u5236\u4F5C\u7684\u7ED3\u679C\u3002","\u7CBE\u5FC3\u6311\u9009\u7684\u539F\u6599\uFF0C\u53EA\u4E3A\u5E26\u7ED9\u60A8\u6700\u7EAF\u6B63\u7684\u5473\u9053\u3002"],description:"\u7279\u5199\u955C\u5934\uFF0C\u8BB0\u5F55\u53A8\u5E08\u5904\u7406\u98DF\u6750\u7684\u624B\u90E8\u52A8\u4F5C\uFF0C\u4F7F\u7528\u624B\u673A\u6216\u5355\u53CD\u3002",duration:"3\u79D2"},{label:"\u70F9\u996A\u8FC7\u7A0B",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u5C55\u793A\u70F9\u996A\u8FC7\u7A0B\uFF0C\u589E\u52A0\u98DF\u6B32\u3002",MediaSpeechTextArray:["\u770B\uFF0C\u8FD9\u4FBF\u662F\u8001\u53CB\u7C89\u7684\u7075\u9B42\u6240\u5728\u3002","\u5FEB\u706B\u7FFB\u7092\uFF0C\u9999\u5473\u56DB\u6EA2\u3002","\u6BCF\u4E00\u9053\u5DE5\u5E8F\uFF0C\u90FD\u662F\u5BF9\u4F20\u7EDF\u7684\u81F4\u656C\u3002"],description:"\u7528\u624B\u673A\u6162\u52A8\u4F5C\u62CD\u6444\u53A8\u5E08\u5FEB\u901F\u7FFB\u7092\u8001\u53CB\u7C89\u7684\u7EC6\u8282\u3002",duration:"6\u79D2"},{label:"\u6210\u54C1\u7279\u5199",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u805A\u7126\u4E8E\u6210\u54C1\uFF0C\u7A81\u51FA\u5356\u76F8\u3002",MediaSpeechTextArray:["\u8272\u6CFD\u8BF1\u4EBA\uFF0C\u9999\u6C14\u6251\u9F3B\u7684\u8001\u53CB\u7C89\u3002","\u4E00\u7897\u7897\u70ED\u817E\u817E\u7684\u8001\u53CB\u7C89\uFF0C\u7B49\u5F85\u7740\u60A8\u7684\u54C1\u5C1D\u3002","\u8FD9\u5C31\u662F\u771F\u597D\u5403\u7684\u8001\u53CB\u7C89\uFF0C\u5149\u662F\u770B\u7740\u5C31\u8BA9\u4EBA\u5782\u6D8E\u6B32\u6EF4\u3002"],description:"\u4F7F\u7528\u5355\u53CD\u76F8\u673A\u62CD\u6444\u8001\u53CB\u7C89\u6210\u54C1\u7684\u7279\u5199\u955C\u5934\uFF0C\u6CE8\u610F\u5149\u7EBF\u89D2\u5EA6\uFF0C\u4F7F\u98DF\u7269\u770B\u8D77\u6765\u66F4\u52A0\u5438\u5F15\u4EBA\u3002",duration:"5\u79D2"},{label:"\u987E\u5BA2\u4EAB\u7528",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u901A\u8FC7\u987E\u5BA2\u7684\u8868\u60C5\u4F20\u8FBE\u7F8E\u98DF\u7684\u597D\u5403\u3002",MediaSpeechTextArray:["\u770B\u90A3\u6EE1\u610F\u7684\u7B11\u5BB9\uFF0C\u5C31\u77E5\u9053\u6709\u591A\u7F8E\u5473\u3002","\u6BCF\u4E00\u53E3\u90FD\u662F\u5BF9\u8001\u53CB\u7C89\u7684\u8D5E\u7F8E\u3002","\u987E\u5BA2\u7684\u7B11\u5BB9\u662F\u6700\u597D\u7684\u8BC1\u660E\u3002"],description:"\u7528\u624B\u673A\u6355\u6349\u987E\u5BA2\u4EAB\u7528\u8001\u53CB\u7C89\u65F6\u7684\u6EE1\u610F\u8868\u60C5\uFF0C\u9009\u62E9\u5408\u9002\u7684\u65F6\u673A\u8FDB\u884C\u62CD\u6444\u3002",duration:"4\u79D2"},{label:"\u8001\u53CB\u7C89\u7279\u8272",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u8BB2\u89E3\u8001\u53CB\u7C89\u7684\u7279\u8272\uFF0C\u52A0\u6DF1\u8BB0\u5FC6\u70B9\u3002",MediaSpeechTextArray:["\u72EC\u7279\u7684\u8C03\u6599\uFF0C\u8BA9\u5473\u9053\u66F4\u52A0\u6D53\u90C1\u3002","\u8001\u53CB\u7C89\u7684\u79D8\u8BC0\u5728\u4E8E\u5B83\u7684\u6C64\u5E95\u3002","\u7EC6\u56BC\u6162\u54BD\uFF0C\u611F\u53D7\u6BCF\u4E00\u4E1D\u7EC6\u817B\u3002"],description:"\u7528\u65E0\u4EBA\u673A\u822A\u62CD\u53A8\u623F\u4E00\u89D2\uFF0C\u7136\u540E\u5207\u6362\u81F3\u8001\u53CB\u7C89\u914D\u6599\u7684\u7279\u5199\u3002",duration:"7\u79D2"},{label:"\u5386\u53F2\u56DE\u987E",merchantAdvertisement:"\u771F\u597D\u5403",thought:"\u4EE5\u56DE\u5FC6\u7684\u5F62\u5F0F\u4ECB\u7ECD\u8001\u53CB\u7C89\u7684\u5386\u53F2\u3002",MediaSpeechTextArray:["\u6570\u5341\u5E74\u7684\u4F20\u7EDF\uFF0C\u9020\u5C31\u4E86\u4ECA\u5929\u7684\u7F8E\u5473\u3002","\u4ECE\u8857\u8FB9\u5C0F\u5403\u5230\u9910\u684C\u5E38\u5BA2\uFF0C\u8001\u53CB\u7C89\u7684\u6545\u4E8B\u8FD8\u5728\u7EE7\u7EED\u3002","\u6BCF\u4E00\u4EE3\u4EBA\u90FD\u6709\u81EA\u5DF1\u7684\u8001\u53CB\u7C89\u56DE\u5FC6\u3002"],description:"\u4F7F\u7528\u7535\u8111\u5F55\u5C4F\u7ED3\u5408\u8001\u7167\u7247\uFF0C\u8BB2\u8FF0\u8001\u53CB\u7C89\u7684\u5386\u53F2\u53D8\u8FC1\u3002",duration:"6\u79D2"}]),v=s(!1),O=s(""),h=s(!1),g=s([]),P=s("chapter"),p=s({id:0,screenName:null,screenDesc:null,screenCount:0,knowledgeId:null,chapterEditors:[],contentEditors:[]}),$=s(N.query.screenId),R=s([]),y=s(!1),A=s(null),V=s(""),S=s(""),b=s("");s(!1);const W=(l,e,d)=>d!=="inner",X=l=>l.data.id!==1,Y=l=>{console.log("Node clicked: ",l)},Z=(l,e,d)=>{l.preventDefault(),console.log("Node context menu: ",e,d)},ee=(l,e)=>{const d=l.parent,r=d.data.children||d.data,M=r.findIndex(z=>z.id===e.id);r.splice(M,1)},te=(l,e)=>{A.value=l,S.value=e.description,V.value=l.label,v.value=!0},le=(l,e)=>{B("editContent",l,e)},oe=()=>{A.value&&(A.value.data.label=V.value,A.value.data.description=S.value,ke.success("\u7F16\u8F91\u6210\u529F"),v.value=!1)},ne=()=>{if(!b.value){C.$modal.msgError("\u8BF7\u8F93\u5165\u6D88\u606F\u5185\u5BB9.");return}k.value=Ae.service({lock:!0,text:"\u4EFB\u52A1\u6267\u884C\u4E2D\uFF0C\u8BF7\u52FF\u64CD\u4F5C\u5176\u5B83\u754C\u9762 ...",background:"rgba(0, 0, 0, 0.2)"});let l={screenId:$.value,message:b.value,roleId:u.value.id};chatRole(l).then(e=>{C.$modal.msgSuccess("\u53D1\u9001\u6210\u529F"),y.value=!1,b.value="",Array.prototype.push.apply(_.value,e.data),G()})},ae=()=>{const l={id:Date.now(),label:`\u7B2C${_.value.length+1}\u7AE0`,description:"\u8282\u70B9\u5185\u5BB9\u63CF\u8FF0\u4FE1\u606F",children:[]};_.value.push(l)};function se(l){y.value=!0,console.log("selectChaterGenerator"),u.value=l,u.value.email="zhangsan@example.com"}function ie(){Ee().then(l=>{for(let e=0;e<l.data.length;e++){let d=l.data[e];R.value.push({key:d.id,label:d.roleName,disabled:!1})}})}function q(l){h.value=!0,console.log("configAgent"),P.value=l,O.value="\u9009\u62E9\u89D2\u8272",l==="chapter"?(console.log("currentScreenInfo.value.chapterEditors= "+p.value.chapterEditors),g.value=p.value.chapterEditors.map(e=>e.id)):l==="content"&&(console.log("currentScreenInfo.value.contentEditors= "+p.value.contentEditors),g.value=p.value.contentEditors.map(e=>e.id))}function de(){h.value=!1,updateChapterEditor($.value,g.value,P.value).then(l=>{C.$modal.msgSuccess("\u66F4\u65B0\u6210\u529F"),w()})}function w(){getScreen($.value).then(l=>{p.value=l.data,B("setCurrentScreenInfo",l.data)})}const re=()=>{const l=JSON.stringify(_.value,null,2);console.log(l),saveChapter(l,N.query.screenId).then(e=>{C.$modal.msgSuccess("\u4FDD\u5B58\u6210\u529F"),w()})},G=()=>{console.log("child method. "+k.value),k.value&&k.value.close()};return Q({closeStreamDialog:G,handleGetScreen:w,configAgent:q}),ye(()=>{console.log("screenId = "+N.query.screenId),ie(),w()}),(l,e)=>{const d=i("el-tooltip"),r=i("el-button"),M=i("el-popconfirm"),z=i("el-tree"),ce=i("el-scrollbar"),J=i("el-card"),D=i("el-input"),j=i("el-form-item"),ue=i("el-form"),T=i("el-dialog"),E=i("el-col"),pe=i("Message"),me=i("el-icon"),fe=i("el-link"),F=i("el-row"),_e=i("el-avatar"),ve=i("el-transfer");return U(),H("div",null,[t(J,{class:"box-card",shadow:"never"},{header:o(()=>[a("div",Ie,[a("div",Ne,[$e,c(" "+f(p.value.screenName)+" ",1),(U(!0),H(be,null,xe(p.value.chapterEditors,(n,m)=>(U(),Ce(d,{key:m,class:"box-item",effect:"dark",content:n.roleName,placement:"top"},{default:o(()=>[a("span",Me,[a("img",{src:l.imagePathByPath(n.roleAvatar),onClick:L=>se(n)},null,8,ze)])]),_:2},1032,["content"]))),128)),t(d,{class:"box-item",effect:"dark",content:"\u6DFB\u52A0\u7AE0\u8282\u7F16\u5199\u4EBA\u5458",placement:"top"},{default:o(()=>[a("span",{class:"edit-header-avatar",onClick:e[0]||(e[0]=n=>q("chapter"))},Te)]),_:1})]),a("span",null,[t(d,{class:"box-item",effect:"dark",content:"\u6DFB\u52A0\u7AE0\u8282",placement:"top"},{default:o(()=>[t(r,{type:"primary",text:"",bg:"",size:"large",onClick:ae},{default:o(()=>[Le]),_:1})]),_:1}),t(d,{class:"box-item",effect:"dark",content:"\u4FDD\u5B58\u7AE0\u8282",placement:"top"},{default:o(()=>[t(r,{type:"success",text:"",bg:"",size:"large",onClick:re},{default:o(()=>[Ue]),_:1})]),_:1})])])]),default:o(()=>[t(ce,{style:{height:"calc(100vh - 180px)"}},{default:o(()=>[a("div",Be,[t(z,{data:_.value,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":W,"allow-drag":X,onNodeClick:Y,onNodeContextmenu:Z},{default:o(({node:n,data:m})=>[a("div",Oe,[a("div",Pe,[a("div",Re,"\u955C\u5934:"+f(n.label),1),a("div",qe,[c("\u8BBE\u8BA1\u601D\u8003:"),a("span",Ge,f(m.thought),1)]),a("div",Je,[c("\u955C\u5934\u63CF\u8FF0:"),a("span",je,f(m.description),1)])]),a("span",Fe,[t(d,{class:"box-item",effect:"dark",content:"\u7F16\u8F91\u7AE0\u8282\u6807\u9898",placement:"left"},{default:o(()=>[t(r,{type:"text",icon:"Edit",bg:"",size:"mini",onClick:K(L=>te(n,m),["stop"])},null,8,["onClick"])]),_:2},1024),t(d,{class:"box-item",effect:"dark",content:"\u7F16\u8F91\u7AE0\u8282\u5185\u5BB9",placement:"left"},{default:o(()=>[t(r,{type:"text",icon:"EditPen",bg:"",size:"mini",onClick:K(L=>le(n,m),["stop"])},null,8,["onClick"])]),_:2},1024),t(M,{title:"\u786E\u8BA4\u8981\u5220\u9664\u7AE0\u8282\u4E48?",onConfirm:L=>ee(n,m)},{reference:o(()=>[t(r,{type:"text",icon:"Delete",bg:"",size:"mini"})]),_:2},1032,["onConfirm"])])])]),_:1},8,["data"])])]),_:1})]),_:1}),t(T,{title:"\u7F16\u8F91\u8282\u70B9",modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=n=>v.value=n),width:"900px"},{default:o(()=>[t(ue,{"label-width":"80px",size:"large"},{default:o(()=>[t(j,{label:"\u8282\u70B9\u540D\u79F0"},{default:o(()=>[t(D,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=n=>V.value=n),placeholder:"\u8BF7\u8F93\u5165\u8282\u70B9\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(j,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:o(()=>[t(D,{type:"textarea",rows:5,resize:"none",modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=n=>S.value=n),placeholder:"\u8BF7\u8F93\u5165\u8282\u70B9\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1}),a("div",He,[t(r,{onClick:e[3]||(e[3]=n=>v.value=!1)},{default:o(()=>[c("\u53D6 \u6D88")]),_:1}),t(r,{type:"primary",onClick:e[4]||(e[4]=n=>oe())},{default:o(()=>[c("\u786E \u8BA4")]),_:1})])]),_:1},8,["modelValue"]),t(T,{title:"\u7531\u4EE5\u4E0B\u5DE5\u7A0B\u5E08\u751F\u6210\u76EE\u5F55",modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=n=>y.value=n),width:"40%"},{default:o(()=>[t(J,{class:"person-card",shadow:"never"},{default:o(()=>[t(F,{type:"flex",justify:"center",align:"middle"},{default:o(()=>[t(E,{span:16,class:"info-container"},{default:o(()=>[a("h2",null,f(u.value.roleName),1),t(F,null,{default:o(()=>[t(E,{span:24},{default:o(()=>[a("div",Ke,f(u.value.responsibilities),1)]),_:1}),t(E,{span:24},{default:o(()=>[t(fe,{underline:!1,href:u.value.emailLink,target:"_blank"},{default:o(()=>[t(me,null,{default:o(()=>[t(pe)]),_:1}),c(" "+f(u.value.email),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),t(E,{span:8,class:"avatar-container"},{default:o(()=>[t(_e,{size:100,src:l.imagePathByPath(u.value.roleAvatar)},null,8,["src"])]),_:1})]),_:1})]),_:1}),t(D,{size:"large",modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=n=>b.value=n),placeholder:"\u8BF7\u8F93\u51FA\u9488\u5BF9\u4E8E\u672C\u7AE0\u8282\u5185\u5BB9\u7684\u4E00\u4E9B\u81EA\u5B9A\u4E49\u8981\u6C42"},null,8,["modelValue"]),a("div",Qe,[t(r,{onClick:e[7]||(e[7]=n=>y.value=!1)},{default:o(()=>[c("\u53D6 \u6D88")]),_:1}),t(r,{type:"primary",onClick:e[8]||(e[8]=n=>ne())},{default:o(()=>[c("\u751F\u6210\u7AE0\u8282")]),_:1})])]),_:1},8,["modelValue"]),t(T,{modelValue:h.value,"onUpdate:modelValue":e[12]||(e[12]=n=>h.value=n),title:O.value,width:"900"},{footer:o(()=>[a("div",Xe,[t(r,{onClick:e[11]||(e[11]=n=>h.value=!1)},{default:o(()=>[c("\u5173\u95ED")]),_:1}),t(r,{type:"primary",onClick:de},{default:o(()=>[c("\u786E\u8BA4")]),_:1})])]),default:o(()=>[a("div",We,[t(ve,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=n=>g.value=n),filterable:"",style:{"text-align":"left",width:"100%",display:"inline-block"},titles:["\u6E90\u89D2\u8272","\u5DF2\u9009\u62E9"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},"filter-method":l.filterAgentMethod,"filter-placeholder":"\u641C\u7D22\u89D2\u8272",data:R.value},null,8,["modelValue","filter-method","data"])])]),_:1},8,["modelValue","title"])])}}},tt=he(Ye,[["__scopeId","data-v-1055b142"]]);export{tt as default};
