import{_ as z,g as F,r as o,o as W,a as _,C as q,b as v,c as f,e as t,d as l,w as a,l as g,u as n,F as A,f as E,S as H,t as m,D as O,H as $,n as S,p as J,i as K}from"./index.d9d30be3.js";import{c as Q,d as X}from"./documentReview.9b9cb1b2.js";import{c as Y,d as Z,e as ee}from"./documentReviewSceneInfo.cbf698f4.js";import te from"./ruleCheckResultPanel.d532dbf7.js";const h=d=>(J("data-v-7b981ed4"),d=d(),K(),d),oe={class:"review-result-container"},le={style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},se=h(()=>t("i",{class:"fa-solid fa-download"},null,-1)),ae=h(()=>t("i",{class:"fa-solid fa-file-word"},null,-1)),ne=h(()=>t("div",null,null,-1)),ce={style:{"margin-top":"20px"}},re=["onClick"],de={class:"check-result-box",style:{display:"flex",gap:"5px","align-items":"center"}},ie={class:"document-wrapper"},ue=["src"],pe={class:"word-download-button"},_e=h(()=>t("i",{class:"el-icon-download"},null,-1)),ve={__name:"reviewResult",setup(d){const L=F(),x=o(null),i=o(L.query.sceneId);o(""),o([]);const w=o(!1),k=o(null),u=o(!1),y=o(""),b=o(""),p=o(!1),R=o(null);o([]);const C=o([]),P=e=>{switch(e.riskLevel){case"low":return"info";case"medium":return"warning";case"high":return"danger";default:return"success"}},V=e=>{console.log(e.ruleName),S(()=>{e.ruleId=e.id,e.sceneId=i.value,k.value.openDrawerAndSettings(e)})},N=()=>{Q(i.value).then(e=>{x.value=e.data,C.value=x.value.reviewListDtos})},T=()=>{y.value="\u5BA1\u6838\u62A5\u544A\u9884\u89C8",u.value=!0,p.value=!0,Y(i.value).then(e=>{const r=e.data;R.value=r,S(async()=>{const c=await Z(r);console.log("response.data:"+c),b.value=window.URL.createObjectURL(c),p.value=!1})})},U=()=>{ee(R.value).then(e=>{window.open(e.data)})},M=()=>{w.value=!0,X(i.value).then(e=>{window.open(e.data),w.value=!1})};return W(()=>{N()}),(e,r)=>{const c=_("el-button"),B=_("el-tag"),D=_("el-scrollbar"),G=_("el-dialog"),j=q("loading");return v(),f("div",oe,[t("div",le,[t("div",null,[l(c,{type:"primary",text:"",bg:"",onClick:T},{default:a(()=>[se,g(" \xA0 \u5BFC\u51FA\u5BA1\u6838\u62A5\u544A ")]),_:1}),l(c,{type:"primary",loading:n(w),text:"",bg:"",onClick:M},{default:a(()=>[ae,g(" \xA0 \u5BFC\u51FA\u6807\u6CE8\u6587\u6863 ")]),_:1},8,["loading"])]),ne]),t("div",null,[t("div",ce,[t("div",null,[l(D,{class:"scrollable-area",style:{height:"calc(100vh - 210px)","padding-right":"0px"}},{default:a(()=>[(v(!0),f(A,null,E(n(C),(s,I)=>(v(),f("div",{class:H(["item-alert-"+s.riskLevel,"check-result-item"]),key:I,onClick:fe=>V(s)},[t("div",de,[t("span",null,m(I+1),1),t("span",null,m(s.ruleName),1)]),l(B,{type:P(s),effect:"dark"},{default:a(()=>[g(m(s.auditResultCount),1)]),_:2},1032,["type"])],10,re))),128))]),_:1})])])]),l(te,{ref_key:"ruleCheckResultPanelRef",ref:k},null,512),l(G,{modelValue:n(u),"onUpdate:modelValue":r[0]||(r[0]=s=>$(u)?u.value=s:null),title:n(y),width:"1300px","before-close":e.handleClosePdfDialog,"show-close":!0},{default:a(()=>[O((v(),f("div",ie,[l(D,{class:"scrollable-area",style:{height:"calc(70vh)","margin-top":"20px","padding-right":"0px"}},{default:a(()=>[t("iframe",{src:n(b),style:{position:"absolute",width:"100%","border-radius":"5px",height:"100%",border:"0px","padding-bottom":"10px",background:"#323639"}},`
                `,8,ue)]),_:1})])),[[j,n(p)]]),t("div",pe,[l(c,{type:"primary",size:"large",loading:n(p),onClick:U},{default:a(()=>[_e,g(" \u4E0B\u8F7DWord\u6587\u6863 ")]),_:1},8,["loading"])])]),_:1},8,["modelValue","title","before-close"])])}}},xe=z(ve,[["__scopeId","data-v-7b981ed4"]]);export{xe as default};
