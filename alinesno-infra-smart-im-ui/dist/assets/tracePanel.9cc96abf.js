import{_ as z,r as p,a as c,b as g,c as m,e as l,l as S,d as s,w as a,u as D,a7 as V,S as E,t as $,G as B,n as j}from"./index.d9d30be3.js";import{M as G,H as k,m as J}from"./index.23422e4c.js";const K={class:"task-trace-panel"},q={class:"title",style:{"padding-bottom":"10px"}},O={class:"follow-step-panel"},Q={class:"step-title"},U={class:"trace-tag"},W=["innerHTML"],X=["innerHTML"],Y={class:"follow-btn-panel"},Z={class:"step-btn-panel"},ee={class:"step-progress-panel"},te={__name:"tracePanel",setup(se,{expose:H}){const b=p(null),y=p(null),T=p(20),R=p("#909399"),w=new G({html:!0,linkify:!0,highlight(e,o){if(!!(o&&k.getLanguage(o))){const t=o||"";return x(k.highlight(e,{language:t}).value,t)}return x(k.highlightAuto(e).value,"")}});w.use(J,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});function x(e,o){return`<pre class="code-block-wrapper"><code class="hljs code-block-body ${o}">${e}</code></pre>`}function I(e){if(e)return w.render(e)}const C=p(null),n=p([]),r=p([]),M=()=>{r.value=n.value.find(e=>e.status==="doing"),P()},F=e=>{const o=e.plan.actions;if(o)for(const t of o){const u=n.value.findIndex(_=>_.actionId===t.actionId);u!==-1?(n.value[u].status=t.status,n.value[u].think+=t.think,n.value[u].result+=t.result):n.value.push(t)}const i=e.steps;i&&i.forEach((t,u)=>{const _=t.actions;_&&_.forEach((d,f)=>{const h=n.value.findIndex(v=>v.actionId===d.actionId);h!==-1?(n.value[h].status=d.status,n.value[h].think+=d.think,n.value[h].result+=d.result):n.value.push(d)})}),M()},N=()=>{};function P(){j(()=>{const o=b.value.scrollHeight;y.value.setScrollTop(o)})}return H({pushDeepsearchFlowTracePanel:e=>{C.value=e,F(C.value)},setRoleInfo:e=>{console.log("roleInfo = "+e)}}),(e,o)=>{const i=c("el-icon"),t=c("el-button"),u=c("el-scrollbar"),_=c("ArrowLeftBold"),d=c("ArrowRightBold"),f=c("el-col"),h=c("el-progress"),v=c("el-row");return g(),m("div",K,[l("div",q,[S(" DeepSearch\u8FD0\u884C\u7684\u5DE5\u4F5C\u7A7A\u95F4 "),l("span",null,[s(t,{type:"primary",bg:"",text:"",size:"large",onClick:N},{default:a(()=>[s(i,null,{default:a(()=>[s(D(V))]),_:1})]),_:1})])]),l("div",O,[l("div",Q,[l("span",null,[l("i",{class:E(r.value.icon)},null,2)]),S(" \xA0 \u6B63\u5728\u4F7F\u7528 "),l("span",U,$(r.value.actionName),1)]),s(u,{class:"step-body-panel",ref_key:"scrollbarRef",ref:y},{default:a(()=>{var A,L;return[l("div",{class:"step-body",ref_key:"innerRef",ref:b},[(A=r.value)!=null&&A.think?(g(),m("div",{key:0,class:"say-message-body markdown-body think-content",innerHTML:I(r.value.think)},null,8,W)):B("",!0),(L=r.value)!=null&&L.result?(g(),m("div",{key:1,class:"say-message-body markdown-body output-content",innerHTML:I(r.value.result)},null,8,X)):B("",!0)],512)]}),_:1},512)]),l("div",Y,[s(v,{style:{width:"100%","align-items":"center"}},{default:a(()=>[s(f,{span:8},{default:a(()=>[l("div",Z,[s(t,{type:"primary",bg:"",text:"",size:"large",onClick:e.previewStepAction},{default:a(()=>[s(i,null,{default:a(()=>[s(_)]),_:1})]),_:1},8,["onClick"]),s(t,{type:"primary",bg:"",text:"",size:"large",onClick:e.nextStepAction},{default:a(()=>[s(i,null,{default:a(()=>[s(d)]),_:1})]),_:1},8,["onClick"])])]),_:1}),s(f,{span:16},{default:a(()=>[l("div",ee,[s(h,{percentage:T.value,color:R.value},null,8,["percentage","color"])])]),_:1})]),_:1})])])}}},ce=z(te,[["__scopeId","data-v-d3b90946"]]);export{ce as default};
